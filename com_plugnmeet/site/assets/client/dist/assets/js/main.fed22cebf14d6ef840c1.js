/*! For license information please see main.fed22cebf14d6ef840c1.js.LICENSE.txt */
(self.webpackChunkplugnmeet_client=self.webpackChunkplugnmeet_client||[]).push([[179],{77410:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Abs:()=>r.SYM,Acos:()=>r.VGw,Acosh:()=>r.SpW,AdadeltaOptimizer:()=>r.zJI,AdagradOptimizer:()=>r.HeW,AdamOptimizer:()=>r.a4z,AdamaxOptimizer:()=>r.DBS,Add:()=>r.mm_,AddN:()=>r.Xze,All:()=>r.oT6,Any:()=>r.IKK,ArgMax:()=>r.sJF,ArgMin:()=>r.aJk,Asin:()=>r.M2y,Asinh:()=>r.qw7,Atan:()=>r.jMg,Atan2:()=>r.QCc,Atanh:()=>r.Oyi,AvgPool:()=>r.JhU,AvgPool3D:()=>r._k9,AvgPool3DGrad:()=>r.IMb,AvgPoolGrad:()=>r.ROF,BatchMatMul:()=>r.XLW,BatchToSpaceND:()=>r.zws,Bincount:()=>r.zvY,BroadcastArgs:()=>r.eEB,BroadcastTo:()=>r.Ly9,Cast:()=>r.RFZ,Ceil:()=>r.gJX,ClipByValue:()=>r.xnO,Complex:()=>r.Zz9,ComplexAbs:()=>r.yj2,Concat:()=>r.Eh3,Conv2D:()=>r.mhS,Conv2DBackpropFilter:()=>r.wUP,Conv2DBackpropInput:()=>r.wm,Conv3D:()=>r.x12,Conv3DBackpropFilterV2:()=>r.o2y,Conv3DBackpropInputV2:()=>r.ik2,Cos:()=>r.mc4,Cosh:()=>r.TR1,CropAndResize:()=>r.VcC,Cumprod:()=>r.Byc,Cumsum:()=>r.iHb,DataStorage:()=>r.JLz,DenseBincount:()=>r.QRR,DepthToSpace:()=>r.T0n,DepthwiseConv2dNative:()=>r.cie,DepthwiseConv2dNativeBackpropFilter:()=>r.sL$,DepthwiseConv2dNativeBackpropInput:()=>r.y7R,Diag:()=>r.$w,Dilation2D:()=>r.p4S,Dilation2DBackpropFilter:()=>r.Vn9,Dilation2DBackpropInput:()=>r.ekb,ENV:()=>r.ViN,Einsum:()=>r.$g6,Elu:()=>r.SX0,EluGrad:()=>r.HEU,Environment:()=>r.qAh,Equal:()=>r.hdR,Erf:()=>r.Omj,Exp:()=>r.NEP,ExpandDims:()=>r.YFo,Expm1:()=>r.Y0y,FFT:()=>r.vwp,Fill:()=>r.deh,FlipLeftRight:()=>r.Uyb,Floor:()=>r.OR,FloorDiv:()=>r.jeX,FromPixels:()=>r.eBW,FusedBatchNorm:()=>r.sHE,FusedConv2D:()=>r._V0,FusedDepthwiseConv2D:()=>r.luS,GatherNd:()=>r.q1x,GatherV2:()=>r.qi_,Greater:()=>r.iZT,GreaterEqual:()=>r.Acj,IFFT:()=>r.Qg5,Identity:()=>r.iJz,Imag:()=>r.J_u,IsFinite:()=>r.avt,IsInf:()=>r.iWB,IsNan:()=>r.r7n,KernelBackend:()=>r.Zuw,LRN:()=>r.eZ0,LRNGrad:()=>r.Hhh,LeakyRelu:()=>r.J$2,Less:()=>r.vtC,LessEqual:()=>r.CAk,LinSpace:()=>r.e7N,Log:()=>r.ZbH,Log1p:()=>r.kU,LogSoftmax:()=>r.qCd,LogicalAnd:()=>r.PYm,LogicalNot:()=>r.VfG,LogicalOr:()=>r.MZg,LowerBound:()=>r.qIC,Max:()=>r.YoZ,MaxPool:()=>r.mTV,MaxPool3D:()=>r.OAf,MaxPool3DGrad:()=>r.OU7,MaxPoolGrad:()=>r.OV7,MaxPoolWithArgmax:()=>r.vFR,Maximum:()=>r.BMI,Mean:()=>r.q2K,Min:()=>r.c17,Minimum:()=>r.q8u,MirrorPad:()=>r.jQs,Mod:()=>r.Vbg,MomentumOptimizer:()=>r.rIn,Multinomial:()=>r.NZg,Multiply:()=>r.wYn,Neg:()=>r.kuV,NonMaxSuppressionV3:()=>r.uv1,NonMaxSuppressionV4:()=>r.cye,NonMaxSuppressionV5:()=>r.W0H,NotEqual:()=>r.yQU,OP_SCOPE_SUFFIX:()=>r.zvA,OneHot:()=>r.we_,OnesLike:()=>r.qWM,Optimizer:()=>r.gaJ,OptimizerConstructors:()=>r.eEe,Pack:()=>r.QiL,PadV2:()=>r.lyA,Pool:()=>r.Kgp,Pow:()=>r.pe_,Prelu:()=>r.o0g,Prod:()=>r.DlI,RMSPropOptimizer:()=>r.gVI,Range:()=>r.e6w,Rank:()=>r.yw1,Real:()=>r.xJR,RealDiv:()=>r.oHH,Reciprocal:()=>r.$HU,Reduction:()=>r.IH3,Relu:()=>r.qkr,Relu6:()=>r.SbG,Reshape:()=>r.HZH,ResizeBilinear:()=>r._Yw,ResizeBilinearGrad:()=>r.zbQ,ResizeNearestNeighbor:()=>r.dpD,ResizeNearestNeighborGrad:()=>r.Hmb,Reverse:()=>r.mKl,RotateWithOffset:()=>r.b9H,Round:()=>r.e07,Rsqrt:()=>r.bV0,SGDOptimizer:()=>r.DYp,ScatterNd:()=>r.xQA,SearchSorted:()=>r.nr8,Select:()=>r.PhF,Selu:()=>r.oFR,Sigmoid:()=>r.a5O,Sign:()=>r.i5y,Sin:()=>r.RQH,Sinh:()=>r.wYB,Slice:()=>r.p2w,Softmax:()=>r.Gcp,Softplus:()=>r.MRv,SpaceToBatchND:()=>r.TQc,SparseFillEmptyRows:()=>r.O3z,SparseReshape:()=>r.nhH,SparseSegmentMean:()=>r.w3H,SparseSegmentSum:()=>r.ZjV,SparseToDense:()=>r.D2d,SplitV:()=>r.L8s,Sqrt:()=>r.FKq,Square:()=>r.bK0,SquaredDifference:()=>r._tC,Step:()=>r.h8e,StridedSlice:()=>r.jQk,StringNGrams:()=>r._JP,StringSplit:()=>r.s1s,StringToHashBucketFast:()=>r.XkS,Sub:()=>r.Tr8,Sum:()=>r.GBy,Tan:()=>r.sEM,Tanh:()=>r.MIZ,Tensor:()=>r.esB,TensorBuffer:()=>r.YDk,Tile:()=>r.n9L,TopK:()=>r.cWu,Transform:()=>r.wx7,Transpose:()=>r.G3Y,Unique:()=>r.kpP,Unpack:()=>r.ToN,UnsortedSegmentSum:()=>r.Qvg,UpperBound:()=>r.XDQ,Variable:()=>r._wD,ZerosLike:()=>r.RuY,_FusedMatMul:()=>r.usg,abs:()=>r.WnP,acos:()=>r.Khb,acosh:()=>r.__u,add:()=>r.IHx,addN:()=>r.QBD,all:()=>r.$6P,any:()=>r.YjB,argMax:()=>r.NqF,argMin:()=>r.vHJ,asin:()=>r.ZRM,asinh:()=>r.VfV,atan:()=>r.z4N,atan2:()=>r.fvJ,atanh:()=>r.C80,avgPool:()=>r.wS1,avgPool3d:()=>r.uR5,backend:()=>r.y3$,backend_util:()=>r.Wap,basicLSTMCell:()=>r.zEQ,batchNorm:()=>r.tgs,batchNorm2d:()=>r.Dxk,batchNorm3d:()=>r.JY5,batchNorm4d:()=>r.p3b,batchToSpaceND:()=>r.E4h,bincount:()=>r.yE8,booleanMaskAsync:()=>r.anm,broadcastArgs:()=>r.XsQ,broadcastTo:()=>r.UFq,broadcast_util:()=>r.Jyw,browser:()=>r.Xhn,buffer:()=>r.f3b,cast:()=>r.pju,ceil:()=>r.mDi,clipByValue:()=>r.iUl,clone:()=>r.d9v,complex:()=>r.PYB,concat:()=>r.zoF,concat1d:()=>r.gME,concat2d:()=>r.Izb,concat3d:()=>r.MNy,concat4d:()=>r.ZaL,conv1d:()=>r.PAt,conv2d:()=>r.Tek,conv2dTranspose:()=>r.bc,conv3d:()=>r.pdZ,conv3dTranspose:()=>r.$QV,copyRegisteredKernels:()=>r.T3b,cos:()=>r.mCk,cosh:()=>r.f9Y,cosineWindow:()=>r.mew,cumprod:()=>r.$Gn,cumsum:()=>r.zbp,customGrad:()=>r.cbc,denseBincount:()=>r.ppE,deprecationWarn:()=>r.MXe,depthToSpace:()=>r.nTT,depthwiseConv2d:()=>r.B10,device_util:()=>r.C2$,diag:()=>r.Ka3,dilation2d:()=>r.WmZ,disableDeprecationWarnings:()=>r.cFr,dispose:()=>r.B90,disposeVariables:()=>r.N8o,div:()=>r.hiC,divNoNan:()=>r.NTj,dot:()=>r.AKD,dropout:()=>r.rvX,einsum:()=>r.WYO,elu:()=>r.pyx,enableDebugMode:()=>r.Ra$,enableProdMode:()=>r.G48,enclosingPowerOfTwo:()=>r.GRh,engine:()=>r.SRH,env:()=>r.OBj,equal:()=>r.DgJ,erf:()=>r.qNN,euclideanNorm:()=>r.d2q,exp:()=>r.Qqt,expandDims:()=>r.dt4,expm1:()=>r.t$B,eye:()=>r.iyy,fft:()=>r.kp_,fill:()=>r.hlL,findBackend:()=>r.x3e,findBackendFactory:()=>r.zel,floor:()=>r.GWj,floorDiv:()=>r.qPi,fused:()=>r.imm,gather:()=>r.Iqj,gatherND:()=>r.dbB,gather_util:()=>r.DaI,getBackend:()=>r.N_N,getGradient:()=>r.ukX,getKernel:()=>r.pIF,getKernelsForBackend:()=>r.trD,grad:()=>r.UQy,grads:()=>r.tiA,greater:()=>r.pjt,greaterEqual:()=>r.brS,ifft:()=>r.Sxn,imag:()=>r.asL,image:()=>r.BHj,inTopKAsync:()=>r.V3u,io:()=>r.io,irfft:()=>r.wx0,isFinite:()=>r.xVT,isInf:()=>r.UWc,isNaN:()=>r.i2d,keep:()=>r.CnY,kernel_impls:()=>r.GDt,leakyRelu:()=>r.hi7,less:()=>r.d9m,lessEqual:()=>r.zN1,linalg:()=>r.$r2,linspace:()=>r.SX3,localResponseNormalization:()=>r.G9k,log:()=>r.cM7,log1p:()=>r.Krr,logSigmoid:()=>r.e_t,logSoftmax:()=>r.CmS,logSumExp:()=>r.l_t,logicalAnd:()=>r.HvI,logicalNot:()=>r.hJK,logicalOr:()=>r.K5V,logicalXor:()=>r.egP,losses:()=>r.MB5,lowerBound:()=>r.eab,matMul:()=>r.OI3,math:()=>r.mAU,max:()=>r.Fp7,maxPool:()=>r._sB,maxPool3d:()=>r.YQQ,maxPoolWithArgmax:()=>r.Ip$,maximum:()=>r.gWQ,mean:()=>r.J69,memory:()=>r.sq6,meshgrid:()=>r.ry_,min:()=>r.VV$,minimum:()=>r.LTh,mirrorPad:()=>r.VdP,mod:()=>r.wQq,moments:()=>r.Gi7,movingAverage:()=>r.p_,mul:()=>r.dC7,multiRNNCell:()=>r.rq4,multinomial:()=>r.SJ_,neg:()=>r.W76,nextFrame:()=>r.glt,norm:()=>r.KOy,notEqual:()=>r.Quu,oneHot:()=>r.lfX,ones:()=>r.iUs,onesLike:()=>r.JpU,op:()=>r.op,outerProduct:()=>r.N2O,pad:()=>r.vku,pad1d:()=>r.pNR,pad2d:()=>r.koy,pad3d:()=>r.t1L,pad4d:()=>r.lGY,pool:()=>r.d_R,pow:()=>r.sQ3,prelu:()=>r.AL3,print:()=>r.S0v,prod:()=>r.WVs,profile:()=>r.N5s,rand:()=>r.TN_,randomGamma:()=>r.wzB,randomNormal:()=>r.nGf,randomUniform:()=>r.LGj,range:()=>r.w6H,ready:()=>r.Cd_,real:()=>r.kwC,reciprocal:()=>r.M25,registerBackend:()=>r.jqO,registerGradient:()=>r.LiG,registerKernel:()=>r.wCN,relu:()=>r.UYe,relu6:()=>r.btT,removeBackend:()=>r.cjG,reshape:()=>r.XLQ,reverse:()=>r.GYS,reverse1d:()=>r.SDf,reverse2d:()=>r.diP,reverse3d:()=>r.sx7,reverse4d:()=>r.mG2,rfft:()=>r.QEs,round:()=>r.NMM,rsqrt:()=>r.bp0,scalar:()=>r.iD$,scatterND:()=>r.snQ,scatter_util:()=>r.yV1,searchSorted:()=>r.zcT,selu:()=>r.U8D,separableConv2d:()=>r.U_I,serialization:()=>r.m7h,setBackend:()=>r.CQI,setPlatform:()=>r.VYu,setdiff1dAsync:()=>r.ODp,sigmoid:()=>r.XD2,sign:()=>r.Xxe,signal:()=>r.tdS,sin:()=>r.O$l,sinh:()=>r.R_K,slice:()=>r.tPi,slice1d:()=>r.jZU,slice2d:()=>r.SmN,slice3d:()=>r.CnO,slice4d:()=>r.p0P,slice_util:()=>r.kuN,softmax:()=>r.XAC,softplus:()=>r.Wvh,spaceToBatchND:()=>r.fBT,sparse:()=>r.rVs,sparseToDense:()=>r.ers,spectral:()=>r.uN7,split:()=>r.Vl2,sqrt:()=>r._b3,square:()=>r.h62,squaredDifference:()=>r.$i,squeeze:()=>r.L9e,stack:()=>r.knu,step:()=>r.Nbs,stridedSlice:()=>r.NXj,string:()=>r.Z_8,sub:()=>r.luU,sum:()=>r.Smz,sumOutType:()=>r.z4k,tan:()=>r.ORZ,tanh:()=>r.AEp,tensor:()=>r.XeE,tensor1d:()=>r.RRF,tensor2d:()=>r.odF,tensor3d:()=>r.wOQ,tensor4d:()=>r.yXz,tensor5d:()=>r.Bfx,tensor6d:()=>r.xZs,tensor_util:()=>r.piX,test_util:()=>r.p3L,tidy:()=>r.lub,tile:()=>r.Gg6,time:()=>r.XVJ,topk:()=>r.hg7,train:()=>r.p_j,transpose:()=>r.p4s,truncatedNormal:()=>r.Xu6,unique:()=>r.Two,unregisterGradient:()=>r.bt3,unregisterKernel:()=>r.nEe,unsortedSegmentSum:()=>r.pUJ,unstack:()=>r.HHK,upcastType:()=>r.x8V,upperBound:()=>r.GaM,util:()=>r.D5U,valueAndGrad:()=>r.h76,valueAndGrads:()=>r.fNQ,variable:()=>r.VD$,variableGrads:()=>r.pnJ,version_core:()=>r.jTM,where:()=>r.arb,whereAsync:()=>r.itS,zeros:()=>r.lls,zerosLike:()=>r.P84});n(85186);var r=n(86931)},15770:(e,t,n)=>{"use strict";var r,o=n(85893),a=n(67294),i=n(20745),s=n(70743),l=n(96042),c=n(27384),u=n(12405),d=(n(93268),n(41796)),f=n(68718),p=n(26071),m=n(65538),h=null!==(r=window.STATIC_ASSETS_PATH)&&void 0!==r?r:"/assets";d.ZP.use(p.Z).use(f.Db).use(m.Z).init({debug:!1,fallbackLng:"en",interpolation:{escapeValue:!1},backend:{loadPath:h+"/locales/{{lng}}/{{ns}}.json"}});const v=d.ZP;var x,b=n(24268),y=n(45673),g=(0,b.HF)({selectId:function(e){return e.userId},sortComparer:function(e,t){return e.isSpeaking&&t.isSpeaking?e.audioLevel-t.audioLevel:e.isSpeaking!==t.isSpeaking?e.isSpeaking?-1:1:e.lastSpokeAt!==t.lastSpokeAt?t.lastSpokeAt-e.lastSpokeAt:0}}),w=g.getSelectors((function(e){return e.activeSpeakers})),j=(0,b.oM)({name:"activeSpeakers",initialState:g.getInitialState(),reducers:{addSpeaker:g.addOne,addManySpeakers:g.addMany,setAllSpeakers:g.setAll,removeSpeakers:g.removeAll}}),S=(x=j.actions).addSpeaker,k=(x.addManySpeakers,x.removeSpeakers),_=x.setAllSpeakers;const N=j.reducer;var C,T=(0,b.HF)({selectId:function(e){return e.userId},sortComparer:function(e,t){return e.name.localeCompare(t.name)}}),E=T.getSelectors((function(e){return e.participants})),P=(0,b.oM)({name:"participants",initialState:T.getInitialState(),reducers:{addParticipant:T.addOne,removeParticipant:T.removeOne,updateParticipant:T.updateOne}}),A=(C=P.actions).addParticipant,R=C.removeParticipant,O=C.updateParticipant;const I=P.reducer;var F,M={token:"",screenSharing:{isActive:!1,sharedBy:""},isActiveRtmpBroadcasting:!1,isActiveRecording:!1,isWebcamPaginating:!1,isStartup:!0,isChatServiceReady:!1,totalAudioSubscribers:0,totalVideoSubscribers:0,userDeviceType:"desktop",currentRoom:{sid:"",room_id:"",metadata:{room_title:"plugNmeet",is_recording:!1,is_active_rtmp:!1,is_breakout_room:!1,started_at:Date.now(),room_features:{allow_webcams:!0,mute_on_start:!1,allow_screen_share:!0,allow_recording:!0,allow_rtmp:!0,allow_view_other_webcams:!0,allow_view_other_users_list:!0,admin_only_webcams:!1,allow_polls:!0,room_duration:0,chat_features:{allow_chat:!0,allow_file_upload:!0},shared_note_pad_features:{allowed_shared_note_pad:!1,is_active:!1,visible:!1},whiteboard_features:{allowed_whiteboard:!0,visible:!1,whiteboard_file_id:"default",file_name:"default",file_path:"default",total_pages:10},external_media_player_features:{allowed_external_media_player:!0,is_active:!1},waiting_room_features:{is_active:!1,waiting_room_msg:""},breakout_room_features:{is_allow:!0,is_active:!1,allowed_number_rooms:6}}}}},D=(0,b.oM)({name:"session",initialState:M,reducers:{addToken:function(e,t){e.token=t.payload},toggleStartup:function(e,t){e.isStartup=t.payload},addCurrentUser:function(e,t){e.currentUser=t.payload},addCurrentRoom:function(e,t){e.currentRoom.room_id=t.payload.room_id,e.currentRoom.sid=t.payload.sid,t.payload.metadata&&(e.currentRoom.metadata=t.payload.metadata)},updateScreenSharing:function(e,t){e.screenSharing=t.payload},setWebcamPaginating:function(e,t){e.isWebcamPaginating=t.payload},updateCurrentUserMetadata:function(e,t){e.currentUser&&(e.currentUser.metadata=t.payload)},updateCurrentRoomMetadata:function(e,t){e.currentRoom&&(e.currentRoom.metadata=t.payload,e.isActiveRtmpBroadcasting=t.payload.is_active_rtmp,e.isActiveRecording=t.payload.is_recording)},updateIsChatServiceReady:function(e,t){e.isChatServiceReady=t.payload},updateTotalVideoSubscribers:function(e,t){e.totalVideoSubscribers=t.payload},updateTotalAudioSubscribers:function(e,t){e.totalAudioSubscribers=t.payload},updateMuteOnStart:function(e,t){e.currentRoom.metadata&&(e.currentRoom.metadata.room_features.mute_on_start=t.payload)},updateUserDeviceType:function(e,t){e.userDeviceType=t.payload}}}),U=(F=D.actions).addToken,L=F.toggleStartup,B=F.addCurrentUser,W=F.addCurrentRoom,V=F.updateScreenSharing,G=F.setWebcamPaginating,H=F.updateCurrentUserMetadata,z=F.updateCurrentRoomMetadata,Q=F.updateIsChatServiceReady,q=F.updateTotalVideoSubscribers,$=F.updateTotalAudioSubscribers,J=F.updateMuteOnStart,X=F.updateUserDeviceType;const Y=D.reducer;var K,Z,ee={type:"none"},te=null!==(K=window.STATIC_ASSETS_PATH)&&void 0!==K?K:"./assets",ne=["architecture-5082700_1280","porch-691330_1280","saxon-switzerland-539418_1280","shibuyasky-4768679_1280"].map((function(e){return"".concat(te,"/backgrounds/").concat(e,".jpg")})),re={isActiveMicrophone:!1,isActiveWebcam:!1,isActiveChatPanel:!0,isActiveParticipantsPanel:!0,isActiveRaisehand:!1,isActiveRecording:!1,isActiveScreenshare:!1,isActiveSharedNotePad:!1,isActiveWhiteboard:!1,isMicMuted:!1,screenWidth:1024,screenHeight:500,showMicrophoneModal:!1,showVideoShareModal:!1,showLockSettingsModal:!1,showRtmpModal:!1,showExternalMediaPlayerModal:!1,showManageWaitingRoomModal:!1,showManageBreakoutRoomModal:!1,totalUnreadChatMsgs:0,virtualBackground:ee},oe=(0,b.oM)({name:"bottomIconsActivity",initialState:re,reducers:{updateIsActiveMicrophone:function(e,t){e.isActiveMicrophone=t.payload},updateIsMicMuted:function(e,t){e.isMicMuted=t.payload},updateIsActiveWebcam:function(e,t){e.isActiveWebcam=t.payload},updateIsActiveChatPanel:function(e,t){e.screenWidth<1024&&e.isActiveParticipantsPanel&&t.payload&&(e.isActiveParticipantsPanel=!1),e.isActiveChatPanel=t.payload,e.isActiveChatPanel&&(e.totalUnreadChatMsgs=0)},updateIsActiveParticipantsPanel:function(e,t){e.screenWidth<1024&&e.isActiveChatPanel&&t.payload&&(e.isActiveChatPanel=!1),e.isActiveParticipantsPanel=t.payload},updateIsActiveRaisehand:function(e,t){e.isActiveRaisehand=t.payload},updateIsActiveRecording:function(e,t){e.isActiveRecording=t.payload},updateIsActiveScreenshare:function(e,t){e.isActiveScreenshare=t.payload,e.isActiveScreenshare&&(e.isActiveSharedNotePad=!1,e.isActiveWhiteboard=!1,e.isActiveParticipantsPanel=!1)},updateIsActiveSharedNotePad:function(e,t){e.isActiveSharedNotePad=t.payload,e.isActiveSharedNotePad&&(e.isActiveParticipantsPanel=!1)},updateIsActiveWhiteboard:function(e,t){e.isActiveWhiteboard=t.payload,e.isActiveWhiteboard&&(e.isActiveParticipantsPanel=!1)},updateScreenWidth:function(e,t){e.screenWidth=t.payload},updateScreenHeight:function(e,t){e.screenHeight=t.payload},updateShowMicrophoneModal:function(e,t){e.showMicrophoneModal=t.payload},updateShowVideoShareModal:function(e,t){e.showVideoShareModal=t.payload},updateShowLockSettingsModal:function(e,t){e.showLockSettingsModal=t.payload},updateShowRtmpModal:function(e,t){e.showRtmpModal=t.payload},updateShowExternalMediaPlayerModal:function(e,t){e.showExternalMediaPlayerModal=t.payload},updateShowManageWaitingRoomModal:function(e,t){e.showManageWaitingRoomModal=t.payload},updateShowManageBreakoutRoomModal:function(e,t){e.showManageBreakoutRoomModal=t.payload},updateTotalUnreadChatMsgs:function(e){e.isActiveChatPanel||(e.totalUnreadChatMsgs+=1)},updateVirtualBackground:function(e,t){e.virtualBackground=t.payload}}}),ae=(Z=oe.actions).updateIsActiveMicrophone,ie=Z.updateIsMicMuted,se=Z.updateIsActiveWebcam,le=Z.updateIsActiveChatPanel,ce=Z.updateIsActiveParticipantsPanel,ue=Z.updateIsActiveRaisehand,de=(Z.updateIsActiveRecording,Z.updateIsActiveScreenshare),fe=Z.updateIsActiveSharedNotePad,pe=Z.updateIsActiveWhiteboard,me=Z.updateShowMicrophoneModal,he=Z.updateShowVideoShareModal,ve=Z.updateShowLockSettingsModal,xe=Z.updateShowManageWaitingRoomModal,be=Z.updateShowRtmpModal,ye=Z.updateShowExternalMediaPlayerModal,ge=Z.updateShowManageBreakoutRoomModal,we=Z.updateScreenWidth,je=Z.updateScreenHeight,Se=Z.updateTotalUnreadChatMsgs,ke=Z.updateVirtualBackground;const _e=oe.reducer;var Ne,Ce=(0,b.HF)({selectId:function(e){return e.message_id},sortComparer:function(e,t){var n=new Date(e.time),r=new Date(t.time);return n.getTime()>r.getTime()?1:n.getTime()<r.getTime()?-1:0}}),Te=Ce.getSelectors((function(e){return e.chatMessages})),Ee=(0,b.oM)({name:"chat-messages",initialState:Ce.getInitialState(),reducers:{addChatMessage:Ce.addOne,removeChatMessage:Ce.removeOne,updateChatMessage:Ce.updateOne}}),Pe=(Ne=Ee.actions).addChatMessage;Ne.removeChatMessage,Ne.updateChatMessage;const Ae=Ee.reducer;var Re,Oe=n(95591),Ie=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Fe=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Me={isShowRoomSettingsModal:!1,isShowKeyboardShortcuts:!1,audioDevices:[],videoDevices:[],selectedAudioDevice:"",selectedVideoDevice:"",playAudioNotification:!1,activateWebcamsView:!0,activeScreenSharingView:!0,allowPlayAudioNotification:!0,roomAudioVolume:1,roomVideoQuality:Oe.SF.HIGH,selectedTabLeftPanel:0,selectedChatOption:"public",initiatePrivateChat:{name:"",userId:""},unreadMsgFrom:[]},De=(0,b.oM)({name:"room-settings",initialState:Me,reducers:{updateShowRoomSettingsModal:function(e,t){e.isShowRoomSettingsModal=t.payload},updateShowKeyboardShortcutsModal:function(e,t){e.isShowKeyboardShortcuts=t.payload},addAudioDevices:function(e,t){e.audioDevices=t.payload},addVideoDevices:function(e,t){e.videoDevices=t.payload},updateSelectedAudioDevice:function(e,t){e.selectedAudioDevice=t.payload},updateSelectedVideoDevice:function(e,t){e.selectedVideoDevice=t.payload},updatePlayAudioNotification:function(e,t){e.playAudioNotification=t.payload},updateActivateWebcamsView:function(e,t){e.activateWebcamsView=t.payload},updateActiveScreenSharingView:function(e,t){e.activeScreenSharingView=t.payload},updateAllowPlayAudioNotification:function(e,t){e.allowPlayAudioNotification=t.payload},updateRoomAudioVolume:function(e,t){e.roomAudioVolume=t.payload},updateRoomVideoQuality:function(e,t){e.roomVideoQuality=t.payload},updateSelectedTabLeftPanel:function(e,t){e.selectedTabLeftPanel=t.payload},updateSelectedChatOption:function(e,t){e.selectedChatOption=t.payload},updateInitiatePrivateChat:function(e,t){e.initiatePrivateChat=t.payload},updateUnreadMsgFrom:function(e,t){var n=Fe([],Ie(e.unreadMsgFrom),!1);"ADD"===t.payload.task?n.filter((function(e){return e===t.payload.id})).length||(n.push(t.payload.id),e.unreadMsgFrom=n):"DEL"===t.payload.task&&(e.unreadMsgFrom=n.filter((function(e){return e!==t.payload.id})))}}}),Ue=(Re=De.actions).addAudioDevices,Le=Re.addVideoDevices,Be=Re.updateSelectedAudioDevice,We=Re.updateSelectedVideoDevice,Ve=Re.updatePlayAudioNotification,Ge=Re.updateShowRoomSettingsModal,He=Re.updateActivateWebcamsView,ze=Re.updateActiveScreenSharingView,Qe=Re.updateAllowPlayAudioNotification,qe=Re.updateShowKeyboardShortcutsModal,$e=Re.updateRoomAudioVolume,Je=Re.updateRoomVideoQuality,Xe=Re.updateSelectedTabLeftPanel,Ye=Re.updateSelectedChatOption,Ke=Re.updateInitiatePrivateChat,Ze=Re.updateUnreadMsgFrom;const et=De.reducer;var tt,nt=(0,b.oM)({name:"whiteboard",initialState:{whiteboardFileId:"default",fileName:"default",filePath:"default",totalPages:10,currentPage:1,excalidrawElements:"",mousePointerLocation:"",whiteboardFiles:"",requestedWhiteboardData:{requested:!1,sendTo:""}},reducers:{updateExcalidrawElements:function(e,t){e.excalidrawElements=t.payload},updateMousePointerLocation:function(e,t){e.mousePointerLocation=t.payload},addWhiteboardFile:function(e,t){var n=[];e.whiteboardFiles&&(n=JSON.parse(e.whiteboardFiles)),n.push(t.payload),e.whiteboardFiles=JSON.stringify(n)},addWhiteboardFileAsJSON:function(e,t){e.whiteboardFiles=t.payload},updateRequestedWhiteboardData:function(e,t){e.requestedWhiteboardData=t.payload},setWhiteboardCurrentPage:function(e,t){e.currentPage=t.payload},addWhiteboardOfficeFile:function(e,t){e.whiteboardFileId=t.payload.fileId,e.fileName=t.payload.fileName,e.filePath=t.payload.filePath,e.totalPages=t.payload.totalPages,e.whiteboardFiles=t.payload.pageFiles,t.payload.currenPage?e.currentPage=t.payload.currenPage:e.currentPage=1}}}),rt=(tt=nt.actions).updateExcalidrawElements,ot=tt.updateMousePointerLocation,at=tt.addWhiteboardFile,it=tt.addWhiteboardFileAsJSON,st=tt.updateRequestedWhiteboardData,lt=tt.setWhiteboardCurrentPage,ct=tt.addWhiteboardOfficeFile;const ut=nt.reducer;var dt,ft=(0,b.oM)({name:"externalMediaPlayer",initialState:{action:"",seekTo:-1},reducers:{addExternalMediaPlayerAction:function(e,t){e.action=t.payload},externalMediaPlayerSeekTo:function(e,t){e.seekTo=t.payload},resetExternalMediaPlayer:function(e){e.action="",e.seekTo=-1}}}),pt=(dt=ft.actions).addExternalMediaPlayerAction,mt=dt.externalMediaPlayerSeekTo,ht=dt.resetExternalMediaPlayer;const vt=ft.reducer;var xt,bt=n(30848),yt=(0,bt.LC)({reducerPath:"pollsApi",baseQuery:(0,y.ni)({baseUrl:window.PLUG_N_MEET_SERVER_URL+"/api/polls",prepareHeaders:function(e,t){var n=t.getState().session.token;return e.append("Authorization",n),e.append("Content-Type","application/json"),e}}),tagTypes:["List","PollsStats","Count","Selected","PollDetails","PollResult"],endpoints:function(e){return{getPollLists:e.query({query:function(){return"listPolls"},providesTags:["List"]}),getCountTotalResponses:e.query({query:function(e){return"countTotalResponses/".concat(e)},providesTags:function(e){return e.status?["Count",{type:"Count",id:e.poll_id}]:["Count"]}}),getUserSelectedOption:e.query({query:function(e){var t=e.pollId,n=e.userId;return"userSelectedOption/".concat(t,"/").concat(n)},providesTags:function(e){return(null===e||void 0===e?void 0:e.status)?["Selected",{type:"Selected",id:e.poll_id}]:["Selected"]}}),getPollResponsesDetails:e.query({query:function(e){return"pollResponsesDetails/".concat(e)},providesTags:function(e){return(null===e||void 0===e?void 0:e.status)?["PollDetails",{type:"PollDetails",id:e.poll_id}]:["PollDetails"]}}),getPollResponsesResult:e.query({query:function(e){return"pollResponsesResult/".concat(e)},providesTags:function(e){return(null===e||void 0===e?void 0:e.status)?["PollResult",{type:"PollResult",id:e.poll_id}]:["PollResult"]}}),getPollsStats:e.query({query:function(){return"pollsStats"},providesTags:["PollsStats"]}),createPoll:e.mutation({query:function(e){return{url:"create",method:"POST",body:e}},invalidatesTags:["List","PollsStats"]}),addResponse:e.mutation({query:function(e){return{url:"submitResponse",method:"POST",body:e}},invalidatesTags:function(e,t,n){var r=n.poll_id;return[{type:"Count",id:r},{type:"Selected",id:r},{type:"PollDetails",id:r}]}}),closePoll:e.mutation({query:function(e){return{url:"closePoll",method:"POST",body:e}},invalidatesTags:["List","PollsStats"]})}}}),gt=yt.useGetPollListsQuery,wt=yt.useGetCountTotalResponsesQuery,jt=yt.useGetUserSelectedOptionQuery,St=yt.useGetPollResponsesDetailsQuery,kt=yt.useCreatePollMutation,_t=yt.useAddResponseMutation,Nt=yt.useClosePollMutation,Ct=yt.useGetPollResponsesResultQuery,Tt=yt.useGetPollsStatsQuery,Et=(0,b.oM)({name:"breakoutRoom",initialState:{droppedUser:{id:"",roomId:0},receivedInvitationFor:""},reducers:{updateBreakoutRoomDroppedUser:function(e,t){e.droppedUser=t.payload},updateReceivedInvitationFor:function(e,t){e.receivedInvitationFor=t.payload}}}),Pt=(xt=Et.actions).updateBreakoutRoomDroppedUser,At=xt.updateReceivedInvitationFor;const Rt=Et.reducer;var Ot,It=(0,bt.LC)({reducerPath:"breakoutRoomApi",baseQuery:(0,y.ni)({baseUrl:window.PLUG_N_MEET_SERVER_URL+"/api/breakoutRoom",prepareHeaders:function(e,t){var n=t.getState().session.token;return e.append("Authorization",n),e.append("Content-Type","application/json"),e}}),refetchOnMountOrArgChange:!0,tagTypes:["List","My_Rooms"],endpoints:function(e){return{getBreakoutRooms:e.query({query:function(){return"listRooms"},providesTags:["List"]}),createBreakoutRooms:e.mutation({query:function(e){return{url:"create",method:"POST",body:e}},invalidatesTags:["List"]}),increaseDuration:e.mutation({query:function(e){return{url:"increaseDuration",method:"POST",body:e}},invalidatesTags:["List"]}),sendMsg:e.mutation({query:function(e){return{url:"sendMsg",method:"POST",body:e}}}),joinRoom:e.mutation({query:function(e){return{url:"join",method:"POST",body:e}}}),getMyBreakoutRooms:e.query({query:function(){return"myRooms"},providesTags:["My_Rooms"]}),endSingleRoom:e.mutation({query:function(e){return{url:"endRoom",method:"POST",body:{breakout_room_id:e}}},invalidatesTags:["List"]}),endAllRooms:e.mutation({query:function(){return{url:"endAllRooms",method:"POST"}},invalidatesTags:["List"]})}}}),Ft=It.useGetBreakoutRoomsQuery,Mt=It.useCreateBreakoutRoomsMutation,Dt=It.useIncreaseDurationMutation,Ut=It.useJoinRoomMutation,Lt=It.useEndSingleRoomMutation,Bt=It.useEndAllRoomsMutation,Wt=It.useSendMsgMutation,Vt=It.useGetMyBreakoutRoomsQuery,Gt=(0,b.xC)({reducer:(Ot={participants:I,activeSpeakers:N,session:Y,bottomIconsActivity:_e,chatMessages:Ae,roomSettings:et,whiteboard:ut,externalMediaPlayer:vt,breakoutRoom:Rt},Ot[yt.reducerPath]=yt.reducer,Ot[It.reducerPath]=It.reducer,Ot),middleware:function(e){return e().concat(yt.middleware,It.middleware)},devTools:!1});(0,y.sj)(Gt.dispatch);var Ht=function(){return(0,s.I0)()},zt=s.v9,Qt=n(22327),qt=n(22222),$t=function(){return $t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$t.apply(this,arguments)};const Jt=function(e){var t,n=e.title,r=e.text,a=null!==(t=window.STATIC_ASSETS_PATH)&&void 0!==t?t:"./assets";return(0,o.jsxs)("div",$t({id:"errorPage",className:"error-page h-screen w-full flex items-center justify-center"},{children:[(0,o.jsx)("div",{className:"error-app-bg absolute w-full h-full left-0 top-0 object-cover pointer-events-none ",style:{backgroundImage:'url("'.concat(a,'/imgs/app-banner.jpg")')}}),(0,o.jsx)("div",$t({className:"content relative z-20 text-center bg-white rounded-xl shadow-lg h-80 w-[450px] flex items-center justify-center"},{children:(0,o.jsxs)("div",$t({className:"inner text-center"},{children:[(0,o.jsx)("h2",$t({className:"text-3xl font-medium mb-4"},{children:n})),(0,o.jsx)("p",{children:r})]}))}))]}))};var Xt=function(){return Xt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Xt.apply(this,arguments)};const Yt=function(e){var t=e.text;return(0,o.jsx)("div",Xt({className:"loader opacity-1 fixed top-0 left-0 w-full h-full bg-white/90 z-[999] flex flex-wrap items-center justify-center"},{children:(0,o.jsxs)("div",Xt({className:"inner"},{children:[(0,o.jsxs)("div",Xt({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]})),(0,o.jsx)("p",Xt({className:"block w-full text-center relative bottom-4 capitalize"},{children:t}))]}))}))};var Kt=n(47031),Zt=n(35771),en=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},tn=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};function nn(e){return en(this,void 0,void 0,(function(){var t,n,r,o,a,i;return tn(this,(function(s){switch(s.label){case 0:return t={audio:!0},"videoinput"===e&&(t={video:!0}),[4,navigator.mediaDevices.getUserMedia(t)];case 1:return n=s.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:if((r=(r=s.sent()).filter((function(t){return t.kind===e}))).length>1&&"default"===r[0].deviceId){for(o=r[0],a=1;a<r.length;a+=1)if(r[a].groupId===o.groupId){i=r[0],r[0]=r[a],r[a]=i;break}return[2,r.filter((function(e){return e!==o}))]}return n.getTracks().forEach((function(e){e.stop()})),[2,r]}}))}))}var rn=function(e){return e.toString(16).padStart(2,"0")},on=function(e){void 0===e&&(e=20);var t=new Uint8Array(e/2);return window.crypto.getRandomValues(t),Array.from(t,rn).join("")},an=function(e){void 0===e&&(e=10);var t=new Uint8Array(e/2);return window.crypto.getRandomValues(t),Number(t.join(""))},sn=function(){var e,t=null!==(e=window.DEFAULT_SCREEN_SHARE_RESOLUTION)&&void 0!==e?e:"h1080fps15",n=Oe.Ri.h1080fps15.resolution;switch(t){case"h360fps3":n=Oe.Ri.h360fps3.resolution;break;case"h720fps5":n=Oe.Ri.h720fps5.resolution;break;case"h720fps15":n=Oe.Ri.h720fps15.resolution;break;case"h1080fps15":n=Oe.Ri.h1080fps15.resolution;break;case"h1080fps30":n=Oe.Ri.h1080fps30.resolution}return n},ln=function(){return ln=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ln.apply(this,arguments)};const cn=function(e){var t=e.deviceId,n=e.onSourcePlayback,r=e.onMediaStream,i=(0,a.useRef)(null);(0,a.useEffect)((function(){var e=i.current,n={video:{deviceId:t}};return navigator.mediaDevices.getUserMedia(n).then((function(t){e&&(r(t),e.srcObject=t)})),function(){e&&(e.pause(),e.removeAttribute("src"))}}),[t]);return(0,o.jsx)("div",ln({className:"preview-camera-webcam"},{children:(0,o.jsx)("video",{className:"my-5 w-full",ref:i,autoPlay:!0,height:"50",onLoadedData:function(e){var t,r,o=e.target;n({htmlElement:o,width:null!==(t=o.videoWidth)&&void 0!==t?t:330,height:null!==(r=o.videoHeight)&&void 0!==r?r:200})}})}))};var un={"640x360":[640,360],"256x256":[256,256],"256x144":[256,144],"160x96":[160,96]},dn={model:"meet",backend:"wasmSimd",inputResolution:"160x96",pipeline:"canvas2dCpu"};var fn=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},pn=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},mn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};function hn(e,t,n,r,o,a,i){var s=r.getContext("2d"),l=mn(un[n.inputResolution],2),c=l[0],u=l[1],d=c*u,f=new ImageData(c,u),p=document.createElement("canvas");p.width=c,p.height=u;var m=document.createElement("img");m.crossOrigin="anonymous",m.src=t.url;var h,v=p.getContext("2d"),x=a._getInputMemoryOffset()/4,b=a._getOutputMemoryOffset()/4;function y(){return fn(this,void 0,void 0,(function(){var e,t;return pn(this,(function(n){switch(n.label){case 0:return[4,o.segmentPerson(p)];case 1:for(e=n.sent(),t=0;t<d;t++)f.data[4*t+3]=e.data[t]?255:0;return v.putImageData(f,0,0),[2]}}))}))}return{render:function(){return fn(this,void 0,void 0,(function(){return pn(this,(function(r){switch(r.label){case 0:return"none"!==t.type&&function(){if(v.drawImage(e.htmlElement,0,0,e.width,e.height,0,0,c,u),"meet"===n.model||"mlkit"===n.model)for(var t=v.getImageData(0,0,c,u),r=0;r<d;r++)a.HEAPF32[x+3*r]=t.data[4*r]/255,a.HEAPF32[x+3*r+1]=t.data[4*r+1]/255,a.HEAPF32[x+3*r+2]=t.data[4*r+2]/255}(),i(),"none"===t.type?[3,3]:"bodyPix"!==n.model?[3,2]:[4,y()];case 1:return r.sent(),[3,3];case 2:!function(){a._runInference();for(var e=0;e<d;e++)if("meet"===n.model){var t=a.HEAPF32[b+2*e],r=a.HEAPF32[b+2*e+1],o=Math.max(t,r),i=Math.exp(t-o),s=Math.exp(r-o);f.data[4*e+3]=255*s/(i+s)}else if("mlkit"===n.model){r=a.HEAPF32[b+e];f.data[4*e+3]=255*r}v.putImageData(f,0,0)}(),r.label=3;case 3:return i(),function(){s.globalCompositeOperation="copy",s.filter="none",(null===h||void 0===h?void 0:h.smoothSegmentationMask)&&("blur"===t.type?s.filter="blur(8px)":"image"===t.type&&(s.filter="blur(4px)"));"none"!==t.type&&(s.drawImage(p,0,0,c,u,0,0,e.width,e.height),s.globalCompositeOperation="source-in",s.filter="none");s.drawImage(e.htmlElement,0,0),"blur"===t.type?(s.globalCompositeOperation="destination-over",s.filter="blur(8px)",s.drawImage(e.htmlElement,0,0)):"image"===t.type&&(s.globalCompositeOperation="destination-over",function(e,t,n,r,o,a,i,s){2===arguments.length&&(n=r=0,o=e.canvas.width,a=e.canvas.height);(i="number"===typeof i?i:.5)<0&&(i=0);(s="number"===typeof s?s:.5)<0&&(s=0);i>1&&(i=1);s>1&&(s=1);var l,c,u,d,f=t.width,p=t.height,m=Math.min(o/f,a/p),h=f*m,v=p*m,x=1;h<o&&(x=o/h);Math.abs(x-1)<1e-14&&v<a&&(x=a/v);(l=(f-(u=f/((h*=x)/o)))*i)<0&&(l=0);(c=(p-(d=p/((v*=x)/a)))*s)<0&&(c=0);u>f&&(u=f);d>p&&(d=p);e.drawImage(t,l,c,u,d,n,r,o,a)}(s,m,0,0,s.canvas.width,s.canvas.height,.5,.5))}(),[2]}}))}))},updatePostProcessingConfig:function(e){h=e},cleanUp:function(){}}}var vn=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},xn=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},bn=String.raw;function yn(e,t,n,r,o){var a=function(e,t,n){var r=e.createProgram();if(e.attachShader(r,t),e.attachShader(r,n),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS))throw new Error("Could not link WebGL program: ".concat(e.getProgramInfoLog(r)));return r}(e,t,n),i=e.getAttribLocation(a,"a_position");e.enableVertexAttribArray(i),e.bindBuffer(e.ARRAY_BUFFER,r),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0);var s=e.getAttribLocation(a,"a_texCoord");return e.enableVertexAttribArray(s),e.bindBuffer(e.ARRAY_BUFFER,o),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),a}function gn(e,t,n){var r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw new Error("Could not compile shader: ".concat(e.getShaderInfoLog(r)));return r}function wn(e,t,n,r,o,a){void 0===o&&(o=e.NEAREST),void 0===a&&(a=e.NEAREST);var i=e.createTexture();return e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,a),e.texStorage2D(e.TEXTURE_2D,1,t,n,r),i}function jn(e,t,n,r,o,a,i){return vn(this,void 0,void 0,(function(){var s,l;return xn(this,(function(c){switch(c.label){case 0:return s=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0),e.flush(),[4,Sn(e,s)];case 1:return l=c.sent(),e.deleteSync(s),l!==e.WAIT_FAILED&&(e.bindBuffer(t,n),e.getBufferSubData(t,r,o,a,i),e.bindBuffer(t,null)),[2]}}))}))}function Sn(e,t){return new Promise((function(n){requestAnimationFrame((function r(){var o=e.clientWaitSync(t,0,0);o!==e.WAIT_FAILED?o!==e.TIMEOUT_EXPIRED?n(o):requestAnimationFrame(r):n(o)}))}))}var kn,_n,Nn,Cn=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};function Tn(e,t,n,r,o,a){var i=function(e,t,n,r,o,a){var i=bn(kn||(kn=Cn(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform vec2 u_texelSize;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    const float offset[5] = float[](0.0, 1.0, 2.0, 3.0, 4.0);\n    const float weight[5] = float[](0.2270270270, 0.1945945946, 0.1216216216,\n      0.0540540541, 0.0162162162);\n\n    void main() {\n      vec4 centerColor = texture(u_inputFrame, v_texCoord);\n      float personMask = texture(u_personMask, v_texCoord).a;\n\n      vec4 frameColor = centerColor * weight[0] * (1.0 - personMask);\n\n      for (int i = 1; i < 5; i++) {\n        vec2 offset = vec2(offset[i]) * u_texelSize;\n\n        vec2 texCoord = v_texCoord + offset;\n        frameColor += texture(u_inputFrame, texCoord) * weight[i] *\n          (1.0 - texture(u_personMask, texCoord).a);\n\n        texCoord = v_texCoord - offset;\n        frameColor += texture(u_inputFrame, texCoord) * weight[i] *\n          (1.0 - texture(u_personMask, texCoord).a);\n      }\n      outColor = vec4(frameColor.rgb + (1.0 - frameColor.a) * centerColor.rgb, 1.0);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform vec2 u_texelSize;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    const float offset[5] = float[](0.0, 1.0, 2.0, 3.0, 4.0);\n    const float weight[5] = float[](0.2270270270, 0.1945945946, 0.1216216216,\n      0.0540540541, 0.0162162162);\n\n    void main() {\n      vec4 centerColor = texture(u_inputFrame, v_texCoord);\n      float personMask = texture(u_personMask, v_texCoord).a;\n\n      vec4 frameColor = centerColor * weight[0] * (1.0 - personMask);\n\n      for (int i = 1; i < 5; i++) {\n        vec2 offset = vec2(offset[i]) * u_texelSize;\n\n        vec2 texCoord = v_texCoord + offset;\n        frameColor += texture(u_inputFrame, texCoord) * weight[i] *\n          (1.0 - texture(u_personMask, texCoord).a);\n\n        texCoord = v_texCoord - offset;\n        frameColor += texture(u_inputFrame, texCoord) * weight[i] *\n          (1.0 - texture(u_personMask, texCoord).a);\n      }\n      outColor = vec4(frameColor.rgb + (1.0 - frameColor.a) * centerColor.rgb, 1.0);\n    }\n  "]))),s=.5,l=a.width*s,c=a.height*s,u=1/l,d=1/c,f=gn(e,e.FRAGMENT_SHADER,i),p=yn(e,t,f,n,r),m=e.getUniformLocation(p,"u_inputFrame"),h=e.getUniformLocation(p,"u_personMask"),v=e.getUniformLocation(p,"u_texelSize"),x=wn(e,e.RGBA8,l,c,e.NEAREST,e.LINEAR),b=wn(e,e.RGBA8,l,c,e.NEAREST,e.LINEAR),y=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,y),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,x,0);var g=e.createFramebuffer();function w(){e.viewport(0,0,l,c),e.useProgram(p),e.uniform1i(m,0),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,o);for(var t=0;t<3;t++)e.uniform2f(v,0,d),e.bindFramebuffer(e.FRAMEBUFFER,y),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,x),e.uniform1i(m,2),e.uniform2f(v,u,0),e.bindFramebuffer(e.FRAMEBUFFER,g),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.bindTexture(e.TEXTURE_2D,b)}function j(){e.deleteFramebuffer(g),e.deleteFramebuffer(y),e.deleteTexture(b),e.deleteTexture(x),e.deleteProgram(p),e.deleteShader(f)}return e.bindFramebuffer(e.FRAMEBUFFER,g),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,b,0),e.useProgram(p),e.uniform1i(h,1),{render:w,cleanUp:j}}(e,t,n,r,o,a),s=function(e,t,n,r){var o=bn(_n||(_n=Cn(["#version 300 es\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n\n    void main() {\n      // Flipping Y is required when rendering to canvas\n      gl_Position = vec4(a_position * vec2(1.0, -1.0), 0.0, 1.0);\n      v_texCoord = a_texCoord;\n    }\n  "],["#version 300 es\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n\n    void main() {\n      // Flipping Y is required when rendering to canvas\n      gl_Position = vec4(a_position * vec2(1.0, -1.0), 0.0, 1.0);\n      v_texCoord = a_texCoord;\n    }\n  "]))),a=bn(Nn||(Nn=Cn(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform sampler2D u_blurredInputFrame;\n    uniform vec2 u_coverage;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      vec3 color = texture(u_inputFrame, v_texCoord).rgb;\n      vec3 blurredColor = texture(u_blurredInputFrame, v_texCoord).rgb;\n      float personMask = texture(u_personMask, v_texCoord).a;\n      personMask = smoothstep(u_coverage.x, u_coverage.y, personMask);\n      outColor = vec4(mix(blurredColor, color, personMask), 1.0);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform sampler2D u_blurredInputFrame;\n    uniform vec2 u_coverage;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      vec3 color = texture(u_inputFrame, v_texCoord).rgb;\n      vec3 blurredColor = texture(u_blurredInputFrame, v_texCoord).rgb;\n      float personMask = texture(u_personMask, v_texCoord).a;\n      personMask = smoothstep(u_coverage.x, u_coverage.y, personMask);\n      outColor = vec4(mix(blurredColor, color, personMask), 1.0);\n    }\n  "]))),i=r.width,s=r.height,l=gn(e,e.VERTEX_SHADER,o),c=gn(e,e.FRAGMENT_SHADER,a),u=yn(e,l,c,t,n),d=e.getUniformLocation(u,"u_inputFrame"),f=e.getUniformLocation(u,"u_personMask"),p=e.getUniformLocation(u,"u_blurredInputFrame"),m=e.getUniformLocation(u,"u_coverage");function h(){e.viewport(0,0,i,s),e.useProgram(u),e.bindFramebuffer(e.FRAMEBUFFER,null),e.drawArrays(e.TRIANGLE_STRIP,0,4)}function v(t){e.useProgram(u),e.uniform2f(m,t[0],t[1])}function x(){e.deleteProgram(u),e.deleteShader(c),e.deleteShader(l)}return e.useProgram(u),e.uniform1i(d,0),e.uniform1i(f,1),e.uniform1i(p,2),e.uniform2f(m,0,1),{render:h,updateCoverage:v,cleanUp:x}}(e,n,r,a);return{render:function(){i.render(),s.render()},updateCoverage:function(e){s.updateCoverage(e)},cleanUp:function(){s.cleanUp(),i.cleanUp()}}}var En,Pn,An=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};var Rn,On=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},In=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};var Fn,Mn=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Dn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};var Un,Ln=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Bn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};function Wn(e,t,n,r,o,a){var i=bn(Un||(Un=Ln(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      outColor = texture(u_inputFrame, v_texCoord);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      outColor = texture(u_inputFrame, v_texCoord);\n    }\n  "]))),s=a._getInputMemoryOffset()/4,l=Bn(un[o.inputResolution],2),c=l[0],u=l[1],d=c*u,f=gn(e,e.FRAGMENT_SHADER,i),p=yn(e,t,f,n,r),m=e.getUniformLocation(p,"u_inputFrame"),h=wn(e,e.RGBA8,c,u),v=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,v),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,h,0);var x=new Uint8Array(4*d);return e.useProgram(p),e.uniform1i(m,0),{render:function(){e.viewport(0,0,c,u),e.useProgram(p),e.bindFramebuffer(e.FRAMEBUFFER,v),e.drawArrays(e.TRIANGLE_STRIP,0,4),function(e,t,n,r,o,a,i,s){vn(this,void 0,void 0,(function(){var l;return xn(this,(function(c){switch(c.label){case 0:return l=e.createBuffer(),e.bindBuffer(e.PIXEL_PACK_BUFFER,l),e.bufferData(e.PIXEL_PACK_BUFFER,s.byteLength,e.STREAM_READ),e.readPixels(t,n,r,o,a,i,0),e.bindBuffer(e.PIXEL_PACK_BUFFER,null),[4,jn(e,e.PIXEL_PACK_BUFFER,l,0,s)];case 1:return c.sent(),e.deleteBuffer(l),[2,s]}}))}))}(e,0,0,c,u,e.RGBA,e.UNSIGNED_BYTE,x);for(var t=0;t<d;t++){var n=s+3*t,r=4*t;a.HEAPF32[n]=x[r]/255,a.HEAPF32[n+1]=x[r+1]/255,a.HEAPF32[n+2]=x[r+2]/255}},cleanUp:function(){e.deleteFramebuffer(v),e.deleteTexture(h),e.deleteProgram(p),e.deleteShader(f)}}}var Vn,Gn=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Hn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};var zn,Qn=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},qn=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},$n=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Jn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};function Xn(e,t,n,r,o,a,i){var s=bn(zn||(zn=Qn(["#version 300 es\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n\n    void main() {\n      gl_Position = vec4(a_position, 0.0, 1.0);\n      v_texCoord = a_texCoord;\n    }\n  "],["#version 300 es\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n\n    void main() {\n      gl_Position = vec4(a_position, 0.0, 1.0);\n      v_texCoord = a_texCoord;\n    }\n  "]))),l=e.width,c=e.height,u=Jn(un[r.inputResolution],2),d=u[0],f=u[1],p=o.getContext("webgl2"),m=gn(p,p.VERTEX_SHADER,s),h=p.createVertexArray();p.bindVertexArray(h);var v=p.createBuffer();p.bindBuffer(p.ARRAY_BUFFER,v),p.bufferData(p.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),p.STATIC_DRAW);var x=p.createBuffer();p.bindBuffer(p.ARRAY_BUFFER,x),p.bufferData(p.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,1]),p.STATIC_DRAW);var b=p.createTexture();p.bindTexture(p.TEXTURE_2D,b),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST);var y=wn(p,p.RGBA8,d,f),g=wn(p,p.RGBA8,l,c),w=Wn(p,m,v,x,r,a),j="meet"===r.model?function(e,t,n,r,o,a,i){var s=bn(Vn||(Vn=Gn(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputSegmentation;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      vec2 segmentation = texture(u_inputSegmentation, v_texCoord).rg;\n      float shift = max(segmentation.r, segmentation.g);\n      float backgroundExp = exp(segmentation.r - shift);\n      float personExp = exp(segmentation.g - shift);\n      outColor = vec4(vec3(0.0), personExp / (backgroundExp + personExp));\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputSegmentation;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      vec2 segmentation = texture(u_inputSegmentation, v_texCoord).rg;\n      float shift = max(segmentation.r, segmentation.g);\n      float backgroundExp = exp(segmentation.r - shift);\n      float personExp = exp(segmentation.g - shift);\n      outColor = vec4(vec3(0.0), personExp / (backgroundExp + personExp));\n    }\n  "]))),l=a._getOutputMemoryOffset()/4,c=Hn(un[o.inputResolution],2),u=c[0],d=c[1],f=gn(e,e.FRAGMENT_SHADER,s),p=yn(e,t,f,n,r),m=e.getUniformLocation(p,"u_inputSegmentation"),h=wn(e,e.RG32F,u,d),v=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,v),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.useProgram(p),e.uniform1i(m,1),{render:function(){e.viewport(0,0,u,d),e.useProgram(p),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,h),e.texSubImage2D(e.TEXTURE_2D,0,0,0,u,d,e.RG,e.FLOAT,a.HEAPF32,l),e.bindFramebuffer(e.FRAMEBUFFER,v),e.drawArrays(e.TRIANGLE_STRIP,0,4)},cleanUp:function(){e.deleteFramebuffer(v),e.deleteTexture(h),e.deleteProgram(p),e.deleteShader(f)}}}(p,m,v,x,r,a,y):function(e,t,n,r,o,a,i){var s=bn(Fn||(Fn=Mn(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputSegmentation;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      float segmentation = texture(u_inputSegmentation, v_texCoord).r;\n      outColor = vec4(vec3(0.0), segmentation);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputSegmentation;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      float segmentation = texture(u_inputSegmentation, v_texCoord).r;\n      outColor = vec4(vec3(0.0), segmentation);\n    }\n  "]))),l=a._getOutputMemoryOffset()/4,c=Dn(un[o.inputResolution],2),u=c[0],d=c[1],f=gn(e,e.FRAGMENT_SHADER,s),p=yn(e,t,f,n,r),m=e.getUniformLocation(p,"u_inputSegmentation"),h=wn(e,e.R32F,u,d),v=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,v),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.useProgram(p),e.uniform1i(m,1),{render:function(){e.viewport(0,0,u,d),e.useProgram(p),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,h),e.texSubImage2D(e.TEXTURE_2D,0,0,0,u,d,e.RED,e.FLOAT,a.HEAPF32,l),e.bindFramebuffer(e.FRAMEBUFFER,v),e.drawArrays(e.TRIANGLE_STRIP,0,4)},cleanUp:function(){e.deleteFramebuffer(v),e.deleteTexture(h),e.deleteProgram(p),e.deleteShader(f)}}}(p,m,v,x,r,a,y),S=function(e,t,n,r,o,a,i,s){var l=bn(Rn||(Rn=On(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_segmentationMask;\n    uniform vec2 u_texelSize;\n    uniform float u_step;\n    uniform float u_radius;\n    uniform float u_offset;\n    uniform float u_sigmaTexel;\n    uniform float u_sigmaColor;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    float gaussian(float x, float sigma) {\n      float coeff = -0.5 / (sigma * sigma * 4.0 + 1.0e-6);\n      return exp((x * x) * coeff);\n    }\n\n    void main() {\n      vec2 centerCoord = v_texCoord;\n      vec3 centerColor = texture(u_inputFrame, centerCoord).rgb;\n      float newVal = 0.0;\n\n      float spaceWeight = 0.0;\n      float colorWeight = 0.0;\n      float totalWeight = 0.0;\n\n      // Subsample kernel space.\n      for (float i = -u_radius + u_offset; i <= u_radius; i += u_step) {\n        for (float j = -u_radius + u_offset; j <= u_radius; j += u_step) {\n          vec2 shift = vec2(j, i) * u_texelSize;\n          vec2 coord = vec2(centerCoord + shift);\n          vec3 frameColor = texture(u_inputFrame, coord).rgb;\n          float outVal = texture(u_segmentationMask, coord).a;\n\n          spaceWeight = gaussian(distance(centerCoord, coord), u_sigmaTexel);\n          colorWeight = gaussian(distance(centerColor, frameColor), u_sigmaColor);\n          totalWeight += spaceWeight * colorWeight;\n\n          newVal += spaceWeight * colorWeight * outVal;\n        }\n      }\n      newVal /= totalWeight;\n\n      outColor = vec4(vec3(0.0), newVal);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_segmentationMask;\n    uniform vec2 u_texelSize;\n    uniform float u_step;\n    uniform float u_radius;\n    uniform float u_offset;\n    uniform float u_sigmaTexel;\n    uniform float u_sigmaColor;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    float gaussian(float x, float sigma) {\n      float coeff = -0.5 / (sigma * sigma * 4.0 + 1.0e-6);\n      return exp((x * x) * coeff);\n    }\n\n    void main() {\n      vec2 centerCoord = v_texCoord;\n      vec3 centerColor = texture(u_inputFrame, centerCoord).rgb;\n      float newVal = 0.0;\n\n      float spaceWeight = 0.0;\n      float colorWeight = 0.0;\n      float totalWeight = 0.0;\n\n      // Subsample kernel space.\n      for (float i = -u_radius + u_offset; i <= u_radius; i += u_step) {\n        for (float j = -u_radius + u_offset; j <= u_radius; j += u_step) {\n          vec2 shift = vec2(j, i) * u_texelSize;\n          vec2 coord = vec2(centerCoord + shift);\n          vec3 frameColor = texture(u_inputFrame, coord).rgb;\n          float outVal = texture(u_segmentationMask, coord).a;\n\n          spaceWeight = gaussian(distance(centerCoord, coord), u_sigmaTexel);\n          colorWeight = gaussian(distance(centerColor, frameColor), u_sigmaColor);\n          totalWeight += spaceWeight * colorWeight;\n\n          newVal += spaceWeight * colorWeight * outVal;\n        }\n      }\n      newVal /= totalWeight;\n\n      outColor = vec4(vec3(0.0), newVal);\n    }\n  "]))),c=In(un[a.inputResolution],2),u=c[0],d=c[1],f=s.width,p=s.height,m=1/f,h=1/p,v=gn(e,e.FRAGMENT_SHADER,l),x=yn(e,t,v,n,r),b=e.getUniformLocation(x,"u_inputFrame"),y=e.getUniformLocation(x,"u_segmentationMask"),g=e.getUniformLocation(x,"u_texelSize"),w=e.getUniformLocation(x,"u_step"),j=e.getUniformLocation(x,"u_radius"),S=e.getUniformLocation(x,"u_offset"),k=e.getUniformLocation(x,"u_sigmaTexel"),_=e.getUniformLocation(x,"u_sigmaColor"),N=e.createFramebuffer();function C(t){t*=Math.max(f/u,p/d);var n=Math.max(1,.66*Math.sqrt(t)),r=t,o=n>1?.5*n:0,a=Math.max(m,h)*t;e.useProgram(x),e.uniform1f(w,n),e.uniform1f(j,r),e.uniform1f(S,o),e.uniform1f(k,a)}function T(t){e.useProgram(x),e.uniform1f(_,t)}return e.bindFramebuffer(e.FRAMEBUFFER,N),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.useProgram(x),e.uniform1i(b,0),e.uniform1i(y,1),e.uniform2f(g,m,h),C(0),T(0),{render:function(){e.viewport(0,0,f,p),e.useProgram(x),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,o),e.bindFramebuffer(e.FRAMEBUFFER,N),e.drawArrays(e.TRIANGLE_STRIP,0,4)},updateSigmaSpace:C,updateSigmaColor:T,cleanUp:function(){e.deleteFramebuffer(N),e.deleteProgram(x),e.deleteShader(v)}}}(p,m,v,x,y,r,g,o),k="blur"===n.type?Tn(p,m,v,x,g,o):function(e,t,n,r,o,a){var i=bn(En||(En=An(["#version 300 es\n\n    uniform vec2 u_backgroundScale;\n    uniform vec2 u_backgroundOffset;\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n    out vec2 v_backgroundCoord;\n\n    void main() {\n      // Flipping Y is required when rendering to canvas\n      gl_Position = vec4(a_position * vec2(1.0, -1.0), 0.0, 1.0);\n      v_texCoord = a_texCoord;\n      v_backgroundCoord = a_texCoord * u_backgroundScale + u_backgroundOffset;\n    }\n  "],["#version 300 es\n\n    uniform vec2 u_backgroundScale;\n    uniform vec2 u_backgroundOffset;\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n    out vec2 v_backgroundCoord;\n\n    void main() {\n      // Flipping Y is required when rendering to canvas\n      gl_Position = vec4(a_position * vec2(1.0, -1.0), 0.0, 1.0);\n      v_texCoord = a_texCoord;\n      v_backgroundCoord = a_texCoord * u_backgroundScale + u_backgroundOffset;\n    }\n  "]))),s=bn(Pn||(Pn=An(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform sampler2D u_background;\n    uniform vec2 u_coverage;\n    uniform float u_lightWrapping;\n    uniform float u_blendMode;\n\n    in vec2 v_texCoord;\n    in vec2 v_backgroundCoord;\n\n    out vec4 outColor;\n\n    vec3 screen(vec3 a, vec3 b) {\n      return 1.0 - (1.0 - a) * (1.0 - b);\n    }\n\n    vec3 linearDodge(vec3 a, vec3 b) {\n      return a + b;\n    }\n\n    void main() {\n      vec3 frameColor = texture(u_inputFrame, v_texCoord).rgb;\n      vec3 backgroundColor = texture(u_background, v_backgroundCoord).rgb;\n      float personMask = texture(u_personMask, v_texCoord).a;\n      float lightWrapMask = 1.0 - max(0.0, personMask - u_coverage.y) / (1.0 - u_coverage.y);\n      vec3 lightWrap = u_lightWrapping * lightWrapMask * backgroundColor;\n      frameColor = u_blendMode * linearDodge(frameColor, lightWrap) +\n        (1.0 - u_blendMode) * screen(frameColor, lightWrap);\n      personMask = smoothstep(u_coverage.x, u_coverage.y, personMask);\n      outColor = vec4(frameColor * personMask + backgroundColor * (1.0 - personMask), 1.0);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform sampler2D u_background;\n    uniform vec2 u_coverage;\n    uniform float u_lightWrapping;\n    uniform float u_blendMode;\n\n    in vec2 v_texCoord;\n    in vec2 v_backgroundCoord;\n\n    out vec4 outColor;\n\n    vec3 screen(vec3 a, vec3 b) {\n      return 1.0 - (1.0 - a) * (1.0 - b);\n    }\n\n    vec3 linearDodge(vec3 a, vec3 b) {\n      return a + b;\n    }\n\n    void main() {\n      vec3 frameColor = texture(u_inputFrame, v_texCoord).rgb;\n      vec3 backgroundColor = texture(u_background, v_backgroundCoord).rgb;\n      float personMask = texture(u_personMask, v_texCoord).a;\n      float lightWrapMask = 1.0 - max(0.0, personMask - u_coverage.y) / (1.0 - u_coverage.y);\n      vec3 lightWrap = u_lightWrapping * lightWrapMask * backgroundColor;\n      frameColor = u_blendMode * linearDodge(frameColor, lightWrap) +\n        (1.0 - u_blendMode) * screen(frameColor, lightWrap);\n      personMask = smoothstep(u_coverage.x, u_coverage.y, personMask);\n      outColor = vec4(frameColor * personMask + backgroundColor * (1.0 - personMask), 1.0);\n    }\n  "]))),l=a.width,c=a.height,u=l/c,d=gn(e,e.VERTEX_SHADER,i),f=gn(e,e.FRAGMENT_SHADER,s),p=yn(e,d,f,t,n),m=e.getUniformLocation(p,"u_backgroundScale"),h=e.getUniformLocation(p,"u_backgroundOffset"),v=e.getUniformLocation(p,"u_inputFrame"),x=e.getUniformLocation(p,"u_personMask"),b=e.getUniformLocation(p,"u_background"),y=e.getUniformLocation(p,"u_coverage"),g=e.getUniformLocation(p,"u_lightWrapping"),w=e.getUniformLocation(p,"u_blendMode");e.useProgram(p),e.uniform2f(m,1,1),e.uniform2f(h,0,0),e.uniform1i(v,0),e.uniform1i(x,1),e.uniform2f(y,0,1),e.uniform1f(g,0),e.uniform1f(w,0);var j=null;function S(t){j=wn(e,e.RGBA8,t.naturalWidth,t.naturalHeight,e.LINEAR,e.LINEAR),e.texSubImage2D(e.TEXTURE_2D,0,0,0,t.naturalWidth,t.naturalHeight,e.RGBA,e.UNSIGNED_BYTE,t);var n=0,r=0,o=t.naturalWidth,a=t.naturalHeight;o/a<u?(a=o/u,r=(t.naturalHeight-a)/2):(o=a*u,n=(t.naturalWidth-o)/2);var i=o/t.naturalWidth,s=a/t.naturalHeight;n/=t.naturalWidth,r/=t.naturalHeight,e.uniform2f(m,i,s),e.uniform2f(h,n,r)}return(null===o||void 0===o?void 0:o.complete)?S(o):o&&(o.onload=function(){S(o)}),{render:function(){e.viewport(0,0,l,c),e.useProgram(p),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,r),null!==j&&(e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,j),e.uniform1i(b,2)),e.bindFramebuffer(e.FRAMEBUFFER,null),e.drawArrays(e.TRIANGLE_STRIP,0,4)},updateCoverage:function(t){e.useProgram(p),e.uniform2f(y,t[0],t[1])},updateLightWrapping:function(t){e.useProgram(p),e.uniform1f(g,t)},updateBlendMode:function(t){e.useProgram(p),e.uniform1f(w,"screen"===t?0:1)},cleanUp:function(){e.deleteTexture(j),e.deleteProgram(p),e.deleteShader(f),e.deleteShader(d)}}}(p,v,x,g,t,o);return{render:function(){return qn(this,void 0,void 0,(function(){return $n(this,(function(t){return p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT),p.activeTexture(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,b),p.texImage2D(p.TEXTURE_2D,0,p.RGBA,p.RGBA,p.UNSIGNED_BYTE,e.htmlElement),p.bindVertexArray(h),w.render(),i(),a._runInference(),i(),j.render(),S.render(),k.render(),[2]}))}))},updatePostProcessingConfig:function(e){if(S.updateSigmaSpace(e.jointBilateralFilter.sigmaSpace),S.updateSigmaColor(e.jointBilateralFilter.sigmaColor),"image"===n.type)(t=k).updateCoverage(e.coverage),t.updateLightWrapping(e.lightWrapping),t.updateBlendMode(e.blendMode);else if("blur"===n.type){k.updateCoverage(e.coverage)}else{var t;(t=k).updateCoverage([0,.9999]),t.updateLightWrapping(0)}},cleanUp:function(){k.cleanUp(),S.cleanUp(),j.cleanUp(),w.cleanUp(),p.deleteTexture(g),p.deleteTexture(y),p.deleteTexture(b),p.deleteBuffer(x),p.deleteBuffer(v),p.deleteVertexArray(h),p.deleteShader(m)}}}var Yn=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Kn=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Zn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const er=function(e,t,n,r,o){var i=Zn((0,a.useState)(null),2),s=i[0],l=i[1],c=(0,a.useRef)(null),u=(0,a.useRef)(null),d=Zn((0,a.useState)(0),2),f=d[0],p=d[1],m=Zn((0,a.useState)([]),2),h=m[0],v=m[1];return(0,a.useEffect)((function(){var a,i=!0,s=0,d=0,f=0,m=0,h=[],x="webgl2"===n.pipeline?Xn(e,c.current,t,n,u.current,o,b):hn(e,t,n,u.current,r,o,b);function b(){var e=Date.now();h[f]=e-d,d=e,f++}return function e(){return Yn(this,void 0,void 0,(function(){return Kn(this,(function(t){switch(t.label){case 0:return i?(d=Date.now(),[4,x.render()]):[2];case 1:return t.sent(),function(){var e=Date.now();h[f]=e-d,m++,e>=s+1e3&&(p(1e3*m/(e-s)),v(h),s=e,m=0);f=0}(),a=requestAnimationFrame(e),[2]}}))}))}(),l(x),function(){i=!1,cancelAnimationFrame(a),x.cleanUp(),l(null)}}),[e,t,n,r,o]),{pipeline:s,backgroundImageRef:c,canvasRef:u,fps:f,durations:h}};var tr=function(){return tr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},tr.apply(this,arguments)};const nr=function(e){var t=e.sourcePlayback,n=e.backgroundConfig,r=e.segmentationConfig,i=e.postProcessingConfig,s=e.bodyPix,l=e.tflite,c=e.id,u=e.onCanvasRef,d=er(t,n,r,s,l),f=d.pipeline,p=d.canvasRef;return(0,a.useEffect)((function(){f&&f.updatePostProcessingConfig(i)}),[f,i]),(0,a.useEffect)((function(){var e=setTimeout((function(){u&&p&&u(p)}),500);return function(){clearTimeout(e)}}),[p]),(0,o.jsx)("div",tr({className:"root preview-camera-webcam"},{children:(0,o.jsx)("canvas",{ref:p,className:"render w-full my-5",width:t.width,height:t.height,id:c},r.pipeline)}))};var rr,or={smoothSegmentationMask:!0,jointBilateralFilter:{sigmaSpace:1,sigmaColor:.1},coverage:[.5,.75],lightWrapping:.3,blendMode:"screen"},ar=n(56124),ir=(n(85186),n(86931)),sr=(n(92423),function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))}),lr=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},cr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const ur=function(){var e=cr((0,a.useState)(),2),t=e[0],n=e[1];return(0,a.useEffect)((function(){var e;return rr?n(rr):e=setTimeout((function(){!function(){sr(this,void 0,void 0,(function(){return lr(this,(function(e){switch(e.label){case 0:return console.log("Loading TensorFlow.js and BodyPix segmentation model"),[4,ir.Cd_()];case 1:return e.sent(),[4,ar.zD()];case 2:return rr=e.sent(),n(rr),console.log("TensorFlow.js and BodyPix loaded"),[2]}}))}))}()}),500),function(){e&&clearTimeout(e)}}),[]),t};var dr=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},fr=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},pr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const mr=function(e){var t,n=pr((0,a.useState)(),2),r=n[0],o=n[1],i=pr((0,a.useState)(),2),s=i[0],l=i[1],c=pr((0,a.useState)(),2),u=c[0],d=c[1],f=pr((0,a.useState)(!1),2),p=f[0],m=f[1],h=null!==(t=window.STATIC_ASSETS_PATH)&&void 0!==t?t:"./assets";return(0,a.useEffect)((function(){!function(){dr(this,void 0,void 0,(function(){var e;return fr(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,createTFLiteSIMDModule()];case 1:return e=t.sent(),l(e),o(e),m(!0),[3,3];case 2:t.sent();try{createTFLiteModule().then(o)}catch(n){console.warn("Failed to create TFLite WebAssembly module.",n)}return[3,3];case 3:return[2]}}))}))}()}),[]),(0,a.useEffect)((function(){!function(){dr(this,void 0,void 0,(function(){var t,n,o,a;return fr(this,(function(i){switch(i.label){case 0:if(!r||p&&!s||!p&&"wasmSimd"===e.backend||"meet"!==e.model&&"mlkit"!==e.model)return[2];if(d(void 0),!(t="wasmSimd"===e.backend?s:r))throw new Error("TFLite backend unavailable: ".concat(e.backend));return n=function(e,t){switch(e){case"meet":return"256x144"===t?"segm_full_v679":"segm_lite_v681";case"mlkit":return"selfiesegmentation_mlkit-256x256-2021_01_19-v1215.f16";default:throw new Error("No TFLite file for this segmentation model: ".concat(e))}}(e.model,e.inputResolution),console.log("Loading tflite model:",n),[4,fetch("".concat(h,"/models/").concat(n,".tflite"))];case 1:return[4,i.sent().arrayBuffer()];case 2:return o=i.sent(),console.log("Model buffer size:",o.byteLength),a=t._getModelBufferMemoryOffset(),console.log("Model buffer memory offset:",a),console.log("Loading model buffer..."),t.HEAPU8.set(new Uint8Array(o),a),console.log("_loadModel result:",t._loadModel(o.byteLength)),console.log("Input memory offset:",t._getInputMemoryOffset()),console.log("Input height:",t._getInputHeight()),console.log("Input width:",t._getInputWidth()),console.log("Input channels:",t._getInputChannelCount()),console.log("Output memory offset:",t._getOutputMemoryOffset()),console.log("Output height:",t._getOutputHeight()),console.log("Output width:",t._getOutputWidth()),console.log("Output channels:",t._getOutputChannelCount()),d(t),[2]}}))}))}()}),[r,s,p,e.model,e.backend,e.inputResolution]),{tflite:u,isSIMDSupported:p}};var hr=function(){return hr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},hr.apply(this,arguments)},vr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const xr=function(e){var t=e.sourcePlayback,n=e.backgroundConfig,r=e.id,i=e.onCanvasRef,s=vr((0,a.useState)(dn),2),l=s[0],c=s[1],u=ur(),d=mr(l),f=d.tflite,p=d.isSIMDSupported;return(0,a.useEffect)((function(){u&&c((function(e){return"wasmSimd"!==e.backend||p?e:hr(hr({},e),{backend:"wasm"})}))}),[p]),(0,o.jsx)(o.Fragment,{children:t&&u&&f?(0,o.jsx)(nr,{sourcePlayback:t,backgroundConfig:null!==n&&void 0!==n?n:ee,segmentationConfig:l,postProcessingConfig:or,bodyPix:u,tflite:f,id:r,onCanvasRef:i}):null})};var br=n(65342),yr=n.n(br),gr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const wr=function(e){var t=e.allowedFileTypes,n=e.maxFileSize,r=e.files,o=a.useRef(null),i=gr((0,a.useState)(!1),2),s=i[0],c=i[1],u=gr((0,a.useState)(),2),d=u[0],f=u[1],p=(0,Qt.$)().t,m=Gt.getState().session;(0,a.useEffect)((function(){r&&r.length&&h(r)}),[r]);var h=function(e){var r,a="",i=new(yr())({target:window.PLUG_N_MEET_SERVER_URL+"/api/fileUpload",uploadMethod:"POST",query:{sid:m.currentRoom.sid,roomId:m.currentRoom.room_id,userId:null===(r=m.currentUser)||void 0===r?void 0:r.userId,resumable:!0},headers:{Authorization:m.token},fileType:t,fileTypeErrorCallback:function(e){(0,l.Am)(p("notifications.file-type-not-allow",{filetype:e.type}),{type:l.Am.TYPE.ERROR})},maxFileSize:n?1e6*n:void 0,maxFileSizeErrorCallback:function(){(0,l.Am)(p("notifications.max-file-size-exceeds"),{type:l.Am.TYPE.ERROR})}});i.on("fileAdded",(function(e){a=e.fileName,i.isUploading()||(c(!0),i.upload())})),i.on("fileSuccess",(function(e,t){var n=JSON.parse(t);c(!1),setTimeout((function(){var e;l.Am.dismiss(null!==(e=o.current)&&void 0!==e?e:"")}),300),n.status&&f({filePath:n.filePath,fileName:n.fileName,fileExtension:n.fileExtension})})),i.on("fileError",(function(e,t){c(!1),setTimeout((function(){var e;l.Am.dismiss(null!==(e=o.current)&&void 0!==e?e:"")}),300);try{var n=JSON.parse(t);(0,l.Am)(p(n.msg),{type:l.Am.TYPE.ERROR})}catch(r){(0,l.Am)(p("right-panel.file-upload-default-error"),{type:l.Am.TYPE.ERROR})}})),i.on("uploadStart",(function(){o.current=(0,l.Am)(p("right-panel.uploading-file",{fileName:a}),{closeButton:!1,progress:0})})),i.on("fileProgress",(function(e){var t,n=e.progress(!1);l.Am.update(null!==(t=o.current)&&void 0!==t?t:"",{progress:Number(n)})})),i.addFiles(e)};return{isUploading:s,result:d}};var jr=function(){return jr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},jr.apply(this,arguments)},Sr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},kr=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};const _r=function(e){var t=e.onSelect,n=["jpg","jpeg","png"],r=(0,Qt.$)().t,i=Sr((0,a.useState)(ee),2),s=i[0],l=i[1],c=Sr((0,a.useState)(ne),2),u=c[0],d=c[1],f=Sr((0,a.useState)(),2),p=f[0],m=f[1],h=(0,a.useRef)(null),v=wr({allowedFileTypes:n,maxFileSize:30,files:p}),x=v.isUploading,b=v.result;(0,a.useEffect)((function(){if(b&&b.filePath){var e=window.PLUG_N_MEET_SERVER_URL+"/download/uploadedFile/"+b.filePath,t=kr([],Sr(u),!1);t.push(e),d(kr([],Sr(t),!1));var n=h.current;n&&(n.value="")}}),[b,h]);var y=function(e,n){var r={type:e,url:n};l(r),t(r)};return(0,o.jsxs)("div",jr({className:"flex flex-wrap items-center justify-start p-3 bg-slate-100 shadow-header"},{children:[(0,o.jsx)("div",jr({className:"cursor-pointer rounded-md w-[62px] h-[62px] overflow-hidden flex items-center justify-center border-2 border-solid border-gray-300 transition transform scale-90 hover:scale-95 ease-in  ".concat("none"===s.type?"border-secondaryColor scale-95":""),onClick:function(){return y("none","")}},{children:(0,o.jsx)("i",{className:"pnm-ban-solid"})})),(0,o.jsx)("div",jr({className:"cursor-pointer rounded-md w-[62px] h-[62px] overflow-hidden flex items-center justify-center border-2 border-solid border-gray-300 transition transform scale-90 hover:scale-95 ease-in ".concat("blur"===s.type?"border-secondaryColor scale-95":""),onClick:function(){return y("blur","")}},{children:(0,o.jsx)("i",{className:"pnm-blur"})})),u.map((function(e){return(0,o.jsx)("div",jr({className:"cursor-pointer rounded-md w-[62px] h-[62px] overflow-hidden flex items-center justify-center transition transform scale-90 hover:scale-95 ease-in border-2 border-solid border-transparent ".concat(s.url===e?"border-secondaryColor scale-95":""),onClick:function(){return y("image",e)}},{children:(0,o.jsx)("img",{src:e,alt:e,className:"object-cover w-full h-full"})}),e)})),(0,o.jsxs)("div",jr({className:"upload-btn-wrap relative overflow-hidden inline-block cursor-pointer pt-2 w-full"},{children:[(0,o.jsx)("button",jr({className:"btn border border-dotted border-secondaryColor bg-transparent py-2 px-4 rounded text-xs text-secondaryColor cursor-pointer"},{children:r("footer.modal.upload-background-image")})),(0,o.jsx)("input",{className:"absolute left-0 top-0 opacity-0 w-full h-full cursor-pointer",ref:h,type:"file",onChange:function(e){if(!x){var t=e.target.files;t&&m(kr([],Sr(t),!1))}},accept:n.map((function(e){return"."+e})).join(",")})]}))]}))};var Nr=function(){return Nr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Nr.apply(this,arguments)},Cr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Tr=function(e){var t,n=e.deviceId,r=Cr((0,a.useState)(),2),i=r[0],s=r[1],l=Cr((0,a.useState)(!1),2),c=l[0],u=l[1],d=Cr((0,a.useState)(),2),f=d[0],p=d[1],m=Cr((0,a.useState)(),2),h=m[0],v=m[1],x=Cr((0,a.useState)(),2),b=x[0],y=x[1],g=null===(t=Gt.getState().session.currentUser)||void 0===t?void 0:t.userId,w=Ht(),j=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);(0,a.useEffect)((function(){f!==n&&(u(!1),p(n))}),[n]),(0,a.useEffect)((function(){u(!1);i&&setTimeout((function(){u(!0)}),500)}),[i]),(0,a.useEffect)((function(){return function(){b&&b.getTracks().forEach((function(e){e.stop()}))}}),[b]);return(0,o.jsxs)("div",Nr({className:"mt-5"},{children:[n?(0,o.jsx)("div",Nr({style:h?{display:"none"}:{display:""}},{children:(0,o.jsx)(cn,{deviceId:n,onSourcePlayback:s,onMediaStream:y})})):null,c&&i&&g&&h?(0,o.jsx)(xr,{sourcePlayback:i,backgroundConfig:h,id:g}):null,j?null:(0,o.jsx)(_r,{onSelect:function(e){w(ke(e)),"none"===e.type?(u(!1),v(void 0)):(!c&&n&&u(!0),v(e))}})]}))};var Er=function(){return Er=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Er.apply(this,arguments)},Pr=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Ar=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Rr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Or=(0,qt.P1)((function(e){return e.bottomIconsActivity.showVideoShareModal}),(function(e){return e}));const Ir=function(e){var t=e.onSelectedDevice,n=zt(Or),r=Rr((0,a.useState)(!0),2),i=r[0],s=r[1],l=Rr((0,a.useState)(""),2),c=l[0],u=l[1],d=Rr((0,a.useState)([]),2),f=d[0],p=d[1],m=Ht(),h=(0,Qt.$)().t;(0,a.useEffect)((function(){Pr(void 0,void 0,void 0,(function(){var e,t,n;return Ar(this,(function(r){switch(r.label){case 0:return[4,nn("videoinput")];case 1:return e=r.sent(),t=[],n=e.map((function(e){var n={id:e.deviceId,label:e.label};return t.push(n),(0,o.jsx)("option",Er({value:e.deviceId},{children:e.label}),e.deviceId)})),p(n),u(e[0].deviceId),t.length&&m(Le(t)),[2]}}))}))}),[m]),(0,a.useEffect)((function(){n&&s(!0)}),[n]);var v=function(){s(!1),m(he(!1)),m(se(!1))};return(0,o.jsx)(o.Fragment,{children:n?(0,o.jsx)(Kt.u,Er({show:i,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(Zt.V,Er({open:i,onClose:function(){return v()},className:"share-webcam-popup-wrap fixed z-[99999] inset-0 overflow-y-auto"},{children:(0,o.jsxs)("div",Er({className:"flex items-center justify-center min-h-screen"},{children:[(0,o.jsx)(Zt.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),(0,o.jsxs)("div",Er({className:"popup-inner bg-white w-full max-w-md rounded-3xl shadow-header relative px-6 py-14"},{children:[(0,o.jsxs)("button",Er({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return v()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(Zt.V.Title,Er({className:"mb-6"},{children:h("footer.modal.select-webcam")})),(0,o.jsx)("div",Er({className:"col-span-6 sm:col-span-3"},{children:(0,o.jsx)("select",Er({value:c,onChange:function(e){return u(e.target.value)},className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},{children:f}))})),(0,o.jsx)("div",Er({className:"col-span-6 sm:col-span-3"},{children:(0,o.jsx)(Tr,{deviceId:c})})),(0,o.jsx)("div",Er({className:"px-4 py-3 bg-gray-50 text-right sm:px-6"},{children:(0,o.jsx)("button",Er({className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primaryColor hover:bg-secondaryColor focus:outline-none",onClick:function(){return Pr(void 0,void 0,void 0,(function(){return Ar(this,(function(e){return v(),c?(t(c),[2]):[2]}))}))}},{children:h("share")}))}))]}))]}))}))})):null})};var Fr=n(53788),Mr=function(){return Mr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Mr.apply(this,arguments)},Dr=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Ur=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Lr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Br=(0,qt.P1)((function(e){return e.roomSettings.videoDevices}),(function(e){return e})),Wr=(0,qt.P1)((function(e){return e.roomSettings.selectedVideoDevice}),(function(e){return e}));const Vr=function(e){var t=e.currentRoom,n=Ht(),r=(0,Qt.$)().t,i=zt(Br),s=zt(Wr),l=Lr((0,a.useState)(),2),c=l[0],u=l[1],d=Lr((0,a.useState)(),2),f=d[0],p=d[1];(0,a.useEffect)((function(){var e=i.map((function(e){return(0,o.jsx)("div",Mr({className:"",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:function(){return(0,o.jsx)("p",Mr({className:"".concat(s===e.id?"secondaryColor":"text-gray-700 dark:text-gray-400"," rounded group flex items-center px-3 py-[0.4rem] text-[10px] lg:text-xs transition ease-in hover:bg-primaryColor hover:text-white"),onClick:function(){return p(e.id)}},{children:e.label}))}})}),e.id)}));u(e)}),[s,i]),(0,a.useEffect)((function(){f&&n(We(f))}),[f,n]);return(0,o.jsxs)(Fr.v.Items,Mr({static:!0,className:"origin-bottom-right z-[9999] absolute left-0 mt-2 w-40 bottom-[40px] rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[c,(0,o.jsx)("div",Mr({className:"",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:function(){return(0,o.jsx)("p",Mr({className:"text-red-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs transition ease-in hover:bg-red-400 hover:text-white",onClick:function(){return t.localParticipant.videoTracks.forEach((function(e){return Dr(void 0,void 0,void 0,(function(){return Ur(this,(function(n){return e.track&&e.track.source===Oe.fQ.Source.Camera&&t.localParticipant.unpublishTrack(e.track),[2]}))}))})),n(se(!1)),n(We("")),void n(ke({type:"none"}))}},{children:r("footer.menus.leave-webcam")}))}})}))]}))};var Gr=function(){return Gr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Gr.apply(this,arguments)};const Hr=function(e){var t=e.currentRoom;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",Gr({className:"absolute bottom-0 right-3 lg:right-6"},{children:(0,o.jsx)(Fr.v,{children:function(e){var n=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Fr.v.Button,{children:(0,o.jsx)("div",Gr({className:"arrow-down absolute -bottom-1 -right-1 w-[15px] h-[15px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-arrow-below text-[10px] sm:text-[12px]"})}))}),(0,o.jsx)(Kt.u,Gr({show:n,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(Vr,{currentRoom:t})}))]})}})}))})};var zr=function(){return zr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},zr.apply(this,arguments)},Qr=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},qr=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},$r=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Jr=(0,qt.P1)((function(e){return e.bottomIconsActivity.isActiveWebcam}),(function(e){return e})),Xr=(0,qt.P1)((function(e){return e.bottomIconsActivity.showVideoShareModal}),(function(e){return e})),Yr=(0,qt.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_webcam}),(function(e){return e})),Kr=(0,qt.P1)((function(e){return e.bottomIconsActivity.virtualBackground}),(function(e){return e})),Zr=(0,qt.P1)((function(e){return e.roomSettings.selectedVideoDevice}),(function(e){return e}));const eo=function(e){var t=e.currentRoom,n=Ht(),r="desktop"===Gt.getState().session.userDeviceType,i=zt(Xr),s=zt(Jr),l=zt(Yr),c=zt(Kr),u=zt(Zr),d=(0,Qt.$)().t,f=$r((0,a.useState)(!1),2),p=f[0],m=f[1],h=$r((0,a.useState)(),2),v=h[0],x=h[1],b=$r((0,a.useState)(),2),y=b[0],g=b[1],w=$r((0,a.useState)(),2),j=w[0],S=w[1],k=(0,a.useRef)(null);(0,a.useEffect)((function(){if(l){m(!0);var e=E.selectById(Gt.getState(),t.localParticipant.identity);(null===e||void 0===e?void 0:e.videoTracks)&&(null===t||void 0===t||t.localParticipant.videoTracks.forEach((function(e){e.track&&e.source===Oe.fQ.Source.Camera&&t.localParticipant.unpublishTrack(e.track)})),n(se(!1)))}else m(!1)}),[l,t,n]),(0,a.useEffect)((function(){var e,t,n,r,o=null===(t=null===(e=Gt.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_webcam,a=null===(r=null===(n=Gt.getState().session.currentUser)||void 0===n?void 0:n.metadata)||void 0===r?void 0:r.is_admin;o&&!a&&!1!==l&&m(!0)}),[]),(0,a.useEffect)((function(){s||!j||u||j.getTracks().forEach((function(e){return e.stop()})),s||u||!v||x(void 0)}),[u]),(0,a.useEffect)((function(){if(u&&v&&u!==v){"none"===c.type?function(e){Qr(void 0,void 0,void 0,(function(){return qr(this,(function(n){switch(n.label){case 0:return[4,t.switchActiveDevice("videoinput",e)];case 1:return n.sent(),[2]}}))}))}(u):function(e){Qr(void 0,void 0,void 0,(function(){return qr(this,(function(t){switch(t.label){case 0:return[4,N(e)];case 1:return t.sent(),[2]}}))}))}(u),x(u)}}),[u]),(0,a.useEffect)((function(){if(j&&k){var e=k.current;e&&(e.srcObject=j)}return function(){j&&j.getTracks().forEach((function(e){return e.stop()}))}}),[j]);var _=function(){var e,t,n=k.current;n&&g({htmlElement:n,width:null!==(e=n.videoWidth)&&void 0!==e?e:320,height:null!==(t=n.videoHeight)&&void 0!==t?t:180})},N=function(e){return Qr(void 0,void 0,void 0,(function(){var r,o,a,i;return qr(this,(function(s){switch(s.label){case 0:return"none"!==c.type?[3,3]:(r=function(){var e,t=null!==(e=window.DEFAULT_WEBCAM_RESOLUTION)&&void 0!==e?e:"h720",n=Oe.OM.h720.resolution;switch(t){case"h90":n=Oe.OM.h90.resolution;break;case"h180":n=Oe.OM.h180.resolution;break;case"h216":n=Oe.OM.h216.resolution;break;case"h360":n=Oe.OM.h360.resolution;break;case"h540":n=Oe.OM.h540.resolution;break;case"h720":n=Oe.OM.h720.resolution;break;case"h1080":n=Oe.OM.h1080.resolution;break;case"h1440":n=Oe.OM.h1440.resolution;break;case"h2160":n=Oe.OM.h2160.resolution}return n}(),[4,(0,Oe.gJ)({deviceId:{exact:e,ideal:e},resolution:r})]);case 1:return o=s.sent(),[4,t.localParticipant.publishTrack(o)];case 2:return s.sent(),n(se(!0)),[3,5];case 3:return a={video:{deviceId:{exact:e,ideal:e}}},[4,navigator.mediaDevices.getUserMedia(a)];case 4:i=s.sent(),S(i),s.label=5;case 5:return[2]}}))}))},C=function(e){return Qr(void 0,void 0,void 0,(function(){return qr(this,(function(t){switch(t.label){case 0:return x(e),[4,N(e)];case 1:return t.sent(),n(We(e)),[2]}}))}))},T=function(e){e.current.captureStream(25).getTracks().forEach((function(e){return Qr(void 0,void 0,void 0,(function(){return qr(this,(function(r){switch(r.label){case 0:return e.kind!==Oe.fQ.Kind.Video?[3,2]:[4,t.localParticipant.publishTrack(e,{source:Oe.fQ.Source.Camera,name:"canvas"})];case 1:r.sent(),n(se(!0)),r.label=2;case 2:return[2]}}))}))}))},P=function(){return(0,o.jsxs)("div",zr({className:"relative z-10"},{children:[(0,o.jsxs)("div",zr({className:"camera footer-icon relative h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(r?"has-tooltip":""),onClick:function(){p||(s?s&&(t.localParticipant.videoTracks.forEach((function(e){return Qr(void 0,void 0,void 0,(function(){return qr(this,(function(n){return e.track&&e.track.source===Oe.fQ.Source.Camera&&t.localParticipant.unpublishTrack(e.track),[2]}))}))})),n(se(!1)),n(We("")),n(ke({type:"none"}))):n(he(!s)))}},{children:[(0,o.jsx)("span",zr({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:s||l?!s&&l?d("footer.icons.webcam-locked"):s?d("footer.icons.leave-webcam"):void 0:d("footer.icons.start-webcam")})),s?null:(0,o.jsx)("i",{className:"pnm-webcam primaryColor text-[10px] lg:text-[14px]"}),p?(0,o.jsx)("div",zr({className:"arrow-down absolute -bottom-1 -right-1 w-[16px] h-[16px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-lock primaryColor"})})):null,s?(0,o.jsx)("i",{className:"pnm-webcam secondaryColor text-[10px] lg:text-[14px]"}):null]})),s?(0,o.jsx)(Hr,{currentRoom:t}):null]}))};return(0,o.jsx)(o.Fragment,{children:function(){var e,t,n=Gt.getState().session,r=null===(e=n.currentRoom.metadata)||void 0===e?void 0:e.room_features,o=n.currentUser;return!!(null===r||void 0===r?void 0:r.allow_webcams)&&!((null===r||void 0===r?void 0:r.admin_only_webcams)&&!(null===(t=null===o||void 0===o?void 0:o.metadata)||void 0===t?void 0:t.is_admin))}()?(0,o.jsxs)(o.Fragment,{children:[P(),i?(0,o.jsx)(Ir,{onSelectedDevice:C}):null,y&&v&&"none"!==c.type?(0,o.jsx)("div",zr({style:{display:"none"}},{children:(0,o.jsx)(xr,{sourcePlayback:y,id:v,backgroundConfig:c,onCanvasRef:T})})):null,j?(0,o.jsx)("div",zr({style:{display:"none"}},{children:(0,o.jsx)("video",{ref:k,autoPlay:!0,onLoadedData:_})})):null]}):null})};var to=function(){return to=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},to.apply(this,arguments)},no=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},ro=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},oo=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},ao=(0,qt.P1)((function(e){return e.bottomIconsActivity.showMicrophoneModal}),(function(e){return e}));const io=function(e){var t,n,r=e.currentRoom,i=zt(ao),s=oo((0,a.useState)(!0),2),l=s[0],c=s[1],u=oo((0,a.useState)(""),2),d=u[0],f=u[1],p=oo((0,a.useState)([]),2),m=p[0],h=p[1],v=Ht(),x=(0,Qt.$)().t,b=null!==(n=null===(t=Gt.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features.mute_on_start)&&void 0!==n&&n;(0,a.useEffect)((function(){no(void 0,void 0,void 0,(function(){var e,t,n;return ro(this,(function(r){switch(r.label){case 0:return[4,nn("audioinput")];case 1:return e=r.sent(),t=[],n=e.map((function(e){var n={id:e.deviceId,label:e.label};return t.push(n),(0,o.jsx)("option",to({value:e.deviceId},{children:e.label}),e.deviceId)})),h(n),f(e[0].deviceId),t.length&&v(Ue(t)),[2]}}))}))}),[v]),(0,a.useEffect)((function(){i&&c(!0)}),[i]);var y=function(){c(!1),v(me(!1))};return(0,o.jsx)(o.Fragment,{children:i?(0,o.jsx)(Kt.u,to({show:l,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(Zt.V,to({open:l,onClose:function(){return y()},className:"share-microphone-popup-wrap fixed z-[99999] inset-0 overflow-y-auto"},{children:(0,o.jsxs)("div",to({className:"flex items-center justify-center min-h-screen"},{children:[(0,o.jsx)(Zt.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),(0,o.jsxs)("div",to({className:"popup-inner bg-white w-full max-w-sm rounded-3xl shadow-header relative px-6 py-14"},{children:[(0,o.jsxs)("button",to({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return y()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(Zt.V.Title,to({className:"mb-6"},{children:x("footer.modal.select-microphone")})),(0,o.jsx)("div",to({className:"col-span-6 sm:col-span-3"},{children:(0,o.jsx)("select",to({value:d,onChange:function(e){return f(e.target.value)},className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},{children:m}))})),(0,o.jsx)("div",to({className:"px-4 py-3 bg-gray-50 text-right sm:px-6"},{children:(0,o.jsx)("button",to({className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primaryColor hover:bg-secondaryColor focus:outline-none",onClick:function(){return no(void 0,void 0,void 0,(function(){return ro(this,(function(e){switch(e.label){case 0:return c(!1),v(me(!1)),d?[4,(0,Oe.Ai)({audio:{deviceId:d},video:!1})]:[2];case 1:return e.sent().forEach((function(e){return no(void 0,void 0,void 0,(function(){return ro(this,(function(t){switch(t.label){case 0:return e.kind!==Oe.fQ.Kind.Audio?[3,2]:[4,null===r||void 0===r?void 0:r.localParticipant.publishTrack(e)];case 1:t.sent(),v(ae(!0)),t.label=2;case 2:return[2]}}))}))})),b&&setTimeout((function(){return no(void 0,void 0,void 0,(function(){return ro(this,(function(e){return null===r||void 0===r||r.localParticipant.audioTracks.forEach((function(e){return no(void 0,void 0,void 0,(function(){return ro(this,(function(t){switch(t.label){case 0:return e.track&&e.track.source===Oe.fQ.Source.Microphone?e.isMuted?[3,2]:[4,e.track.mute()]:[3,2];case 1:t.sent(),v(ie(!0)),v(J(!1)),t.label=2;case 2:return[2]}}))}))})),[2]}))}))}),500),v(Be(d)),[2]}}))}))}},{children:x("join")}))}))]}))]}))}))})):null})};var so=function(){return so=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},so.apply(this,arguments)},lo=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},co=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},uo=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},fo=(0,qt.P1)((function(e){return e.roomSettings.audioDevices}),(function(e){return e})),po=(0,qt.P1)((function(e){return e.bottomIconsActivity.isMicMuted}),(function(e){return e})),mo=(0,qt.P1)((function(e){return e.roomSettings.selectedAudioDevice}),(function(e){return e}));const ho=function(e){var t=e.currentRoom,n=Ht(),r=(0,Qt.$)().t,i=zt(fo),s=zt(po),l=zt(mo),c=uo((0,a.useState)(),2),u=c[0],d=c[1],f=uo((0,a.useState)(),2),p=f[0],m=f[1];(0,a.useEffect)((function(){var e=i.map((function(e){return(0,o.jsx)("div",so({className:"",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:function(){return(0,o.jsx)("p",so({className:"".concat(l===e.id?"secondaryColor":"text-gray-700 dark:text-gray-400"," rounded group flex items-center px-3 py-[0.4rem] text-[10px] lg:text-xs transition ease-in hover:bg-primaryColor hover:text-white"),onClick:function(){return m(e.id)}},{children:e.label}))}})}),e.id)}));d(e)}),[i,l]),(0,a.useEffect)((function(){var e;p&&(e=p,lo(void 0,void 0,void 0,(function(){return co(this,(function(n){switch(n.label){case 0:return[4,t.switchActiveDevice("audioinput",e)];case 1:return n.sent(),[2]}}))})),n(Be(p)))}),[p,t,n]);return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(Fr.v.Items,so({static:!0,className:"origin-bottom-right z-[9999] absolute left-0 mt-2 w-40 bottom-[40px] rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[u,(0,o.jsx)("div",so({className:"",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:function(){return(0,o.jsx)("p",so({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center px-3 py-[0.4rem] text-xs transition ease-in hover:bg-primaryColor hover:text-white border-t border-solid border-red-100",onClick:function(){null===t||void 0===t||t.localParticipant.audioTracks.forEach((function(e){return lo(void 0,void 0,void 0,(function(){return co(this,(function(t){switch(t.label){case 0:return e.track&&e.track.source===Oe.fQ.Source.Microphone?e.isMuted?[4,e.track.unmute()]:[3,2]:[3,4];case 1:return t.sent(),n(ie(!1)),[3,4];case 2:return[4,e.track.mute()];case 3:t.sent(),n(ie(!0)),t.label=4;case 4:return[2]}}))}))}))}},{children:r(s?"footer.menus.unmute-microphone":"footer.menus.mute-microphone")}))}})})),(0,o.jsx)("div",so({className:"",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:function(){return(0,o.jsx)("p",so({className:"text-red-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs transition ease-in hover:bg-red-400 hover:text-white",onClick:function(){return null===t||void 0===t||t.localParticipant.audioTracks.forEach((function(e){return lo(void 0,void 0,void 0,(function(){return co(this,(function(n){return e.track&&e.kind===Oe.fQ.Kind.Audio&&t.localParticipant.unpublishTrack(e.track),[2]}))}))})),n(ae(!1)),n(ie(!1)),void n(Be(""))}},{children:r("footer.menus.leave-microphone")}))}})}))]}))})};var vo=function(){return vo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},vo.apply(this,arguments)};const xo=function(e){var t=e.currentRoom;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",vo({className:"absolute bottom-0 right-3 lg:right-6"},{children:(0,o.jsx)(Fr.v,{children:function(e){var n=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Fr.v.Button,{children:(0,o.jsx)("div",vo({className:"arrow-down absolute -bottom-1 -right-1 w-[15px] h-[15px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-arrow-below text-[10px] sm:text-[12px]"})}))}),(0,o.jsx)(Kt.u,vo({show:n,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(ho,{currentRoom:t})}))]})}})}))})};var bo=function(){return bo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},bo.apply(this,arguments)},yo=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},go=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},wo=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},jo=(0,qt.P1)((function(e){return e.bottomIconsActivity.isActiveMicrophone}),(function(e){return e})),So=(0,qt.P1)((function(e){return e.bottomIconsActivity.showMicrophoneModal}),(function(e){return e})),ko=(0,qt.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_microphone}),(function(e){return e})),_o=(0,qt.P1)((function(e){return e.bottomIconsActivity.isMicMuted}),(function(e){return e}));const No=function(e){var t=e.currentRoom,n=Ht(),r="desktop"===Gt.getState().session.userDeviceType,i=(0,Qt.$)().t,s=zt(So),l=zt(jo),c=zt(ko),u=zt(_o),d=wo((0,a.useState)(!1),2),f=d[0],p=d[1];(0,a.useEffect)((function(){if(c){p(!0);var e=E.selectById(Gt.getState(),t.localParticipant.identity);(null===e||void 0===e?void 0:e.audioTracks)&&(null===t||void 0===t||t.localParticipant.audioTracks.forEach((function(e){e.track&&e.source===Oe.fQ.Source.Microphone&&t.localParticipant.unpublishTrack(e.track)})),n(ae(!1)),n(ie(!1)))}else p(!1)}),[c,t,n]),(0,a.useEffect)((function(){var e,t,n,r,o=null===(t=null===(e=Gt.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_microphone,a=null===(r=null===(n=Gt.getState().session.currentUser)||void 0===n?void 0:n.metadata)||void 0===r?void 0:r.is_admin;o&&!a&&!1!==c&&p(!0)}),[]);var m=function(){l||f||n(me(!0)),l&&(null===t||void 0===t||t.localParticipant.audioTracks.forEach((function(e){return yo(void 0,void 0,void 0,(function(){return go(this,(function(t){switch(t.label){case 0:return e.track&&e.track.source===Oe.fQ.Source.Microphone?e.isMuted?[4,e.track.unmute()]:[3,2]:[3,4];case 1:return t.sent(),n(ie(!1)),[3,4];case 2:return[4,e.track.mute()];case 3:t.sent(),n(ie(!0)),t.label=4;case 4:return[2]}}))}))})))};return(0,o.jsxs)("div",bo({className:"relative z-10"},{children:[s?(0,o.jsx)(io,{currentRoom:t}):null,(0,o.jsxs)("div",bo({className:"microphone footer-icon relative h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(r?"has-tooltip":""),onClick:function(){return m()}},{children:[(0,o.jsx)("span",bo({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:l||f?!l&&f?i("footer.icons.microphone-locked"):l&&!u?i("footer.menus.mute-microphone"):l&&u?i("footer.menus.unmute-microphone"):void 0:i("footer.icons.start-microphone-sharing")})),l?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("i",{className:"pnm-mic-unmute primaryColor text-[10px] lg:text-[14px]"}),f?(0,o.jsx)("div",bo({className:"arrow-down absolute -bottom-1 -right-1 w-[16px] h-[16px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-lock primaryColor"})})):null]}),!u&&l?(0,o.jsx)("i",{className:"pnm-mic-unmute secondaryColor text-[10px] lg:text-[14px]"}):null,u&&l?(0,o.jsx)("i",{className:"pnm-mic-mute secondaryColor text-[10px] lg:text-[14px]"}):null]})),l?(0,o.jsx)(xo,{currentRoom:t}):null]}))};var Co=function(){return Co=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Co.apply(this,arguments)},To=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Eo=(0,qt.P1)((function(e){return e.bottomIconsActivity.isActiveChatPanel}),(function(e){return e})),Po=(0,qt.P1)((function(e){return e.bottomIconsActivity.totalUnreadChatMsgs}),(function(e){return e}));const Ao=function(){var e=Ht(),t="desktop"===Gt.getState().session.userDeviceType,n=(0,Qt.$)().t,r=zt(Eo),i=zt(Po),s=To((0,a.useState)("primaryColor"),2),l=s[0],c=s[1],u=To((0,a.useState)(!0),2),d=u[0],f=u[1];(0,a.useEffect)((function(){c(r?"secondaryColor":"primaryColor")}),[r]),(0,a.useEffect)((function(){var t;(null===(t=Gt.getState().session.currentRoom.metadata.room_features)||void 0===t?void 0:t.chat_features.allow_chat)||(f(!1),e(le(!1)))}),[e]);return(0,o.jsx)(o.Fragment,{children:d?(0,o.jsxs)("div",Co({className:"message footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] relative rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(t?"has-tooltip":""),onClick:function(){e(le(!r))}},{children:[(0,o.jsx)("span",Co({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:n(r?"footer.icons.hide-chat-panel":"footer.icons.show-chat-panel")})),(0,o.jsx)("i",{className:"pnm-chat ".concat(l," text-[12px] lg:text-[16px]")}),!r&&i>0?(0,o.jsx)("div",Co({className:"unseen-message-count bg-brandRed w-5 h-5 rounded-full text-xs text-white absolute -top-2 -right-1 flex justify-center items-center"},{children:i})):null]})):null})};var Ro=function(){return Ro=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ro.apply(this,arguments)},Oo=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Io=(0,qt.P1)((function(e){return e.bottomIconsActivity.isActiveParticipantsPanel}),(function(e){return e})),Fo=(0,qt.P1)((function(e){return e.participants}),(function(e){return e}));const Mo=function(){var e=Ht(),t="desktop"===Gt.getState().session.userDeviceType,n=(0,Qt.$)().t,r=zt(Io),i=zt(Fo),s=Oo((0,a.useState)("primaryColor"),2),l=s[0],c=s[1];(0,a.useEffect)((function(){c(r?"secondaryColor":"primaryColor")}),[r]);return(0,o.jsxs)("div",Ro({className:"participants footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] mr-3 lg:mr-6 relative rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] flex items-center justify-center cursor-pointer ".concat(t?"has-tooltip":""),onClick:function(){e(ce(!r))}},{children:[(0,o.jsx)("span",Ro({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:n(r?"footer.icons.hide-users-list":"footer.icons.show-users-list")})),(0,o.jsx)("i",{className:"pnm-participant ".concat(l," text-[12px] lg:text-[16px]")}),r?null:(0,o.jsx)("div",Ro({className:"unseen-message-count bg-secondaryColor w-5 h-5 rounded-full text-xs text-white absolute -top-2 -right-1 flex justify-center items-center"},{children:i.ids.length}))]}))};var Do=n(9669),Uo=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Lo=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Bo=n.n(Do)().create({baseURL:window.PLUG_N_MEET_SERVER_URL+"/api"}),Wo=function(){if(Gt.getState().session.token)return Gt.getState().session.token;var e=new URLSearchParams(window.location.search);return Object.fromEntries(e.entries()).access_token};const Vo=function(e,t){return Uo(void 0,void 0,void 0,(function(){return Lo(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,Bo.post(e,JSON.stringify(t),{headers:{Authorization:Wo(),"Content-Type":"application/json"}})];case 1:return[2,n.sent().data];case 2:throw n.sent().response;case 3:return[2]}}))}))};var Go,Ho,zo;!function(e){e.USER="USER",e.SYSTEM="SYSTEM",e.WHITEBOARD="WHITEBOARD"}(Go||(Go={})),function(e){e.RAISE_HAND="RAISE_HAND",e.LOWER_HAND="LOWER_HAND",e.OTHER_USER_LOWER_HAND="OTHER_USER_LOWER_HAND",e.FILE_UPLOAD="FILE_UPLOAD",e.INFO="INFO",e.ALERT="ALERT",e.SEND_CHAT_MSGS="SEND_CHAT_MSGS",e.RENEW_TOKEN="RENEW_TOKEN",e.UPDATE_LOCK_SETTINGS="UPDATE_LOCK_SETTINGS",e.INIT_WHITEBOARD="INIT_WHITEBOARD",e.USER_VISIBILITY_CHANGE="USER_VISIBILITY_CHANGE",e.EXTERNAL_MEDIA_PLAYER_EVENTS="EXTERNAL_MEDIA_PLAYER_EVENTS",e.POLL_CREATED="POLL_CREATED",e.NEW_POLL_RESPONSE="NEW_POLL_RESPONSE",e.POLL_CLOSED="POLL_CLOSED",e.JOIN_BREAKOUT_ROOM="JOIN_BREAKOUT_ROOM"}(Ho||(Ho={})),function(e){e.SCENE_UPDATE="SCENE_UPDATE",e.POINTER_UPDATE="POINTER_UPDATE",e.ADD_WHITEBOARD_FILE="ADD_WHITEBOARD_FILE",e.ADD_WHITEBOARD_OFFICE_FILE="ADD_WHITEBOARD_OFFICE_FILE",e.PAGE_CHANGE="PAGE_CHANGE"}(zo||(zo={}));var Qo=function(){return Qo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Qo.apply(this,arguments)},qo=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},$o=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Jo=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Xo=(0,qt.P1)((function(e){return e.bottomIconsActivity.isActiveRaisehand}),(function(e){return e}));const Yo=function(e){var t=e.currentRoom,n="desktop"===Gt.getState().session.userDeviceType,r=(0,Qt.$)().t,i=Ht(),s=zt(Xo),c=Jo((0,a.useState)("primaryColor"),2),u=c[0],d=c[1];(0,a.useEffect)((function(){d(s?"secondaryColor":"primaryColor")}),[s]);return(0,o.jsxs)("div",Qo({className:"hands footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(n?"has-tooltip":""),onClick:function(){return qo(void 0,void 0,void 0,(function(){var e,n;return $o(this,(function(o){switch(o.label){case 0:return s?[3,2]:(e={sid:t.sid,room_id:t.name,msg_type:Ho.RAISE_HAND,msg:r("footer.notice.has-raised-hand",{user:t.localParticipant.name})},[4,Vo("dataMessage",e)]);case 1:return(n=o.sent()).status?(i(ue(!0)),(0,l.Am)(r("footer.notice.you-raised-hand"),{type:"info"})):(0,l.Am)(n.msg,{type:"error"}),[3,4];case 2:return e={sid:t.sid,room_id:t.name,msg_type:Ho.LOWER_HAND,msg:Ho.LOWER_HAND},[4,Vo("dataMessage",e)];case 3:(n=o.sent()).status?i(ue(!1)):(0,l.Am)(n.msg,{type:"error"}),o.label=4;case 4:return[2]}}))}))}},{children:[(0,o.jsx)("span",Qo({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:r(s?"footer.icons.lower-hand":"footer.icons.raise-hand")})),(0,o.jsx)("i",{className:"pnm-raise-hand ".concat(u," text-[12px] lg:text-[16px]")})]}))};var Ko=function(){return Ko=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ko.apply(this,arguments)},Zo=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},ea=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},ta=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},na=(0,qt.P1)((function(e){return e.bottomIconsActivity.isActiveScreenshare}),(function(e){return e})),ra=(0,qt.P1)((function(e){return e.session.screenSharing}),(function(e){return e})),oa=(0,qt.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_screen_sharing}),(function(e){return e}));const aa=function(e){var t,n,r=e.currentRoom,i="desktop"===Gt.getState().session.userDeviceType,s=Ht(),c=(0,Qt.$)().t,u=zt(na),d=zt(ra),f=zt(oa),p=ta((0,a.useState)("primaryColor"),2),m=p[0],h=p[1],v=ta((0,a.useState)(!1),2),x=v[0],b=v[1],y=null===(n=null===(t=Gt.getState().session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.is_admin;(0,a.useEffect)((function(){d.isActive&&d.sharedBy===r.localParticipant.identity?h("secondaryColor"):h("primaryColor")}),[d]);var g=(0,a.useCallback)((function(){u&&(r.localParticipant.tracks.forEach((function(e){e.source!==Oe.fQ.Source.ScreenShare&&e.source!==Oe.fQ.Source.ScreenShareAudio||!e.track||r.localParticipant.unpublishTrack(e.track)})),s(de(!1)),s(V({isActive:!1,sharedBy:""})))}),[u,s,r]);(0,a.useEffect)((function(){y||(f?(b(!0),g()):f||b(!1))}),[g,f]),(0,a.useEffect)((function(){!d.isActive&&u&&s(de(!1))}),[d]);return(0,o.jsx)(o.Fragment,{children:function(){var e;return null===(e=Gt.getState().session.currentRoom.metadata.room_features)||void 0===e?void 0:e.allow_screen_share}()?(0,o.jsxs)("div",Ko({className:"share-screen footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] relative rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 hidden md:flex items-center justify-center cursor-pointer ".concat(i?"has-tooltip":""),onClick:function(){return Zo(void 0,void 0,void 0,(function(){return ea(this,(function(e){switch(e.label){case 0:return x?[2]:u?[3,2]:d.isActive?((0,l.Am)(c("footer.notice.already-active-screen-sharing"),{toastId:"dup-screen-share",type:"warning"}),[2]):[4,(0,Oe.QK)({audio:!0,resolution:sn()})];case 1:return e.sent().forEach((function(e){return Zo(void 0,void 0,void 0,(function(){return ea(this,(function(t){switch(t.label){case 0:return[4,r.localParticipant.publishTrack(e)];case 1:return t.sent(),[2]}}))}))})),s(de(!0)),s(V({isActive:!0,sharedBy:r.localParticipant.identity})),[3,3];case 2:g(),e.label=3;case 3:return[2]}}))}))}},{children:[(0,o.jsx)("span",Ko({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:u?c("footer.icons.stop-screen-sharing"):u||x?x?c("footer.icons.screen-sharing-locked"):void 0:c("footer.icons.start-screen-sharing")})),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("i",{className:"pnm-screen-share ".concat(m," text-[12px] lg:text-[16px]")}),x?(0,o.jsx)("div",Ko({className:"arrow-down absolute -bottom-1 -right-1 w-[16px] h-[16px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-lock primaryColor"})})):null]})]})):null})};var ia=function(){return ia=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ia.apply(this,arguments)},sa=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},la=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},ca=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},ua=(0,qt.P1)((function(e){return e.session.isActiveRecording}),(function(e){return e}));const da=function(){var e,t,n="desktop"===Gt.getState().session.userDeviceType,r=(0,Qt.$)().t,i=zt(ua),s=ca((0,a.useState)(!1),2),c=s[0],u=s[1],d=ca((0,a.useState)(!1),2),f=d[0],p=d[1],m=ca((0,a.useState)(!0),2),h=m[0],v=m[1],x=null===(t=null===(e=Gt.getState().session.currentUser)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.is_admin,b=0;(0,a.useEffect)((function(){return i?(p(!0),clearTimeout(b),u(!1)):!i&&f&&(p(!1),clearTimeout(b),u(!1)),function(){clearTimeout(b)}}),[i,f,b]),(0,a.useEffect)((function(){var e;(null===(e=Gt.getState().session.currentRoom.metadata.room_features)||void 0===e?void 0:e.allow_recording)||v(!1)}),[]);var y=function(){return sa(void 0,void 0,void 0,(function(){var e,t,n;return la(this,(function(o){switch(o.label){case 0:return e={task:"start-recording",sid:Gt.getState().session.currentRoom.sid},"undefined"!==typeof window.DESIGN_CUSTOMIZATION&&(e.custom_design="".concat(window.DESIGN_CUSTOMIZATION).replace(/\s/g,"")),[4,Vo("recording",e)];case 1:return t=o.sent(),n="footer.notice.start-recording-progress",t.status||(n=t.msg),(0,l.Am)(r(n),{toastId:"recording-status",type:"info"}),b=setTimeout((function(){u(!1),(0,l.Am)(r("footer.notice.recording-not-start"),{toastId:"recording-status",type:"error"})}),3e4),[2]}}))}))},g=function(){return sa(void 0,void 0,void 0,(function(){var e,t,n;return la(this,(function(o){switch(o.label){case 0:return e={task:"stop-recording",sid:Gt.getState().session.currentRoom.sid},[4,Vo("recording",e)];case 1:return t=o.sent(),n="footer.notice.stop-recording-service-in-progress",t.status||(n=t.msg),(0,l.Am)(r(n),{toastId:"recording-status",type:"info"}),b=setTimeout((function(){u(!1),(0,l.Am)(r("footer.notice.recording-did-not-stop"),{toastId:"recording-status",type:"error"})}),3e4),[2]}}))}))};return(0,o.jsx)(o.Fragment,{children:h&&x?(0,o.jsxs)("button",ia({className:"".concat(i?"record":""," footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ").concat(n?"has-tooltip":""),onClick:function(){return u(!0),void(i?g():y())},disabled:c},{children:[(0,o.jsx)("span",ia({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:r(i?"footer.icons.stop-recording":"footer.icons.start-recording")})),(0,o.jsx)("i",{className:"pnm-rec primaryColor text-[10px] lg:text-[12px] font-['Nunito Sans'] font-bold"})]})):null})};var fa=n(12395),pa=function(){return pa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},pa.apply(this,arguments)},ma=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},ha=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},va=(0,qt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.default_lock_settings}),(function(e){return e}));const xa=function(){var e=Ht(),t=(0,Qt.$)().t,n=zt(va),r=Gt.getState().session,i=function(e,n){return ma(void 0,void 0,void 0,(function(){var o,a,i;return ha(this,(function(s){switch(s.label){case 0:return o=e?"lock":"unlock",a={sid:r.currentRoom.sid,room_id:r.currentRoom.room_id,user_id:"all",service:n,direction:o},[4,Vo("updateLockSettings",a)];case 1:return(i=s.sent()).status?(0,l.Am)(t("footer.notice.applied-settings"),{toastId:"lock-setting-status",type:"info"}):(0,l.Am)(i.msg,{type:"error"}),[2]}}))}))},s=function(){e(ve(!1))},c=function(){var e,r,a,s,l,c,u,d,f;return(0,o.jsxs)(fa.r.Group,{children:[(0,o.jsxs)("div",pa({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(fa.r.Label,pa({className:"pr-4 w-full"},{children:t("footer.modal.lock-microphone")})),(0,o.jsx)(fa.r,pa({checked:null!==(e=null===n||void 0===n?void 0:n.lock_microphone)&&void 0!==e&&e,onChange:function(e){return i(e,"mic")},className:"".concat((null===n||void 0===n?void 0:n.lock_microphone)?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_microphone)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",pa({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(fa.r.Label,pa({className:"pr-4 w-full"},{children:t("footer.modal.lock-webcams")})),(0,o.jsx)(fa.r,pa({checked:null!==(r=null===n||void 0===n?void 0:n.lock_webcam)&&void 0!==r&&r,onChange:function(e){return i(e,"webcam")},className:"".concat((null===n||void 0===n?void 0:n.lock_webcam)?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_webcam)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",pa({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(fa.r.Label,pa({className:"pr-4 w-full"},{children:t("footer.modal.lock-screen-sharing")})),(0,o.jsx)(fa.r,pa({checked:null!==(a=null===n||void 0===n?void 0:n.lock_screen_sharing)&&void 0!==a&&a,onChange:function(e){return i(e,"screenShare")},className:"".concat((null===n||void 0===n?void 0:n.lock_screen_sharing)?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_screen_sharing)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",pa({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(fa.r.Label,pa({className:"pr-4 w-full"},{children:t("footer.modal.lock-whiteboard")})),(0,o.jsx)(fa.r,pa({checked:null!==(s=null===n||void 0===n?void 0:n.lock_whiteboard)&&void 0!==s&&s,onChange:function(e){return i(e,"whiteboard")},className:"".concat((null===n||void 0===n?void 0:n.lock_whiteboard)?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_whiteboard)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",pa({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(fa.r.Label,pa({className:"pr-4 w-full"},{children:t("footer.modal.lock-shared-notepad")})),(0,o.jsx)(fa.r,pa({checked:null!==(l=null===n||void 0===n?void 0:n.lock_shared_notepad)&&void 0!==l&&l,onChange:function(e){return i(e,"sharedNotepad")},className:"".concat((null===n||void 0===n?void 0:n.lock_shared_notepad)?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_shared_notepad)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",pa({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(fa.r.Label,pa({className:"pr-4 w-full"},{children:t("footer.modal.lock-chat")})),(0,o.jsx)(fa.r,pa({checked:null!==(c=null===n||void 0===n?void 0:n.lock_chat)&&void 0!==c&&c,onChange:function(e){return i(e,"chat")},className:"".concat((null===n||void 0===n?void 0:n.lock_chat)?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_chat)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",pa({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(fa.r.Label,pa({className:"pr-4 w-full"},{children:t("footer.modal.lock-send-message")})),(0,o.jsx)(fa.r,pa({checked:null!==(u=null===n||void 0===n?void 0:n.lock_chat_send_message)&&void 0!==u&&u,onChange:function(e){return i(e,"sendChatMsg")},className:"".concat((null===n||void 0===n?void 0:n.lock_chat_send_message)?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_chat_send_message)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",pa({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(fa.r.Label,pa({className:"pr-4 w-full"},{children:t("footer.modal.lock-chat-file-share")})),(0,o.jsx)(fa.r,pa({checked:null!==(d=null===n||void 0===n?void 0:n.lock_chat_file_share)&&void 0!==d&&d,onChange:function(e){return i(e,"chatFile")},className:"".concat((null===n||void 0===n?void 0:n.lock_chat_file_share)?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_chat_file_share)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",pa({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(fa.r.Label,pa({className:"pr-4 w-full"},{children:t("footer.modal.lock-private-chat")})),(0,o.jsx)(fa.r,pa({checked:null!==(f=null===n||void 0===n?void 0:n.lock_private_chat)&&void 0!==f&&f,onChange:function(e){return i(e,"privateChat")},className:"".concat((null===n||void 0===n?void 0:n.lock_private_chat)?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_private_chat)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]}))]})};return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Kt.u,pa({appear:!0,show:!0,as:a.Fragment},{children:(0,o.jsx)(Zt.V,pa({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:s},{children:(0,o.jsxs)("div",pa({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(Kt.u.Child,pa({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(Zt.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",pa({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(Kt.u.Child,pa({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",pa({className:"inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",pa({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return s()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(Zt.V.Title,pa({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 mb-2"},{children:t("footer.modal.lock-settings-title")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",pa({className:"mt-6"},{children:c()}))]}))}))]}))}))}))})})};var ba=n(48966),ya=function(){return ya=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ya.apply(this,arguments)},ga=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},wa=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},ja=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Sa=(0,qt.P1)((function(e){return e.session.isActiveRtmpBroadcasting}),(function(e){return e}));const ka=function(){var e=Ht(),t=(0,Qt.$)().t,n=zt(Sa),r=ja((0,a.useState)("youtube"),2),i=r[0],s=r[1],c=ja((0,a.useState)(!1),2),u=c[0],d=c[1],f=ja((0,a.useState)(""),2),p=f[0],m=f[1],h=ja((0,a.useState)(""),2),v=h[0],x=h[1],b={youtube:"rtmp://a.rtmp.youtube.com/live2/",facebook:"rtmps://live-api-s.facebook.com:443/rtmp/"};(0,a.useEffect)((function(){d("other"===i)}),[i]);var y=function(){e(be(!1))},g=function(n){return void 0===n&&(n=!1),ga(void 0,void 0,void 0,(function(){var r,o,a;return wa(this,(function(i){switch(i.label){case 0:return e(be(!1)),n?(r={task:"stop-rtmp",sid:Gt.getState().session.currentRoom.sid},[4,Vo("rtmp",r)]):[2];case 1:return o=i.sent(),a=t("footer.notice.rtmp-ending"),o.status||(a=o.msg),(0,l.Am)(t(a),{toastId:"rtmp-status",type:"info"}),[2]}}))}))};return(0,o.jsx)(o.Fragment,{children:n?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Kt.u,ya({appear:!0,show:n,as:a.Fragment},{children:(0,o.jsx)(Zt.V,ya({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:g},{children:(0,o.jsxs)("div",ya({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(Kt.u.Child,ya({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(Zt.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",ya({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(Kt.u.Child,ya({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",ya({className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",ya({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return g()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(Zt.V.Title,ya({as:"h3",className:"text-lg font-medium leading-6 text-gray-900"},{children:t("footer.modal.rtmp-close-confirm")})),(0,o.jsx)("div",ya({className:"mt-2"},{children:(0,o.jsx)("p",ya({className:"text-sm text-gray-500"},{children:t("footer.modal.rtmp-close-msg")}))})),(0,o.jsxs)("div",ya({className:"mt-4"},{children:[(0,o.jsx)("button",ya({className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 mr-4 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return g(!0)}},{children:t("ok")})),(0,o.jsx)("button",ya({type:"button",className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return g(!1)}},{children:t("close")}))]}))]}))}))]}))}))}))}):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Kt.u,ya({appear:!0,show:!n,as:a.Fragment},{children:(0,o.jsx)(Zt.V,ya({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:y},{children:(0,o.jsxs)("div",ya({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(Kt.u.Child,ya({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(Zt.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",ya({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(Kt.u.Child,ya({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",ya({className:"inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",ya({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return y()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(Zt.V.Title,ya({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 text-left mb-2"},{children:t("footer.modal.rtmp-title")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",ya({className:"mt-6"},{children:(0,o.jsxs)("form",ya({action:"#",method:"POST",onSubmit:function(n){return function(n){return ga(void 0,void 0,void 0,(function(){var r,o,a,s;return wa(this,(function(c){switch(c.label){case 0:return n.preventDefault(),"other"===i&&(0,ba.isEmpty)(p)||(0,ba.isEmpty)(v)?[2]:(r="",r="other"===i?p:b[i],(0,ba.isURL)(r,{protocols:["rtmp","rtmps"]})?(o={task:"start-rtmp",sid:Gt.getState().session.currentRoom.sid,rtmp_url:r+"/"+v},"undefined"!==typeof window.DESIGN_CUSTOMIZATION&&(o.custom_design="".concat(window.DESIGN_CUSTOMIZATION).replace(/\s/g,"")),[4,Vo("rtmp",o)]):[2]);case 1:return a=c.sent(),s="footer.notice.rtmp-starting",a.status||(s=a.msg),(0,l.Am)(t(s),{toastId:"rtmp-status",type:"info"}),e(be(!1)),[2]}}))}))}(n)}},{children:[(0,o.jsx)("div",ya({className:"s"},{children:(0,o.jsxs)("div",ya({className:"grid grid-cols-6 gap-6"},{children:[(0,o.jsxs)("div",ya({className:"col-span-6 sm:col-span-4"},{children:[(0,o.jsx)("label",ya({htmlFor:"provider",className:"block text-sm font-medium text-gray-700"},{children:t("footer.modal.rtmp-select-provider")})),(0,o.jsxs)("select",ya({id:"provider",name:"provider",className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",onChange:function(e){return s(e.currentTarget.value)},value:i},{children:[(0,o.jsx)("option",ya({value:"youtube"},{children:"YouTube"})),(0,o.jsx)("option",ya({value:"facebook"},{children:"Facebook"})),(0,o.jsx)("option",ya({value:"other"},{children:"Other"}))]}))]})),u?(0,o.jsxs)("div",ya({className:"col-span-6 sm:col-span-4"},{children:[(0,o.jsx)("label",ya({htmlFor:"stream-url",className:"block text-sm font-medium text-gray-700"},{children:t("footer.modal.rtmp-server-url")})),(0,o.jsx)("input",{type:"text",name:"stream-url",id:"stream-url",value:p,onChange:function(e){return m(e.currentTarget.value)},className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md h-10 border border-solid border-black/50"})]})):null,(0,o.jsxs)("div",ya({className:"col-span-6 sm:col-span-4"},{children:[(0,o.jsx)("label",ya({htmlFor:"stream-key",className:"block text-sm font-medium text-gray-700"},{children:t("footer.modal.rtmp-stream-key")})),(0,o.jsx)("input",{type:"text",name:"stream-key",id:"stream-key",value:v,onChange:function(e){return x(e.currentTarget.value)},className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md h-10 border border-solid border-black/50"})]}))]}))})),(0,o.jsx)("div",ya({className:"px-4 py-3 bg-gray-50 text-right sm:px-6 mt-4"},{children:(0,o.jsx)("button",ya({type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primaryColor hover:bg-secondaryColor focus:outline-none focus:ring-2 focus:ring-offset-2 focus:bg-secondaryColor"},{children:t("footer.modal.rtmp-start-broadcast")}))}))]}))}))]}))}))]}))}))}))})})};var _a=n(96486),Na=n(56310),Ca=function(){return Ca=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ca.apply(this,arguments)},Ta=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Ea=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Pa=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Aa=(0,qt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.external_media_player_features.is_active}),(function(e){return e}));const Ra=function(){var e=Ht(),t=(0,Qt.$)().t,n=zt(Aa),r=Pa((0,a.useState)(""),2),i=r[0],s=r[1],c=Pa((0,a.useState)(),2),u=c[0],d=c[1],f=function(e){u&&d(void 0),s(e.currentTarget.value)},p=function(){e(ye(!1))},m=function(n){return void 0===n&&(n=!1),Ta(void 0,void 0,void 0,(function(){var r;return Ea(this,(function(o){switch(o.label){case 0:return p(),n?(r=l.Am.loading(t("footer.notice.external-media-player-stopping"),{type:"info"}),[4,Vo("externalMediaPlayer",{task:"end-playback"})]):[2];case 1:return o.sent().status||l.Am.update(r,{render:t("res.msg"),type:"error",isLoading:!1,autoClose:1e3}),l.Am.dismiss(r),e(ye(!1)),[2]}}))}))};return(0,o.jsx)(o.Fragment,{children:n?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Kt.u,Ca({appear:!0,show:n,as:a.Fragment},{children:(0,o.jsx)(Zt.V,Ca({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:m},{children:(0,o.jsxs)("div",Ca({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(Kt.u.Child,Ca({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(Zt.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",Ca({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(Kt.u.Child,Ca({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Ca({className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",Ca({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return m()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(Zt.V.Title,Ca({as:"h3",className:"text-lg font-medium leading-6 text-gray-900"},{children:t("footer.modal.external-media-player-close-confirm")})),(0,o.jsx)("div",Ca({className:"mt-2"},{children:(0,o.jsx)("p",Ca({className:"text-sm text-gray-500"},{children:t("footer.modal.external-media-player-close-msg")}))})),(0,o.jsxs)("div",Ca({className:"mt-4"},{children:[(0,o.jsx)("button",Ca({className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 mr-4 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return m(!0)}},{children:t("ok")})),(0,o.jsx)("button",Ca({type:"button",className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return m(!1)}},{children:t("close")}))]}))]}))}))]}))}))}))}):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Kt.u,Ca({appear:!0,show:!n,as:a.Fragment},{children:(0,o.jsx)(Zt.V,Ca({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:p},{children:(0,o.jsxs)("div",Ca({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(Kt.u.Child,Ca({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(Zt.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",Ca({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(Kt.u.Child,Ca({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Ca({className:"inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",Ca({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return p()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(Zt.V.Title,Ca({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 text-left mb-2"},{children:t("footer.modal.external-media-player-title")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",Ca({className:"mt-6"},{children:(0,o.jsxs)("form",Ca({action:"#",method:"POST",onSubmit:function(n){return function(n){return Ta(void 0,void 0,void 0,(function(){var r,o;return Ea(this,(function(a){switch(a.label){case 0:return n.preventDefault(),(0,_a.isEmpty)(i)?(d(t("footer.notice.external-media-player-url-required")),[2]):Na.Z.canPlay(i)?(d(void 0),p(),r=l.Am.loading(t("footer.notice.external-media-player-starting"),{type:"info"}),[4,Vo("externalMediaPlayer",{task:"start-playback",url:i})]):(d(t("footer.notice.external-media-player-url-invalid")),[2]);case 1:return(o=a.sent()).status||l.Am.update(r,{render:t(o.msg),type:"error",isLoading:!1,autoClose:1e3}),l.Am.dismiss(r),e(ye(!1)),[2]}}))}))}(n)}},{children:[(0,o.jsx)("div",Ca({className:"s"},{children:(0,o.jsx)("div",Ca({className:""},{children:(0,o.jsxs)("div",Ca({className:""},{children:[(0,o.jsx)("label",Ca({htmlFor:"stream-key",className:"block text-sm font-medium text-gray-700"},{children:t("footer.modal.external-media-player-url")})),(0,o.jsx)("input",{type:"text",name:"stream-key",id:"stream-key",value:i,onChange:f,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md h-10 border border-solid border-black/50"}),u?(0,o.jsx)("div",Ca({className:"error-msg absolute text-xs text-red-600 py-2"},{children:u})):null]}))}))})),(0,o.jsx)("div",Ca({className:"pb-3 pt-4 bg-gray-50 text-right mt-4"},{children:(0,o.jsx)("button",Ca({type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primaryColor hover:bg-secondaryColor focus:outline-none focus:ring-2 focus:ring-offset-2 focus:bg-secondaryColor"},{children:t("footer.modal.external-media-player-play")}))}))]}))}))]}))}))]}))}))}))})})};var Oa=function(){return Oa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Oa.apply(this,arguments)},Ia=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Fa=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Ma=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Da=(0,qt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.waiting_room_features.waiting_room_msg}),(function(e){return e}));const Ua=function(){var e=(0,Qt.$)().t,t=zt(Da),n=Ma((0,a.useState)(null!==t&&void 0!==t?t:""),2),r=n[0],i=n[1];return(0,o.jsxs)("div",Oa({className:"mb-4 text-right"},{children:[(0,o.jsx)("p",Oa({className:"text-sm text-black capitalize mb-2 block text-left"},{children:e("waiting-room.update-waiting-message")})),(0,o.jsx)("textarea",{value:r,onChange:function(e){return i(e.currentTarget.value)},className:"border border-solid border-primaryColor/20 h-20 w-full block p-3 rounded-xl outline-none text-sm"}),(0,o.jsx)("button",Oa({onClick:function(){return Ia(void 0,void 0,void 0,(function(){var t;return Fa(this,(function(n){switch(n.label){case 0:return(0,_a.isEmpty)(r)?[2]:[4,Vo("waitingRoom/updateMsg",{msg:r})];case 1:return(t=n.sent()).status?(0,l.Am)(e("waiting-room.updated-msg"),{type:"info"}):(0,l.Am)(e(t.msg),{type:"error"}),[2]}}))}))},className:"py-1 px-6 mt-2 rounded-xl text-white text-sm inline-block mr-0 ml-auto transition ease-in bg-primaryColor hover:bg-secondaryColor"},{children:e("waiting-room.update-msg")}))]}))};var La=function(){return La=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},La.apply(this,arguments)},Ba=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Wa=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};const Va=function(e){var t=e.waitingParticipants,n=(0,Qt.$)().t;return(0,o.jsxs)("div",La({className:"mb-4 flex flex-wrap items-center justify-start"},{children:[(0,o.jsx)("button",La({onClick:function(){t.forEach((function(e){return Ba(void 0,void 0,void 0,(function(){var t,r;return Wa(this,(function(o){switch(o.label){case 0:return t={user_id:e.userId},[4,Vo("waitingRoom/approveUsers",t)];case 1:return(r=o.sent()).status||(0,l.Am)(n(r.msg),{type:"error"}),[2]}}))}))}))},className:"py-1 px-6 mr-4 rounded-xl text-white text-sm block transition ease-in bg-primaryColor hover:bg-secondaryColor"},{children:n("waiting-room.accept-all")})),(0,o.jsx)("button",La({onClick:function(){var e=Gt.getState().session,r={sid:e.currentRoom.sid,room_id:e.currentRoom.room_id};t.forEach((function(e){return Ba(void 0,void 0,void 0,(function(){var t;return Wa(this,(function(o){switch(o.label){case 0:return r.user_id=e.userId,r.msg=n("notifications.you-have-reject"),r.block_user=!1,[4,Vo("removeParticipant",r)];case 1:return(t=o.sent()).status||(0,l.Am)(n(t.msg),{type:"error"}),[2]}}))}))}))},className:"py-1 px-6 rounded-xl text-white text-sm block transition ease-in bg-primaryColor hover:bg-secondaryColor"},{children:n("waiting-room.reject-all")}))]}))};var Ga=function(){return Ga=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ga.apply(this,arguments)},Ha=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},za=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};const Qa=function(e){var t=e.waitingParticipants,n=(0,Qt.$)().t,r=function(e,t){return Ha(void 0,void 0,void 0,(function(){var r,o,a;return za(this,(function(i){switch(i.label){case 0:return r=Gt.getState().session,o={sid:r.currentRoom.sid,room_id:r.currentRoom.room_id,user_id:e,msg:n("notifications.you-have-reject"),block_user:t},[4,Vo("removeParticipant",o)];case 1:return(a=i.sent()).status?(0,l.Am)(n("left-panel.menus.notice.participant-removed"),{toastId:"user-remove-status",type:"info"}):(0,l.Am)(n(a.msg),{type:"error"}),[2]}}))}))};return(0,o.jsxs)("div",Ga({className:"waiting-list-wrap"},{children:[(0,o.jsx)("p",Ga({className:"text-lg my-4 text-black font-bold"},{children:n("waiting-room.list-waiting-participants",{count:t.length})})),(0,o.jsx)("div",Ga({className:"waiting-list scrollBar h-[130px] overflow-auto"},{children:(0,o.jsx)("div",Ga({className:"waiting-list-inner"},{children:t.map((function(e){return(0,o.jsxs)("div",Ga({className:"waiting-list-item mb-2 pb-2 border-b border-solid border-primaryColor w-full max-w-max"},{children:[(0,o.jsx)("p",Ga({className:"text-base text-black"},{children:e.name})),(0,o.jsx)("button",Ga({onClick:function(){return t=e.userId,Ha(void 0,void 0,void 0,(function(){var e;return za(this,(function(r){switch(r.label){case 0:return[4,Vo("waitingRoom/approveUsers",{user_id:t})];case 1:return(e=r.sent()).status?(0,l.Am)(n("left-panel.menus.notice.user-approved",{name}),{type:"info"}):(0,l.Am)(n(e.msg),{type:"error"}),[2]}}))}));var t},className:"text-xs text-white py-[1px] px-2 rounded-lg transition ease-in bg-primaryColor hover:bg-secondaryColor"},{children:n("left-panel.approve")})),(0,o.jsx)("button",Ga({onClick:function(){return r(e.userId,!1)},className:"text-xs text-white py-[1px] px-2 rounded-lg transition ease-in bg-red-600 hover:bg-red-800 ml-2"},{children:n("left-panel.reject")})),(0,o.jsx)("button",Ga({onClick:function(){return r(e.userId,!0)},className:"text-xs text-white py-[1px] px-2 rounded-lg transition ease-in bg-red-600 hover:bg-red-800 ml-2"},{children:n("waiting-room.reject-and-block-user")}))]}),e.userId)}))}))}))]}))};var qa=function(){return qa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},qa.apply(this,arguments)},$a=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Ja=function(){var e=(0,Qt.$)().t,t=Ht(),n=zt(E.selectAll),r=$a((0,a.useState)(!0),2),i=r[0],s=r[1],l=$a((0,a.useState)(),2),c=l[0],u=l[1];(0,a.useEffect)((function(){if(n.length){var e=n.filter((function(e){return e.metadata.wait_for_approval}));u(e)}}),[n]);var d=function(){s(!1),t(xe(!1))};return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Kt.u,qa({appear:!0,show:i,as:a.Fragment},{children:(0,o.jsx)(Zt.V,qa({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:d},{children:(0,o.jsxs)("div",qa({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(Kt.u.Child,qa({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(Zt.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",qa({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(Kt.u.Child,qa({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",qa({className:"inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",qa({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return d()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(Zt.V.Title,qa({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 text-left mb-2"},{children:e("waiting-room.modal-title")})),(0,o.jsx)("hr",{}),(0,o.jsxs)("div",qa({className:"mt-6"},{children:[(0,o.jsx)(Ua,{}),(0,o.jsx)(Va,{waitingParticipants:null!==c&&void 0!==c?c:[]}),(0,o.jsx)(Qa,{waitingParticipants:null!==c&&void 0!==c?c:[]})]}))]}))}))]}))}))}))})};const Xa=function(e){var t=(0,a.useRef)();return(0,a.useEffect)((function(){t.current=e})),t.current};var Ya=n(60994),Ka=n(86487),Za="user",ei=function(){return ei=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ei.apply(this,arguments)},ti=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const ni=function(e){var t=e.name,n=e.id,r=ti((0,Ka.c)((function(){return{type:Za,item:{name:t,id:n},collect:function(e){return{isDragging:e.isDragging(),handlerId:e.getHandlerId()}}}})),2),a=r[0].isDragging,i=r[1],s=a?.4:1;return(0,o.jsx)("div",ei({ref:i,style:{opacity:s},className:"userBox text-sm sm:text-base text-black bg-white border-b border-solid border-black/80 w-full px-2 py-1 cursor-move"},{children:t}))};var ri=function(){return ri=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ri.apply(this,arguments)},oi=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},ai=function(e){var t=e.roomId,n=e.name,r=e.users,a=Ht(),i=oi((0,Ya.L)((function(){return{accept:Za,drop:function(e){a(Pt({id:e.id,roomId:t}))},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}})),2),s=i[0],l=s.canDrop,c=s.isOver,u=i[1],d=l&&c,f="#fff";return d?f="#004D90":l&&(f="#24AEF7"),(0,o.jsxs)("div",ri({ref:u,style:{backgroundColor:f},className:"roomBox scrollBar scrollBar2 overflow-hidden overflow-y-auto h-60 w-full sm:w-[13rem] lg:w-[13.2rem] xl:w-[13.75rem] mr-4 lg:mr-6 mb-2 sm:mb-6  border border-solid border-black"},{children:[(0,o.jsx)("p",ri({className:"text-sm sm:text-base  px-2 py-1 border-b-2 border-solid\n        ".concat(d||l?"text-white border-white":"text-black border-black")},{children:n})),r.map((function(e){return(0,o.jsx)("div",{children:(0,o.jsx)(ni,{name:e.name,id:e.id})},e.id)}))]}))},ii=function(){return ii=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ii.apply(this,arguments)},si=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},li=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},ci=(0,qt.P1)((function(e){return e.breakoutRoom.droppedUser}),(function(e){return e}));const ui=function(){var e,t,n=(0,Qt.$)().t,r=Ht(),i=zt(E.selectAll),s=zt(ci),c=si((0,a.useState)(1),2),u=c[0],d=c[1],f=Xa(u),p=si((0,a.useState)(15),2),m=p[0],h=p[1],v=si((0,a.useState)(null!==(t=null===(e=Gt.getState().session.currentRoom.metadata)||void 0===e?void 0:e.welcome_message)&&void 0!==t?t:""),2),x=v[0],b=v[1],y=si((0,a.useState)(),2),g=y[0],w=y[1],j=si((0,a.useState)([]),2),S=j[0],k=j[1],_=si(Mt(),2),N=_[0],C=_[1],T=C.isLoading,P=C.data;(0,a.useEffect)((function(){return function(){r(Pt({id:"",roomId:0}))}}),[r]),(0,a.useEffect)((function(){if(S.length!==i.length){var e=[];i.forEach((function(t){var n=S.filter((function(e){return e.id===t.userId}));n.length?e.push(n[0]):e.push({id:t.userId,name:t.name,roomId:0,joined:!1})})),k(e)}}),[i,S]),(0,a.useEffect)((function(){if(!(u===f||u>f)){var e=[];i.forEach((function(t){e.push({id:t.userId,name:t.name,roomId:0,joined:!1})})),k(e)}}),[i,u,f]),(0,a.useEffect)((function(){for(var e=[{id:0,name:n("breakout-room.main-room")}],t=0;t<u;t++)e.push({id:t+1,name:n("breakout-room.new-room",{num:t+1})});w(e)}),[u]),(0,a.useEffect)((function(){if(""!==s.id){var e=S.map((function(e){return e.id===s.id&&(e.roomId=s.roomId),e}));k(e)}}),[s]),(0,a.useEffect)((function(){!T&&P&&(P.status?((0,l.Am)(n("breakout-room.rooms-created"),{type:"info"}),r(ge(!1))):(0,l.Am)(n(P.msg),{type:"error"}))}),[T,P]);return(0,o.jsxs)("div",ii({className:"break-out-room-main-area"},{children:[(0,o.jsxs)("div",ii({className:"row flex flex-wrap justify-start items-end"},{children:[function(){for(var e,t,r,a,i=null!==(a=null===(r=null===(t=null===(e=Gt.getState().session.currentRoom.metadata)||void 0===e?void 0:e.room_features)||void 0===t?void 0:t.breakout_room_features)||void 0===r?void 0:r.allowed_number_rooms)&&void 0!==a?a:6,s=[],l=0;l<i;l++)s.push((0,o.jsx)("option",ii({value:l+1},{children:l+1}),l));return(0,o.jsxs)("div",ii({className:"numbers-of-room w-full sm:w-56 mb-4 sm:mr-10"},{children:[(0,o.jsx)("label",ii({className:"block text-base text-black mb-1",htmlFor:"breakout-room-number"},{children:n("breakout-room.num-rooms")})),(0,o.jsx)("select",ii({className:"w-full block outline-none border border-solid rounded p-1 h-9",id:"breakout-room-number",onChange:function(e){return d(Number(e.currentTarget.value))}},{children:s}))]}))}(),(0,o.jsxs)("div",ii({className:"room-durations w-full sm:w-56 mb-4"},{children:[(0,o.jsx)("label",ii({className:"block text-base text-black mb-1",htmlFor:"breakout-room-duration"},{children:n("breakout-room.duration")})),(0,o.jsx)("input",{className:"w-full block outline-none border border-solid rounded p-1 h-9",id:"breakout-room-duration",type:"number",value:m,onChange:function(e){return h(Number(e.currentTarget.value))}})]}))]})),(0,o.jsxs)("div",ii({className:"row flex flex-wrap justify-between items-end"},{children:[(0,o.jsxs)("div",ii({className:"room-welcome-messages w-full sm:max-w-[30.5rem] mb-4 sm:mr-10"},{children:[(0,o.jsx)("label",ii({className:"block text-base text-black mb-1",htmlFor:"breakout-room-welcome"},{children:n("breakout-room.welcome-msg")})),(0,o.jsx)("textarea",{className:"w-full block outline-none border border-solid rounded p-2 min-h-[60px]",id:"breakout-room-welcome",onChange:function(e){return b(e.currentTarget.value)},value:x})]})),(0,o.jsx)("div",ii({className:"random-room-select mb-4 mr-6"},{children:(0,o.jsx)("button",ii({className:"text-base text-primaryColor",onClick:function(){if(S&&g){var e=li([],si(S),!1),t=li([],si(g),!1);t.shift();for(var n=0;n<e.length;n++){var r=Math.floor(Math.random()*t.length);e[n].roomId=t[r].id}k(e)}}},{children:n("breakout-room.random-selection")}))}))]})),(0,o.jsx)("div",ii({className:"draggable-room-area overflow-hidden clear-both flex flex-wrap"},{children:null===g||void 0===g?void 0:g.map((function(e){return(0,o.jsx)("div",ii({className:"room-box-wrap w-[calc(50%-6px)] m-[3px] sm:m-0 sm:w-auto"},{children:(0,o.jsx)(ai,{roomId:e.id,name:e.name,users:S.filter((function(t){return t.roomId===e.id}))})}),e.id)}))})),(0,o.jsx)("div",ii({className:"pb-3 pt-4 bg-gray-50 text-right mt-4"},{children:(0,o.jsx)("button",ii({className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primaryColor hover:bg-secondaryColor focus:outline-none focus:ring-2 focus:ring-offset-2 focus:bg-secondaryColor",onClick:function(){var e=[];(null===g||void 0===g||g.forEach((function(t){if(0!==t.id){var n=S.filter((function(e){return e.roomId===t.id}));if(n.length){var r={id:"".concat(t.id),title:t.name,users:n,duration:m,started:!1,created:Date.now()};e.push(r)}}})),e.length)?N({duration:m,welcome_msg:x,rooms:e}):(0,l.Am)(n("breakout-room.need-one-user"),{type:"error"})}},{children:n("breakout-room.start")}))}))]}))};var di=function(){return di=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},di.apply(this,arguments)},fi=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const pi=function(){var e=(0,Qt.$)().t,t=fi((0,a.useState)(""),2),n=t[0],r=t[1],i=fi((0,a.useState)(!1),2),s=i[0],c=i[1],u=fi(Wt(),2),d=u[0],f=u[1],p=f.isLoading,m=f.data;(0,a.useEffect)((function(){c(!!p)}),[p]),(0,a.useEffect)((function(){m&&(m.status?((0,l.Am)(e("breakout-room.broadcast-msg-success"),{type:"info"}),r("")):(0,l.Am)(e(m.msg),{type:"error"}))}),[m]);return(0,o.jsxs)("div",di({className:"broadcasting-message pb-4 mb-4 border-b border-solid border-primaryColor/50 flex flex-wrap items-end"},{children:[(0,o.jsx)("textarea",{value:n,onChange:function(e){return r(e.currentTarget.value)},className:"w-full sm:w-[calc(100%-12rem)] block outline-none border border-solid border-primaryColor rounded p-2 min-h-[60px]"}),(0,o.jsx)("button",di({onClick:function(){""!==n&&d({msg:n})},disabled:s,className:"inline-flex w-44 sm:ml-4 mt-2 justify-center px-3 py-1 text-sm font-medium text-white bg-primaryColor rounded-md hover:bg-secondaryColor focus:outline-none"},{children:e("breakout-room.broadcast-msg")}))]}))};var mi=n(6512),hi=function(){return hi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},hi.apply(this,arguments)},vi=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const xi=function(e){var t=e.breakoutRoomId,n=(0,Qt.$)().t,r=vi(Lt(),2),i=r[0],s=r[1],c=s.isLoading,u=s.data,d=vi((0,a.useState)(!1),2),f=d[0],p=d[1];(0,a.useEffect)((function(){p(!!c)}),[c]),(0,a.useEffect)((function(){u&&(u.status?(0,l.Am)(n("breakout-room.room-ended"),{type:"info"}):(0,l.Am)(n(u.msg),{type:"error"}))}),[u]);return(0,o.jsx)("div",hi({className:"end-room-btn"},{children:(0,o.jsx)("button",hi({className:"text-center py-1 px-3 mt-1 text-xs transition ease-in bg-brandRed hover:bg-brandRed/90 text-white font-semibold rounded-lg",onClick:function(){i(t)},disabled:f},{children:n("breakout-room.end-room")}))}))};var bi=function(){return bi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},bi.apply(this,arguments)};const yi=function(e){var t=e.users,n=(0,Qt.$)().t;return(0,o.jsx)("div",bi({className:""},{children:t.map((function(e){return(0,o.jsxs)("p",bi({className:"inline-block pr-2 mr-2 border-r border-solid border-black leading-4 last:border-none last:mr-0 last:pr-0"},{children:[e.name," (",e.joined?n("breakout-room.user-joined"):n("breakout-room.not-joined"),")"]}),e.id)}))}))};var gi=function(){return gi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},gi.apply(this,arguments)},wi=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const ji=function(e){var t=e.duration,n=e.created,r=wi((0,a.useState)("00:00"),2),i=r[0],s=r[1];return(0,a.useEffect)((function(){var e,r,o,a=1e3*n,i=setInterval((function(){e=60*t-((Date.now()-a)/1e3|0),s((r=(r=e/60|0)<10?"0"+r:r)+":"+(o=(o=e%60|0)<10?"0"+o:o)),e<=0&&s("00:00")}),1e3);return function(){i&&clearInterval(i)}}),[t,n]),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",gi({className:"timer text-xs md:text-sm border border-solid border-primaryColor sm:py-[2px] px-3 rounded-br-lg -mt-[1px] -ml-[1px]"},{children:i}))})};var Si=function(){return Si=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Si.apply(this,arguments)},ki=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const _i=function(e){var t=e.breakoutRoomId,n=(0,Qt.$)().t,r=ki((0,a.useState)(!1),2),i=r[0],s=r[1],c=ki((0,a.useState)(""),2),u=c[0],d=c[1],f=ki(Ut(),2),p=f[0],m=f[1],h=m.isLoading,v=m.data;(0,a.useEffect)((function(){s(!!h)}),[h]),(0,a.useEffect)((function(){var e;if(!h&&v){if(!v.status)return void(0,l.Am)(n(v.msg),{type:"error"});d(null!==(e=v.token)&&void 0!==e?e:"")}}),[v,h]),(0,a.useEffect)((function(){if(""!==u){var e=new URLSearchParams(window.location.search);e.set("access_token",u);var t=location.protocol+"//"+location.host+window.location.pathname+"?"+e.toString();window.open(t,"_blank")||(0,l.Am)(n("breakout-room.open-tab-error"),{type:"error"})}}),[u]);return(0,o.jsx)("div",Si({className:"join-btn mr-4"},{children:(0,o.jsx)("button",Si({className:"text-center py-1 px-3 mt-1 text-xs transition ease-in bg-primaryColor hover:bg-secondaryColor text-white font-semibold rounded-lg",onClick:function(){var e,n;p({breakout_room_id:t,user_id:null!==(n=null===(e=Gt.getState().session.currentUser)||void 0===e?void 0:e.userId)&&void 0!==n?n:""})},disabled:i},{children:n("breakout-room.join")}))}))};var Ni=function(){return Ni=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ni.apply(this,arguments)},Ci=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Ti=function(e){var t=e.breakoutRoomId,n=(0,Qt.$)().t,r=Ci((0,a.useState)(5),2),i=r[0],s=r[1],c=Ci((0,a.useState)(!1),2),u=c[0],d=c[1],f=Ci(Dt(),2),p=f[0],m=f[1],h=m.isLoading,v=m.data;(0,a.useEffect)((function(){d(!!h)}),[h]),(0,a.useEffect)((function(){v&&(v.status?(0,l.Am)(n("breakout-room.duration-extended"),{type:"info"}):(0,l.Am)(n(v.msg),{type:"error"}))}),[v]);return(0,o.jsxs)("div",Ni({className:"extend-time-wrapper flex items-center mr-2 mb-2"},{children:[(0,o.jsx)("input",{value:i,onChange:function(e){return s(Number(e.currentTarget.value))},placeholder:n("breakout-room.extend-duration"),className:"w-full max-w-[100px] sm:max-w-[140px] block outline-none border border-solid border-secondaryColor rounded py-1 px-2 h-9"}),(0,o.jsx)("button",Ni({onClick:function(){p({breakout_room_id:t,duration:i})},disabled:u,className:"ml-2 sm:ml-4 w-[180px] text-center py-1 px-3 h-8 text-xs transition ease-in bg-primaryColor hover:bg-secondaryColor text-white font-semibold rounded-lg"},{children:n("breakout-room.extend-duration")}))]}))};var Ei=function(){return Ei=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ei.apply(this,arguments)};const Pi=function(){var e=(0,Qt.$)().t,t=Ft(void 0,{pollingInterval:1e4}),n=t.data,r=t.isLoading,i=(0,a.useMemo)((function(){if(n&&n.rooms){var e=n.rooms.slice();return e.sort((function(e,t){return t.title.localeCompare(e.title)})),e}}),[n]),s=function(t){return(0,o.jsx)(mi.p,{children:function(n){var r=n.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(mi.p.Button,Ei({className:"flex w-full justify-between rounded-lg transition ease-in bg-secondaryColor px-4 py-2 text-left text-sm font-medium text-white hover:bg-primaryColor outline-none"},{children:[(0,o.jsx)("p",{children:t.title}),(0,o.jsxs)("div",Ei({className:"flex items-center"},{children:[t.started?(0,o.jsx)(ji,{duration:t.duration,created:t.created}):e("breakout-room.not-started"),(0,o.jsx)("svg",Ei({xmlns:"http://www.w3.org/2000/svg",className:"".concat(r?"rotate-180 transform":""," h-5 w-5 ml-6 text-white"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2"},{children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}))]}))]})),(0,o.jsxs)(mi.p.Panel,Ei({className:"sm:px-4 py-6 text-sm text-gray-500"},{children:[(0,o.jsxs)("div",Ei({className:"row flex flex-wrap items-center justify-between mb-4"},{children:[(0,o.jsx)(Ti,{breakoutRoomId:t.id}),(0,o.jsxs)("div",Ei({className:"row flex mb-2"},{children:[(0,o.jsx)(_i,{breakoutRoomId:t.id}),(0,o.jsx)(xi,{breakoutRoomId:t.id})]}))]})),(0,o.jsx)(yi,{users:t.users})]}))]})}})};return(0,o.jsxs)("div",Ei({className:"breakout-room-list-wrapper min-h-[90px] relative"},{children:[r?(0,o.jsx)("div",Ei({className:"loading absolute text-center top-1/2 -translate-y-1/2 z-[999] left-0 right-0 m-auto"},{children:(0,o.jsxs)("div",Ei({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]}))})):null,null===i||void 0===i?void 0:i.map((function(e){return(0,o.jsx)("div",Ei({className:"breakout-room-list-item my-1"},{children:s(e)}),e.id)}))]}))};var Ai=function(){return Ai=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ai.apply(this,arguments)},Ri=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Oi=function(){var e=(0,Qt.$)().t,t=Ht(),n=Ri((0,a.useState)(!1),2),r=n[0],i=n[1],s=Ri(Bt(),2),c=s[0],u=s[1],d=u.isLoading,f=u.data;(0,a.useEffect)((function(){i(!!d)}),[d]),(0,a.useEffect)((function(){f&&(f.status?((0,l.Am)(e("breakout-room.end-all-success"),{type:"info"}),t(ge(!1))):(0,l.Am)(e(f.msg),{type:"error"}))}),[f]);return(0,o.jsxs)("div",Ai({className:"manage-breakout-room-wrap"},{children:[(0,o.jsx)(pi,{}),(0,o.jsx)(Pi,{}),(0,o.jsx)("div",Ai({className:"btn pb-3 pt-4 bg-gray-50 flex items-end justify-end"},{children:(0,o.jsx)("button",Ai({className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primaryColor hover:bg-secondaryColor focus:outline-none focus:ring-2 focus:ring-offset-2 focus:bg-secondaryColor",onClick:function(){c()},disabled:r},{children:e("breakout-room.end-all")}))}))]}))};var Ii=function(){return Ii=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ii.apply(this,arguments)},Fi=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Mi=function(){var e,t=(0,Qt.$)().t,n=Ht(),r=null===(e=Gt.getState().session.currentRoom.metadata)||void 0===e?void 0:e.room_features.breakout_room_features.is_active,i=Fi((0,a.useState)(!0),2),s=i[0],l=i[1];return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Kt.u,Ii({appear:!0,show:s,as:a.Fragment},{children:(0,o.jsx)(Zt.V,Ii({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:function(){return!1},static:!1},{children:(0,o.jsxs)("div",Ii({className:"min-h-screen px-4 text-center flex items-center justify-center"},{children:[(0,o.jsx)(Kt.u.Child,Ii({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(Zt.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",Ii({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(Kt.u.Child,Ii({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Ii({className:"inline-block w-full max-w-5xl h-full p-4 md:p-6 my-16 overflow-hidden text-left transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",Ii({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return l(!1),void n(ge(!1))}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(Zt.V.Title,Ii({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 text-left mb-2"},{children:t("breakout-room.modal-title")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",Ii({className:"mt-2"},{children:r?(0,o.jsx)(Oi,{}):(0,o.jsx)(ui,{})}))]}))}))]}))}))}))})};var Di=function(){return Di=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Di.apply(this,arguments)},Ui=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Li=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Bi=(0,qt.P1)((function(e){return e.bottomIconsActivity.showLockSettingsModal}),(function(e){return e})),Wi=(0,qt.P1)((function(e){return e.session.isActiveRtmpBroadcasting}),(function(e){return e})),Vi=(0,qt.P1)((function(e){return e.bottomIconsActivity.showRtmpModal}),(function(e){return e})),Gi=(0,qt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.shared_note_pad_features.is_active}),(function(e){return e})),Hi=(0,qt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.external_media_player_features.is_active}),(function(e){return e})),zi=(0,qt.P1)((function(e){return e.bottomIconsActivity.showExternalMediaPlayerModal}),(function(e){return e})),Qi=(0,qt.P1)((function(e){return e.bottomIconsActivity.showManageWaitingRoomModal}),(function(e){return e})),qi=(0,qt.P1)((function(e){return e.bottomIconsActivity.showManageBreakoutRoomModal}),(function(e){return e}));const $i=function(){var e,t,n=Gt.getState().session,r=Ht(),a=(0,Qt.$)().t,i=zt(Bi),s=zt(Gi),c=zt(Vi),u=zt(Wi),d=zt(Hi),f=zt(zi),p=zt(Qi),m=zt(qi),h=null===(t=null===(e=Gt.getState().session.currentRoom)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.room_features;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",Di({className:"menu relative z-10"},{children:(0,o.jsx)(Fr.v,{children:function(e){var t=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Fr.v.Button,Di({className:"footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] flex items-center justify-center cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-menu-horizontal primaryColor text-[3px] lg:text-[5px]"})})),(0,o.jsx)(Kt.u,Di({show:t,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsxs)(Fr.v.Items,Di({static:!0,className:"origin-bottom-left sm:-left-20 right-0 sm:right-auto z-[9999] absolute mt-2 w-60 bottom-[48px] rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[(null===h||void 0===h?void 0:h.allow_rtmp)?(0,o.jsx)("div",Di({className:"py-1",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:(0,o.jsxs)("button",Di({className:"footer-podcast-button text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){r(be(!0))}},{children:[u?(0,o.jsxs)("div",Di({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]})):null,(0,o.jsx)("i",{className:"pnm-broadcasting text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),a(u?"footer.icons.stop-rtmp-broadcasting":"footer.icons.start-rtmp-broadcasting")]}))})})):null,(0,o.jsx)("div",Di({className:"py-1",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:(0,o.jsxs)("button",Di({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){return Ui(void 0,void 0,void 0,(function(){var e,t;return Li(this,(function(r){switch(r.label){case 0:return e={sid:n.currentRoom.sid,room_id:n.currentRoom.room_id,user_id:"all",muted:!0},[4,Vo("muteUnmuteTrack",e)];case 1:return(t=r.sent()).status?(0,l.Am)(a("footer.notice.muted-all-microphone"),{toastId:"asked-status",type:"info"}):(0,l.Am)(a(t.msg),{toastId:"asked-status",type:"error"}),[2]}}))}))}},{children:[(0,o.jsx)("i",{className:"pnm-mic-mute text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),a("footer.menus.mute-all-users")]}))})})),(null===h||void 0===h?void 0:h.shared_note_pad_features.allowed_shared_note_pad)?(0,o.jsx)("div",Di({className:"py-1",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:(0,o.jsxs)("button",Di({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){return Ui(void 0,void 0,void 0,(function(){var e,t,n;return Li(this,(function(o){switch(o.label){case 0:return(e=null===(n=Gt.getState().session.currentRoom.metadata)||void 0===n?void 0:n.room_features.shared_note_pad_features.host)||s?[3,2]:[4,Vo("etherpad/create",{})];case 1:return(t=o.sent()).status?r(fe(!0)):(0,l.Am)(a(t.msg),{type:"error"}),[3,6];case 2:return!e||s?[3,4]:[4,Vo("etherpad/changeStatus",{room_id:Gt.getState().session.currentRoom.room_id,is_active:!0})];case 3:return(t=o.sent()).status?r(fe(!0)):(0,l.Am)(a(t.msg),{type:"error"}),[3,6];case 4:return e&&s?[4,Vo("etherpad/changeStatus",{room_id:Gt.getState().session.currentRoom.room_id,is_active:!1})]:[3,6];case 5:(t=o.sent()).status?r(fe(!1)):(0,l.Am)(a(t.msg),{type:"error"}),o.label=6;case 6:return[2]}}))}))}},{children:[(0,o.jsx)("i",{className:"pnm-notepad text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),a(s?"footer.menus.disable-shared-notepad":"footer.menus.enable-shared-notepad")]}))})})):null,(null===h||void 0===h?void 0:h.external_media_player_features.allowed_external_media_player)?(0,o.jsx)("div",Di({className:"py-1",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:(0,o.jsxs)("button",Di({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){return Ui(void 0,void 0,void 0,(function(){return Li(this,(function(e){return r(ye(!0)),[2]}))}))}},{children:[(0,o.jsx)("i",{className:"pnm-file-play text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),a(d?"footer.menus.stop-external-media-player":"footer.menus.start-external-media-player")]}))})})):null,(null===h||void 0===h?void 0:h.waiting_room_features.is_active)?(0,o.jsx)("div",Di({className:"py-1",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:(0,o.jsxs)("button",Di({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){r(xe(!0))}},{children:[(0,o.jsx)("i",{className:"pnm-waiting-room text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),a("footer.menus.manage-waiting-room")]}))})})):null,(null===h||void 0===h?void 0:h.breakout_room_features.is_allow)?(0,o.jsx)("div",Di({className:"py-1",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:(0,o.jsxs)("button",Di({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){r(ge(!0))}},{children:[(0,o.jsx)("i",{className:"pnm-breakout-room text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),a("footer.menus.manage-breakout-room")]}))})})):null,(0,o.jsx)("div",Di({className:"py-1",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:(0,o.jsxs)("button",Di({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){r(ve(!0))}},{children:[(0,o.jsx)("i",{className:"pnm-lock text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),a("footer.menus.room-lock-settings")]}))})}))]}))}))]})}})})),i?(0,o.jsx)(xa,{}):null,c?(0,o.jsx)(ka,{}):null,f?(0,o.jsx)(Ra,{}):null,p?(0,o.jsx)(Ja,{}):null,m?(0,o.jsx)(Mi,{}):null]})};var Ji=function(){return Ji=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ji.apply(this,arguments)},Xi=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Yi=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Ki=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Zi=(0,qt.P1)((function(e){return e.bottomIconsActivity.isActiveSharedNotePad}),(function(e){return e})),es=(0,qt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.shared_note_pad_features.is_active}),(function(e){return e})),ts=(0,qt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.shared_note_pad_features.visible}),(function(e){return e}));const ns=function(){var e,t,n,r=(0,Qt.$)().t,i=Ht(),s="desktop"===Gt.getState().session.userDeviceType,l=Ki((0,a.useState)("primaryColor"),2),c=l[0],u=l[1],d=zt(Zi),f=zt(es),p=zt(ts),m=Ki((0,a.useState)(!1),2),h=m[0],v=m[1],x=null===(t=null===(e=Gt.getState().session.currentUser)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.is_admin,b=null===(n=Gt.getState().session.currentUser)||void 0===n?void 0:n.isRecorder;(0,a.useEffect)((function(){i(fe(!!f))}),[f,i]),(0,a.useEffect)((function(){d?(u("secondaryColor"),Gt.getState().bottomIconsActivity.isActiveWhiteboard&&i(pe(!1)),b||i(le(!1))):u("primaryColor")}),[d,i]),(0,a.useEffect)((function(){f&&i(fe(!!p))}),[p]),(0,a.useEffect)((function(){var e,t,n;if(x&&!b){var r=Gt.getState().session.currentRoom;if(h||!(null===(e=r.metadata)||void 0===e?void 0:e.room_features.shared_note_pad_features.visible)){h||v(!0);var o=function(e){return Xi(void 0,void 0,void 0,(function(){return Yi(this,(function(t){switch(t.label){case 0:return[4,Vo("changeVisibility",e)];case 1:return t.sent(),[2]}}))}))};if(d&&!(null===(t=r.metadata)||void 0===t?void 0:t.room_features.shared_note_pad_features.visible)){var a={room_id:r.room_id,visible_white_board:!1,visible_notepad:!0};setTimeout((function(){o(a)}),500)}else if(!d&&(null===(n=r.metadata)||void 0===n?void 0:n.room_features.shared_note_pad_features.visible)){var i={room_id:r.room_id,visible_notepad:!1};o(i)}}else v(!0)}}),[d]);return(0,o.jsx)(o.Fragment,{children:f?(0,o.jsxs)("div",Ji({className:"shared-notepad h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] relative rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(s?"has-tooltip":""),onClick:function(){return Xi(void 0,void 0,void 0,(function(){return Yi(this,(function(e){return Gt.getState().bottomIconsActivity.isActiveScreenshare||i(fe(!d)),[2]}))}))}},{children:[(0,o.jsx)("span",Ji({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:r(d?"footer.icons.hide-shared-notepad":"footer.icons.show-shared-notepad")})),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("i",{className:"pnm-notepad ".concat(c," text-[12px] lg:text-[16px]")})})]})):null})};var rs=function(){return rs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},rs.apply(this,arguments)},os=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},as=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},is=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},ss=(0,qt.P1)((function(e){return e.bottomIconsActivity.isActiveWhiteboard}),(function(e){return e})),ls=(0,qt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.whiteboard_features.visible}),(function(e){return e}));const cs=function(){var e,t,n,r,i=(0,Qt.$)().t,s=Ht(),l="desktop"===Gt.getState().session.userDeviceType,c=is((0,a.useState)("primaryColor"),2),u=c[0],d=c[1],f=is((0,a.useState)(!1),2),p=f[0],m=f[1],h=zt(ss),v=zt(ls),x=null===(e=Gt.getState().session.currentRoom.metadata)||void 0===e?void 0:e.room_features.whiteboard_features.allowed_whiteboard,b=null===(n=null===(t=Gt.getState().session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.is_admin,y=null===(r=Gt.getState().session.currentUser)||void 0===r?void 0:r.isRecorder;(0,a.useEffect)((function(){h?(d("secondaryColor"),Gt.getState().bottomIconsActivity.isActiveSharedNotePad&&s(fe(!1)),y||s(le(!1))):d("primaryColor")}),[s,h]),(0,a.useEffect)((function(){x&&(v?s(pe(!0)):v||s(pe(!1)))}),[v]),(0,a.useEffect)((function(){var e,t,n;if(b&&!y){var r=Gt.getState().session.currentRoom;if(p||!(null===(e=r.metadata)||void 0===e?void 0:e.room_features.whiteboard_features.visible)){p||m(!0);var o=function(e){return os(void 0,void 0,void 0,(function(){return as(this,(function(t){switch(t.label){case 0:return[4,Vo("changeVisibility",e)];case 1:return t.sent(),[2]}}))}))};if(h&&!(null===(t=r.metadata)||void 0===t?void 0:t.room_features.whiteboard_features.visible)){var a={room_id:r.room_id,visible_white_board:!0,visible_notepad:!1};setTimeout((function(){o(a)}),500)}else if(!h&&(null===(n=r.metadata)||void 0===n?void 0:n.room_features.whiteboard_features.visible)){var i={room_id:r.room_id,visible_white_board:!1};o(i)}}else m(!0)}}),[h]);return(0,o.jsx)(o.Fragment,{children:x?(0,o.jsxs)("div",rs({className:"whiteboard h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] relative rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(l?"has-tooltip":""),onClick:function(){return os(void 0,void 0,void 0,(function(){return as(this,(function(e){return Gt.getState().bottomIconsActivity.isActiveScreenshare||s(pe(!h)),[2]}))}))}},{children:[(0,o.jsx)("span",rs({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:i(h?"footer.icons.hide-whiteboard":"footer.icons.show-whiteboard")})),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("i",{className:"pnm-whiteboard ".concat(u," text-[12px] lg:text-[16px]")})})]})):null})};var us=n(58206),ds=function(){return ds=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ds.apply(this,arguments)},fs=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},ps=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},ms=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},hs=(0,qt.P1)((function(e){return e.breakoutRoom.receivedInvitationFor}),(function(e){return e}));const vs=a.memo((function(e){var t=e.currentRoom,n=(0,Qt.$)().t,r=Ht(),i=zt(hs),s=ms(Ut(),2),c=s[0],u=s[1],d=u.isLoading,f=u.data,p=ms((0,a.useState)(""),2),m=p[0],h=p[1],v=ms((0,a.useState)(n("breakout-room.copy").toString()),2),x=v[0],b=v[1],y=ms((0,a.useState)(""),2),g=y[0],w=y[1],j=(0,a.useCallback)((function(){t.localParticipant.tracks.forEach((function(e){return fs(void 0,void 0,void 0,(function(){return ps(this,(function(n){switch(n.label){case 0:return e.track?e.track.source!==Oe.fQ.Source.Camera?[3,1]:(t.localParticipant.unpublishTrack(e.track),r(se(!1)),r(We("")),r(ke({type:"none"})),[3,3]):[2];case 1:return e.track.source!==Oe.fQ.Source.Microphone||e.isMuted?[3,3]:[4,e.track.unmute()];case 2:n.sent(),r(ie(!0)),n.label=3;case 3:return[2]}}))}))}))}),[t.localParticipant,r]);(0,a.useEffect)((function(){var e;if(!d&&f){if(!f.status)return void(0,l.Am)(n(f.msg),{type:"error"});w(null!==(e=f.token)&&void 0!==e?e:"")}}),[d,f]),(0,a.useEffect)((function(){if(""!==g){var e=new URLSearchParams(window.location.search);e.set("access_token",g);var t=location.protocol+"//"+location.host+window.location.pathname+"?"+e.toString(),n=window.open(t,"_blank");if(h(t),!n)return void h(t);r(At("")),j()}}),[g]);var S=function(){c({breakout_room_id:i,user_id:t.localParticipant.identity})},k=function(){(0,us.Z)(m),b(n("breakout-room.copied").toString())};return""!==i?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Kt.u,ds({appear:!0,show:""!==i,as:a.Fragment},{children:(0,o.jsx)(Zt.V,ds({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:function(){return!1},static:!1},{children:(0,o.jsxs)("div",ds({className:"min-h-screen px-4 text-center flex items-end justify-end"},{children:[(0,o.jsx)(Kt.u.Child,ds({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(Zt.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",ds({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(Kt.u.Child,ds({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",ds({className:"inline-block w-max h-full p-6 my-4 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg"},{children:[(0,o.jsxs)("button",ds({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return r(At("")),void j()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(Zt.V.Title,ds({as:"h3",className:"text-base font-medium leading-6 text-gray-900 text-left mb-2"},{children:n("breakout-room.invitation-title")})),(0,o.jsx)("hr",{}),(0,o.jsxs)("div",ds({className:"mt-2"},{children:[(0,o.jsx)("span",ds({className:"text-black text-sm"},{children:n("breakout-room.invitation-msg")})),""!==m?(0,o.jsxs)("div",ds({className:"invite-link"},{children:[(0,o.jsx)("label",ds({className:"text-black text-sm"},{children:n("breakout-room.join-text-label")})),(0,o.jsx)("input",{type:"text",readOnly:!0,value:m,className:"inline-block outline-none border border-solid rounded p-1 h-7 text-sm mx-1"}),(0,o.jsx)("button",ds({onClick:k,className:"text-center py-1 px-3 text-xs transition ease-in bg-primaryColor hover:bg-secondaryColor text-white font-semibold rounded-lg"},{children:x}))]})):null,(0,o.jsx)("div",ds({className:"button-section flex items-center justify-start"},{children:(0,o.jsx)("button",ds({className:"text-center py-1 px-3 mt-1 text-xs transition ease-in bg-primaryColor hover:bg-secondaryColor text-white font-semibold rounded-lg",onClick:S},{children:n("breakout-room.join")}))}))]}))]}))}))]}))}))}))}):null}));var xs=function(){return xs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xs.apply(this,arguments)};const bs=a.memo((function(e){var t,n,r=e.currentRoom,a=e.isRecorder,i=null===(n=null===(t=Gt.getState().session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.is_admin;return(0,o.jsx)("footer",xs({id:"main-footer",className:"h-[55px] lg:h-[60px] px-4 shadow-footer flex items-center justify-between",style:{display:a?"none":""}},{children:(0,o.jsxs)("div",xs({className:"footer-inner flex items-center justify-between w-full"},{children:[(0,o.jsxs)("div",xs({className:"footer-left w-52 flex items-center"},{children:[(0,o.jsx)(eo,{currentRoom:r}),(0,o.jsx)(No,{currentRoom:r})]})),(0,o.jsxs)("div",xs({className:"footer-middle flex items-center"},{children:[(0,o.jsx)(Mo,{}),(0,o.jsx)(Ao,{}),(0,o.jsx)(aa,{currentRoom:r}),(0,o.jsx)(Yo,{currentRoom:r}),(0,o.jsx)(cs,{}),(0,o.jsx)(ns,{}),(0,o.jsx)(da,{}),i?(0,o.jsx)($i,{}):null]})),(0,o.jsx)("div",{className:"footer-right w-52 hidden sm:flex items-center"}),(0,o.jsx)(vs,{currentRoom:r})]}))}))}));var ys=function(){return ys=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ys.apply(this,arguments)};const gs=a.memo((function(e){var t,n,r=e.onOpenAlert,a=null===(n=null===(t=Gt.getState().session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.is_admin,i=Ht(),s=(0,Qt.$)().t;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(Fr.v.Items,ys({static:!0,className:"origin-top-right z-10 absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[(0,o.jsx)("div",ys({className:"py-1",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:(0,o.jsxs)("button",ys({className:"text-gray-700 rounded group flex items-center py-2 px-4 text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){i(Ge(!0))}},{children:[(0,o.jsx)("i",{className:"pnm-settings text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),s("header.menus.settings")]}))})})),(0,o.jsx)("div",ys({className:"py-1",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:(0,o.jsxs)("button",ys({className:"text-gray-700 rounded group flex items-center py-2 px-4 text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){i(qe(!0))}},{children:[(0,o.jsx)("i",{className:"pnm-keyboard text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),s("header.menus.keyboard-shortcuts")]}))})})),(0,o.jsx)("div",ys({className:"py-1",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:(0,o.jsxs)("button",ys({className:"text-gray-700 rounded group flex items-center py-2 px-4 text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){r("logout")}},{children:[(0,o.jsx)("i",{className:"pnm-logout text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),s("header.menus.logout")]}))})})),a?(0,o.jsx)("div",ys({className:"py-1",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:(0,o.jsxs)("button",ys({className:"text-red-900 rounded group flex items-center py-2 px-4 text-sm text-left w-full transition ease-in",onClick:function(){r("end Room")}},{children:[(0,o.jsx)("i",{className:"pnm-call text-red-900 mr-2 transition ease-in "}),s("header.menus.end")]}))})})):null]}))})}));var ws=n(17969),js=function(){return js=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},js.apply(this,arguments)},Ss=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},ks=(0,qt.P1)((function(e){return e.roomSettings.activateWebcamsView}),(function(e){return e})),_s=(0,qt.P1)((function(e){return e.roomSettings.activeScreenSharingView}),(function(e){return e}));const Ns=function(){var e=Ht(),t=(0,Qt.$)().t,n=Ss((0,a.useState)(Gt.getState().roomSettings.roomVideoQuality),2),r=n[0],i=n[1];(0,a.useEffect)((function(){e(Je(r))}),[e,r]);var s=zt(ks),l=zt(_s),c=function(){e(He(!s))},u=function(){e(ze(!l))};return(0,o.jsx)("div",js({className:"mt-2"},{children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",js({className:"flex items-center justify-between mb-2"},{children:[(0,o.jsx)("label",js({htmlFor:"quality",className:"pr-4 w-full"},{children:t("header.room-settings.video-quality")})),(0,o.jsxs)("select",js({id:"quality",name:"quality",className:"mt-1 block py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:r,onChange:function(e){return i(Number(e.target.value))}},{children:[(0,o.jsx)("option",js({value:Oe.SF.LOW},{children:t("header.room-settings.low")})),(0,o.jsx)("option",js({value:Oe.SF.MEDIUM},{children:t("header.room-settings.medium")})),(0,o.jsx)("option",js({value:Oe.SF.HIGH},{children:t("header.room-settings.high")}))]}))]})),(0,o.jsxs)(fa.r.Group,{children:[(0,o.jsxs)("div",js({className:"flex items-center justify-between mb-2"},{children:[(0,o.jsx)(fa.r.Label,js({className:"pr-4 w-full"},{children:t("header.room-settings.show-webcams")})),(0,o.jsx)(fa.r,js({checked:s,onChange:c,className:"".concat(s?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat(s?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",js({className:"flex items-center justify-between"},{children:[(0,o.jsx)(fa.r.Label,js({className:"pr-4 w-full"},{children:t("header.room-settings.show-screen-share")})),(0,o.jsx)(fa.r,js({checked:l,onChange:u,className:"".concat(l?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat(l?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]}))]})]})}))};var Cs=function(){return Cs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Cs.apply(this,arguments)},Ts=(0,qt.P1)((function(e){return e.roomSettings.allowPlayAudioNotification}),(function(e){return e}));const Es=function(){var e=Ht(),t=(0,Qt.$)().t,n=zt(Ts),r=function(){e(Qe(!n))};return(0,o.jsx)("div",Cs({className:"mt-2"},{children:(0,o.jsx)(fa.r.Group,{children:(0,o.jsxs)("div",Cs({className:"flex items-center justify-between mb-2"},{children:[(0,o.jsx)(fa.r.Label,Cs({className:"pr-4 w-full"},{children:t("header.room-settings.allow-audio-notification")})),(0,o.jsx)(fa.r,Cs({checked:n,onChange:r,className:"".concat(n?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat(n?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]}))})}))};const Ps=[{code:"en",text:"English"},{code:"es-ES",text:"Espa\xf1ol"},{code:"fr-FR",text:"Fran\xe7ais"},{code:"pt-PT",text:"Portugu\xeas"},{code:"zh-CN",text:"\u7b80\u4f53\u4e2d\u6587"},{code:"zh-HK",text:"\u7e41\u9ad4\u4e2d\u6587"}];var As=function(){return As=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},As.apply(this,arguments)};const Rs=function(){var e=(0,Qt.$)(),t=e.t,n=e.i18n;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",As({className:"s"},{children:(0,o.jsx)("div",As({className:"grid"},{children:(0,o.jsxs)("div",As({className:"flex items-center justify-start"},{children:[(0,o.jsx)("label",As({htmlFor:"language",className:"w-2/5 block text-sm font-medium text-gray-700 mr-5"},{children:t("header.room-settings.language")})),(0,o.jsx)("select",As({id:"language",name:"language",value:n.languages[0],onChange:function(e){return n.changeLanguage(e.target.value)},className:"mt-1 block w-3/5 py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},{children:Ps.map((function(e){var t=e.code,n=e.text;return(0,o.jsx)("option",As({value:t},{children:n}),t)}))}))]}))}))}))})};var Os=function(){return Os=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Os.apply(this,arguments)},Is=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Fs=(0,qt.P1)((function(e){return e.roomSettings.isShowRoomSettingsModal}),(function(e){return e}));const Ms=function(){var e=Ht(),t=(0,Qt.$)().t,n=zt(Fs),r=Is((0,a.useState)({"header.room-settings.application":[{id:1,elm:(0,o.jsx)(Rs,{})}],"header.room-settings.data-savings":[{id:1,elm:(0,o.jsx)(Ns,{})}],"header.room-settings.notifications":[{id:1,elm:(0,o.jsx)(Es,{})}]}),1)[0],i=function(){e(Ge(!1))};var s=function(){return(0,o.jsx)("div",Os({className:"max-w-full"},{children:(0,o.jsxs)(ws.O.Group,Os({vertical:!0},{children:[(0,o.jsx)(ws.O.List,Os({className:"flex p-1 space-x-1 bg-primaryColor rounded-xl"},{children:Object.keys(r).map((function(e){return(0,o.jsx)(ws.O,Os({className:function(e){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(Boolean).join(" ")}("w-full py-1 text-xs sm:text-sm leading-5 font-medium text-secondaryColor rounded-lg outline-none","ring-white ring-opacity-60",e.selected?"bg-white shadow text-primaryColor":"hover:bg-white/[0.12] hover:text-white")}},{children:t(e)}),e)}))})),(0,o.jsx)(ws.O.Panels,Os({className:"mt-2"},{children:Object.values(r).map((function(e,t){return(0,o.jsx)(ws.O.Panel,Os({className:"bg-white rounded-xl p-3"},{children:(0,o.jsx)("ul",{children:e.map((function(e){return(0,o.jsx)("li",{children:e.elm},e.id)}))})}),t)}))}))]}))}))};return(0,o.jsx)(o.Fragment,{children:n?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Kt.u,Os({appear:!0,show:n,as:a.Fragment},{children:(0,o.jsx)(Zt.V,Os({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:i},{children:(0,o.jsxs)("div",Os({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(Kt.u.Child,Os({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(Zt.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",Os({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(Kt.u.Child,Os({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Os({className:"inline-block w-full h-96 max-w-xl py-6 px-4 lg:px-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",Os({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return i()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(Zt.V.Title,Os({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 mb-2"},{children:t("header.room-settings.title")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",Os({className:"mt-2"},{children:s()})),(0,o.jsx)("div",Os({className:"absolute inset-x-0 bottom-0 text-center text-xs"},{children:t("version",{pnm_version:"1.1.0",build:1655514222})}))]}))}))]}))}))}))}):null})};var Ds=function(){return Ds=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ds.apply(this,arguments)},Us=(0,qt.P1)((function(e){return e.roomSettings.isShowKeyboardShortcuts}),(function(e){return e}));const Ls=function(){var e=Ht(),t=(0,Qt.$)().t,n=zt(Us),r=function(){e(qe(!1))};return(0,o.jsx)(o.Fragment,{children:n?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Kt.u,Ds({appear:!0,show:n,as:a.Fragment},{children:(0,o.jsx)(Zt.V,Ds({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:r},{children:(0,o.jsxs)("div",Ds({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(Kt.u.Child,Ds({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(Zt.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",Ds({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(Kt.u.Child,Ds({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Ds({className:"inline-block w-full max-w-xl py-6 px-4 lg:px-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",Ds({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return r()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(Zt.V.Title,Ds({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 mb-2"},{children:t("header.keyboard-shortcuts.title")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",Ds({className:"mt-2"},{children:(0,o.jsxs)("table",Ds({className:"border-collapse border border-slate-500 w-full"},{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",Ds({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:(0,o.jsx)("strong",{children:t("header.keyboard-shortcuts.key-comb")})})),(0,o.jsx)("th",Ds({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:(0,o.jsx)("strong",{children:t("header.keyboard-shortcuts.actions")})}))]})}),(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",Ds({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + m"})),(0,o.jsx)("td",Ds({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base "},{children:t("header.keyboard-shortcuts.mute-unmute")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",Ds({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + a"})),(0,o.jsx)("td",Ds({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.start-audio")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",Ds({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + o"})),(0,o.jsx)("td",Ds({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.leave-audio")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",Ds({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + v"})),(0,o.jsx)("td",Ds({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.start-webcam")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",Ds({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + x"})),(0,o.jsx)("td",Ds({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.leave-webcam")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",Ds({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + u"})),(0,o.jsx)("td",Ds({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.show-hide-user-list")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",Ds({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + c"})),(0,o.jsx)("td",Ds({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.show-hide-chat")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",Ds({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + l"})),(0,o.jsx)("td",Ds({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.show-hide-lock-settings")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",Ds({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + s"})),(0,o.jsx)("td",Ds({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.show-hide-settings")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",Ds({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + w"})),(0,o.jsx)("td",Ds({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.show-hide-whiteboard")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",Ds({className:"pl-2 border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + r"})),(0,o.jsx)("td",Ds({className:"pl-2 border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.show-hide-hand")}))]})]})]}))}))]}))}))]}))}))}))}):null})};var Bs=function(){return Bs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Bs.apply(this,arguments)},Ws=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Vs=(0,qt.P1)((function(e){return e.bottomIconsActivity.isActiveParticipantsPanel}),(function(e){return e}));const Gs=function(e){var t=e.currentRoom,n=Ht(),r=Ws((0,a.useState)(Gt.getState().roomSettings.roomAudioVolume),2),i=r[0],s=r[1],l=Xa(i),c=zt(Vs);(0,a.useEffect)((function(){l&&i!==l&&(c?n($e(i)):t.participants.forEach((function(e){e.audioTracks.size>0&&e.setVolume(i)})))}),[i,l,n,c]);return(0,o.jsx)(Fr.v,{children:function(e){var t=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Fr.v.Button,Bs({className:"relative flex-shrink-0 p-2"},{children:(0,o.jsx)("div",Bs({className:"h-4 w-4 -mt-[2px]"},{children:i>0?(0,o.jsx)("i",{className:"pnm-speaker primaryColor"}):(0,o.jsx)("i",{className:"pnm-speaker-muted primaryColor"})}))})),(0,o.jsx)(Kt.u,Bs({show:t,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(Fr.v.Items,Bs({static:!0,className:"volume-popup-wrapper origin-top-right z-10 absolute right-0 top-4 mt-2 w-64 py-5 px-2 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:(0,o.jsxs)("section",Bs({className:"flex items-center"},{children:[(0,o.jsx)("input",{type:"range",min:0,max:1,step:.05,value:i,onChange:function(e){s(e.target.valueAsNumber)},className:"range flex-1"}),(0,o.jsx)("p",Bs({className:"w-10 text-center text-sm"},{children:Math.round(100*i)})),(0,o.jsx)("button",Bs({className:"w-5 h-5"},{children:i>0?(0,o.jsx)("i",{className:"pnm-speaker primaryColor"}):(0,o.jsx)("i",{className:"pnm-speaker-muted primaryColor"})}))]}))}))}))]})}})};var Hs=function(){return Hs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Hs.apply(this,arguments)},zs=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Qs=function(e){var t=e.duration,n=zs((0,a.useState)("00:00"),2),r=n[0],i=n[1];return(0,a.useEffect)((function(){var e,n,r,o,a=null===(e=Gt.getState().session.currentRoom.metadata)||void 0===e?void 0:e.started_at,s=a?1e3*a:Date.now();i("00:00");var l=setInterval((function(){n=60*t-((Date.now()-s)/1e3|0),i((r=(r=n/60|0)<10?"0"+r:r)+":"+(o=(o=n%60|0)<10?"0"+o:o)),n<=0&&i("00:00")}),1e3);return function(){l&&clearInterval(l)}}),[t]),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",Hs({className:"timer text-xs md:text-sm border border-solid border-primaryColor sm:py-[2px] px-3 rounded-lg mt-[2px] mr-[6px]"},{children:r}))})};var qs=function(){return qs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},qs.apply(this,arguments)},$s=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Js=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Xs=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Ys=(0,qt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_title}),(function(e){return e})),Ks=(0,qt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.room_duration}),(function(e){return e}));const Zs=a.memo((function(e){var t,n,r=e.currentRoom,i=zt(Ys),s=zt(Ks),c=(0,Qt.$)().t,u=Xs((0,a.useState)(""),2),d=u[0],f=u[1],p=Xs((0,a.useState)(!1),2),m=p[0],h=p[1],v=Xs((0,a.useState)(""),2),x=v[0],b=v[1],y=Xs((0,a.useState)(""),2),g=y[0],w=y[1],j=null!==(t=window.STATIC_ASSETS_PATH)&&void 0!==t?t:"./assets",S=null!==(n=window.CUSTOM_LOGO)&&void 0!==n?n:"".concat(j,"/imgs/main-logo.png");(0,a.useEffect)((function(){i&&f(i)}),[i]);var k=function(e){return void 0===e&&(e=!1),$s(void 0,void 0,void 0,(function(){var t,n,o;return Js(this,(function(a){switch(a.label){case 0:return h(!1),e?"logout"!==g?[3,1]:(r.disconnect(),[3,3]):[2];case 1:return"end Room"!==g?[3,3]:(t=Gt.getState().session,n={room_id:t.currentRoom.room_id},[4,Vo("endRoom",n)]);case 2:(o=a.sent()).status||(0,l.Am)(o.msg,{type:"error"}),a.label=3;case 3:return[2]}}))}))};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("header",qs({id:"main-header",className:"relative z-[99999] h-[50px] px-4 shadow-header flex items-center justify-between bg-white"},{children:[(0,o.jsx)("div",{className:"header-before-start absolute top-0 left-[-35px] w-[300px] pointer-events-none bg-cover bg-center h-full",style:{backgroundImage:'url("'.concat(j,'/imgs/header-before2.png")')}}),(0,o.jsx)("div",qs({className:"logo w-28 relative z-20"},{children:(0,o.jsx)("div",{className:"".concat((window.CUSTOM_LOGO,"h-[45px]")," header-logo h-full bg-contain bg-no-repeat"),style:{backgroundImage:'url("'.concat(S,'")')}})})),(0,o.jsx)("div",qs({className:"middle flex-auto relative z-20"},{children:(0,o.jsx)("h2",qs({className:"header-title text-base text-black leading-[1] text-center"},{children:d}))})),(0,o.jsxs)("div",qs({className:"dark w-28 flex items-center justify-end relative z-20 -right-3"},{children:[s&&s>0?(0,o.jsx)(Qs,{duration:s}):null,(0,o.jsx)(Gs,{currentRoom:r}),(0,o.jsx)(Fr.v,{children:function(e){var t=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Fr.v.Button,qs({className:"relative flex-shrink-0 p-2"},{children:(0,o.jsx)("div",qs({className:"h-5 w-5 rotate-90 "},{children:(0,o.jsx)("i",{className:"pnm-menu-small"})}))})),(0,o.jsx)(Kt.u,qs({show:t,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(gs,{onOpenAlert:function(e){return function(e){w(e),"logout"===e?b(c("header.menus.alert.logout")):"end Room"===e&&b(c("header.menus.alert.end")),h(!0)}(e)}})}))]})}})]})),(0,o.jsx)("div",{className:"header-before-end absolute top-0 right-[-100px] w-[350px] lg:w-[380px] rotate-[156deg] pointer-events-none bg-cover bg-center h-full",style:{backgroundImage:'url("'.concat(j,'/imgs/header-before2.png")')}}),m?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Kt.u,qs({appear:!0,show:m,as:a.Fragment},{children:(0,o.jsx)(Zt.V,qs({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:k},{children:(0,o.jsxs)("div",qs({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(Kt.u.Child,qs({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(Zt.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",qs({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(Kt.u.Child,qs({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",qs({className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",qs({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return k()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(Zt.V.Title,qs({as:"h3",className:"text-lg font-medium leading-6 text-gray-900"},{children:c("header.menus.alert.confirm")})),(0,o.jsx)("div",qs({className:"mt-2"},{children:(0,o.jsx)("p",qs({className:"text-sm text-gray-500"},{children:x}))})),(0,o.jsxs)("div",qs({className:"mt-4"},{children:[(0,o.jsx)("button",qs({className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 mr-4 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return k(!0)}},{children:c("ok")})),(0,o.jsx)("button",qs({type:"button",className:"inline-flex justify-center px-4 py-2 text-sm font-medium bg-primaryColor hover:bg-secondaryColor text-white border border-transparent rounded-md focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return k(!1)}},{children:c("close")}))]}))]}))}))]}))}))}))}):null]})),(0,o.jsx)(Ms,{}),(0,o.jsx)(Ls,{})]})}));var el=function(){return el=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},el.apply(this,arguments)};const tl=function(e){var t=e.participant;return(0,o.jsx)("div",el({className:"thumb h-[22px] xl:h-[30px] w-[22px] xl:w-[30px] mr-2 rounded-full overflow-hidden bg-primaryColor flex items-center justify-center text-white text-xs xl:text-sm"},{children:t.metadata.profile_pic?(0,o.jsx)("img",{src:t.metadata.profile_pic,alt:t.name}):(0,o.jsx)(o.Fragment,{children:t.name.slice(0,2).toUpperCase()})}))};var nl=function(){return nl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},nl.apply(this,arguments)};const rl=function(e){var t=e.name,n=e.isCurrentUser;return(0,o.jsxs)("p",nl({className:"text-[11px] xl:text-[13px] primaryColor"},{children:[t," ",n?" (me)":null]}))};var ol=function(){return ol=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ol.apply(this,arguments)};const al=function(e){var t=e.userId,n=zt((function(e){return E.selectById(e,t)}));return(0,o.jsx)(o.Fragment,{children:(null===n||void 0===n?void 0:n.metadata.raised_hand)?(0,o.jsx)("div",ol({className:"hand mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-raise-hand text-[#ffbd40] text-[10px]"})})):null})};var il=function(){return il=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},il.apply(this,arguments)},sl=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},ll=(0,qt.P1)((function(e){return e.roomSettings.roomAudioVolume}),(function(e){return e}));const cl=function(e){var t=e.userId,n=e.remoteParticipant,r=sl((0,a.useState)(1),2),i=r[0],s=r[1],l=Xa(i),c=zt((function(e){return E.selectById(e,t)})),u=zt(ll);(0,a.useEffect)((function(){(null===n||void 0===n?void 0:n.audioTracks.size)&&s(u)}),[u,n]),(0,a.useEffect)((function(){if(l&&i!==l&&n)try{n.getVolume()!==i&&n.audioTracks.size>0&&n.setVolume(i)}catch(e){}}),[i,l,n]);return(null===c||void 0===c?void 0:c.audioTracks)?c.isMuted?(0,o.jsx)("div",il({className:"mic muted mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-mic-mute secondaryColor text-[10px]"})})):n?(0,o.jsx)("div",il({className:"mic mr-2 cursor-pointer"},{children:(0,o.jsx)(Fr.v,{children:function(e){var t=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Fr.v.Button,{children:(0,o.jsx)("i",{className:"pnm-mic-unmute secondaryColor text-[10px]"})}),(0,o.jsx)(Kt.u,il({show:t,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100 relative z-10",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(Fr.v.Items,il({static:!0,className:"volume-popup-wrapper origin-top-right z-10 absolute -right-6 -top-2 mt-2 w-48 xl:w-60 py-5 px-2 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:(0,o.jsxs)("section",il({className:"flex items-center"},{children:[(0,o.jsx)("input",{type:"range",min:0,max:1,step:.05,value:i,onChange:function(e){s(e.target.valueAsNumber)},className:"range flex-1"}),(0,o.jsx)("p",il({className:"w-10 text-center text-sm"},{children:Math.round(100*i)})),(0,o.jsx)("button",il({className:"w-5 h-5"},{children:(0,o.jsx)("i",{className:"pnm-speaker primaryColor"})}))]}))}))}))]})}})})):(0,o.jsx)("div",il({className:"mic mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-mic-unmute secondaryColor text-[10px]"})})):null};var ul=function(){return ul=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ul.apply(this,arguments)};const dl=function(e){var t=e.userId,n=zt((function(e){return E.selectById(e,t)}));return(0,o.jsx)(o.Fragment,{children:(null===n||void 0===n?void 0:n.videoTracks)?(0,o.jsx)("div",ul({className:"mic mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-webcam secondaryColor text-[10px]"})})):null})};var fl=function(){return fl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},fl.apply(this,arguments)};const pl=function(e){var t=e.closeToast,n=(0,Qt.$)().t,r=Ht();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",fl({className:"text-black"},{children:n("polls.new-poll")})),(0,o.jsx)("div",fl({className:"button-section flex items-center justify-start"},{children:(0,o.jsx)("button",fl({className:"text-center py-1 px-3 mt-1 text-xs transition ease-in bg-primaryColor hover:bg-secondaryColor text-white font-semibold rounded-lg",onClick:function(){r(ce(!0)),r(Xe(1)),t&&t()}},{children:n("open")}))}))]})};var ml,hl,vl=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},xl=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},bl=function(e){var t=Te.selectAll(Gt.getState()),n=Gt.getState().session;t.filter((function(e){return"system"!==e.from.sid})).slice(-30).map((function(t){return vl(void 0,void 0,void 0,(function(){var r,o;return xl(this,(function(a){return r=t,o={type:Go.USER,body:r,to:e.body.from.userId,room_sid:n.currentRoom.sid,message_id:""},Il(JSON.stringify(o)),[2]}))}))}))},yl=function(e){Gt.getState().whiteboard.requestedWhiteboardData.requested||Gt.dispatch(st({requested:!0,sendTo:e.body.from.sid}))},gl=function(e){Gt.dispatch(U(e.body.msg))},wl=function(e){switch(e.body.type){case Ho.INFO:(0,l.Am)(e.body.msg,{toastId:"info-status",type:"info"});break;case Ho.ALERT:(0,l.Am)(e.body.msg,{toastId:"alert-status",type:"warning"})}},jl=function(e){Gt.dispatch(O({id:e.body.from.userId,changes:{visibility:e.body.msg}}))},Sl=function(e){var t=JSON.parse(e.body.msg);Gt.dispatch(pt(t.action)),"undefined"!==typeof t.seekTo&&Gt.dispatch(mt(t.seekTo))},kl=function(e){e.body.type===Ho.POLL_CREATED?((0,l.Am)((0,o.jsx)(pl,{}),{toastId:"info-status",type:"info",autoClose:!1}),Gt.dispatch(yt.util.invalidateTags(["List","PollsStats"]))):e.body.type===Ho.NEW_POLL_RESPONSE?Gt.dispatch(yt.util.invalidateTags([{type:"Count",id:e.body.msg},{type:"PollDetails",id:e.body.msg}])):e.body.type===Ho.POLL_CLOSED&&Gt.dispatch(yt.util.invalidateTags(["List","PollsStats"]))},_l=function(e){Gt.dispatch(At(e.body.msg)),Gt.dispatch(It.util.invalidateTags(["My_Rooms"]))},Nl=function(e){var t=JSON.parse(e);Gt.dispatch(ct(t))},Cl=!1,Tl=0,El=!1,Pl=function(){var e=Rl();(ml=new WebSocket(e)).onopen=function(){Cl=!0,function(){var e,t,n,r,o,a,i,s,l=Gt.getState().session,c=E.selectAll(Gt.getState()).filter((function(e){var t;return e.sid!==(null===(t=l.currentUser)||void 0===t?void 0:t.sid)}));if(c.length){c.sort((function(e,t){return e.joinedAt-t.joinedAt}));var u=c[0],d={type:Go.SYSTEM,room_sid:l.currentRoom.sid,message_id:"",to:u.sid,body:{type:Ho.SEND_CHAT_MSGS,from:{sid:null!==(t=null===(e=l.currentUser)||void 0===e?void 0:e.sid)&&void 0!==t?t:"",userId:null!==(r=null===(n=l.currentUser)||void 0===n?void 0:n.userId)&&void 0!==r?r:""},msg:""}};Il(JSON.stringify(d));var f={type:Go.SYSTEM,room_sid:l.currentRoom.sid,message_id:"",to:u.sid,body:{type:Ho.INIT_WHITEBOARD,from:{sid:null!==(a=null===(o=l.currentUser)||void 0===o?void 0:o.sid)&&void 0!==a?a:"",userId:null!==(s=null===(i=l.currentUser)||void 0===i?void 0:i.userId)&&void 0!==s?s:""},msg:""}};Il(JSON.stringify(f))}}(),Gt.dispatch(Q(!0)),hl&&(clearInterval(hl),hl=0,Tl=0)},ml.onclose=function(){Cl=!1,Gt.dispatch(Q(!1)),hl||El||(hl=setInterval((function(){Tl>10&&(clearInterval(hl),Tl=0),ml=void 0,Pl(),Tl++}),2e3))},ml.onerror=function(){console.log("Error in websocket")},ml.onmessage=function(e){Al(e)}},Al=function(e){if(e.data){var t=void 0;try{t=JSON.parse(e.data)}catch(n){return void console.log(e.data)}"USER"===t.type?function(e,t,n){if("CHAT"===e.type){e.message_id||(e.message_id=t),e.to=n,Gt.dispatch(Pe(e)),Gt.getState().bottomIconsActivity.isActiveChatPanel||Gt.dispatch(Se());var r=Gt.getState().roomSettings.selectedChatOption,o=Gt.getState().session.currentUser;e.isPrivate||"public"===r?e.isPrivate&&r!==e.from.userId&&e.from.userId!==(null===o||void 0===o?void 0:o.userId)&&Gt.dispatch(Ze({task:"ADD",id:e.from.userId})):Gt.dispatch(Ze({task:"ADD",id:"public"}))}}(t.body,t.message_id,t.to):"SYSTEM"===t.type?function(e){switch(e.body.type){case Ho.SEND_CHAT_MSGS:bl(e);break;case Ho.INIT_WHITEBOARD:yl(e);break;case Ho.RENEW_TOKEN:gl(e);break;case Ho.INFO:case Ho.ALERT:wl(e);break;case Ho.USER_VISIBILITY_CHANGE:jl(e);break;case Ho.EXTERNAL_MEDIA_PLAYER_EVENTS:Sl(e);break;case Ho.POLL_CREATED:case Ho.POLL_CLOSED:case Ho.NEW_POLL_RESPONSE:kl(e);break;case Ho.JOIN_BREAKOUT_ROOM:_l(e)}}(t):"WHITEBOARD"===t.type&&function(e){"SCENE_UPDATE"===e.type?Gt.dispatch(rt(e.msg)):"POINTER_UPDATE"===e.type?Gt.dispatch(ot(e.msg)):"ADD_WHITEBOARD_FILE"===e.type?Gt.dispatch(it(e.msg)):"PAGE_CHANGE"===e.type?Gt.dispatch(lt(Number(e.msg))):"ADD_WHITEBOARD_OFFICE_FILE"===e.type&&Nl(e.msg)}(t.body)}},Rl=function(){var e,t=new URL(window.PLUG_N_MEET_SERVER_URL),n=Gt.getState().session,r="ws://";"https:"===t.protocol&&(r="wss://"),e=r+t.host,"/"!==t.pathname&&(e+=t.pathname);var o=n.token,a=n.currentUser,i=n.currentRoom;return e=e+"/ws?token="+o+"&roomSid="+i.sid+"&userSid="+(null===a||void 0===a?void 0:a.sid)+"&roomId="+i.room_id+"&userId="+(null===a||void 0===a?void 0:a.userId)},Ol=function(){return Cl},Il=function(e){Cl&&(null===ml||void 0===ml||ml.send(e))},Fl=function(){return Fl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Fl.apply(this,arguments)},Ml=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Dl=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Ul=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Ll=function(e){var t,n=e.userId,r=zt((function(e){return E.selectById(e,n)})),i=Gt.getState().session,s=Ul((0,a.useState)("Ask to share Microphone"),2),c=s[0],u=s[1],d=Ul((0,a.useState)(""),2),f=d[0],p=d[1],m=(0,Qt.$)().t;(0,a.useEffect)((function(){0===(null===r||void 0===r?void 0:r.audioTracks)?(u(m("left-panel.menus.items.ask-to-share-microphone")),p("left-panel.menus.items.share-microphone")):(null===r||void 0===r?void 0:r.isMuted)?(u(m("left-panel.menus.items.ask-to-unmute-mic")),p("left-panel.menus.items.unmute-mic")):(null===r||void 0===r?void 0:r.audioTracks)&&(u(m("left-panel.menus.items.mute-mic")),p("mute"))}),[m,null===r||void 0===r?void 0:r.isMuted,null===r||void 0===r?void 0:r.audioTracks]);var h=function(){return Ml(void 0,void 0,void 0,(function(){var e,t,n;return Dl(this,(function(o){switch(o.label){case 0:return e=Gt.getState().session,t={sid:e.currentRoom.sid,room_id:e.currentRoom.room_id,user_id:null===r||void 0===r?void 0:r.userId,muted:!0},[4,Vo("muteUnmuteTrack",t)];case 1:return(n=o.sent()).status?(0,l.Am)(m("left-panel.menus.notice.you-have-muted-to",{name:null===r||void 0===r?void 0:r.name}),{toastId:"asked-status",type:"info"}):(0,l.Am)(m(n.msg),{toastId:"asked-status",type:"error"}),[2]}}))}))};return(0,o.jsx)(o.Fragment,{children:(null===(t=i.currentUser)||void 0===t?void 0:t.userId)!==(null===r||void 0===r?void 0:r.userId)?(0,o.jsx)("div",Fl({className:"",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:function(){return(0,o.jsx)("button",Fl({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return function(){var e,t,n,o,a;if("mute"!==f){var s={type:Go.SYSTEM,room_sid:i.currentRoom.sid,message_id:"",to:null===r||void 0===r?void 0:r.sid,body:{type:Ho.INFO,from:{sid:null!==(t=null===(e=i.currentUser)||void 0===e?void 0:e.sid)&&void 0!==t?t:"",userId:null!==(o=null===(n=i.currentUser)||void 0===n?void 0:n.userId)&&void 0!==o?o:""},msg:m("left-panel.menus.notice.asked-you-to",{name:null===(a=i.currentUser)||void 0===a?void 0:a.name})+m(f)}};Il(JSON.stringify(s)),(0,l.Am)(m("left-panel.menus.notice.you-have-asked",{name:null===r||void 0===r?void 0:r.name})+m(f),{toastId:"asked-status",type:"info"})}else h()}()}},{children:c}))}})})):null})};var Bl=function(){return Bl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Bl.apply(this,arguments)},Wl=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Vl=function(e){var t,n,r=e.userId,i=(0,Qt.$)().t,s=zt((function(e){return E.selectById(e,r)})),c=null===(t=Gt.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features,u=Gt.getState().session,d=Wl((0,a.useState)("Ask to share Webcam"),2),f=d[0],p=d[1],m=Wl((0,a.useState)(""),2),h=m[0],v=m[1];(0,a.useEffect)((function(){0===(null===s||void 0===s?void 0:s.videoTracks)?(p(i("left-panel.menus.items.ask-to-share-webcam")),v("left-panel.menus.items.share-webcam")):(p(i("left-panel.menus.items.ask-to-stop-webcam")),v("left-panel.menus.items.stop-webcam"))}),[i,null===s||void 0===s?void 0:s.videoTracks]);return(0,o.jsx)(o.Fragment,{children:(null===(n=u.currentUser)||void 0===n?void 0:n.userId)!==(null===s||void 0===s?void 0:s.userId)&&(null===c||void 0===c?void 0:c.allow_webcams)&&!c.admin_only_webcams?(0,o.jsx)("div",Bl({className:"",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:function(){return(0,o.jsx)("button",Bl({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return function(){var e,t,n,r,o,a={type:Go.SYSTEM,room_sid:u.currentRoom.sid,message_id:"",to:null===s||void 0===s?void 0:s.sid,body:{type:Ho.INFO,from:{sid:null!==(t=null===(e=u.currentUser)||void 0===e?void 0:e.sid)&&void 0!==t?t:"",userId:null!==(r=null===(n=u.currentUser)||void 0===n?void 0:n.userId)&&void 0!==r?r:""},msg:i("left-panel.menus.notice.asked-you-to",{name:null===(o=u.currentUser)||void 0===o?void 0:o.name})+i(h)}};Il(JSON.stringify(a)),(0,l.Am)(i("left-panel.menus.notice.you-have-asked",{name:null===s||void 0===s?void 0:s.name})+i(h),{toastId:"asked-status",type:"info"})}()}},{children:f}))}})})):null})};var Gl=function(){return Gl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Gl.apply(this,arguments)},Hl=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},zl=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};const Ql=function(e){var t=e.userId,n=zt((function(e){return E.selectById(e,t)})),r=(0,Qt.$)().t;return(0,o.jsx)("div",Gl({className:"",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:function(){return(0,o.jsx)("button",Gl({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return Hl(void 0,void 0,void 0,(function(){var e,t;return zl(this,(function(o){switch(o.label){case 0:return e={user_id:null===n||void 0===n?void 0:n.userId,task:(null===n||void 0===n?void 0:n.metadata.is_presenter)?"demote":"promote"},[4,Vo("switchPresenter",e)];case 1:return(t=o.sent()).status?(0,l.Am)(r("left-panel.menus.notice.presenter-changed"),{toastId:"lock-setting-status",type:"info"}):(0,l.Am)(r(t.msg),{toastId:"lock-setting-status",type:"error"}),[2]}}))}))}},{children:(null===n||void 0===n?void 0:n.metadata.is_presenter)?r("footer.icons.demote-presenter"):r("footer.icons.promote-presenter")}))}})}))};var ql=function(){return ql=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ql.apply(this,arguments)},$l=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Jl=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};const Xl=function(e){var t=e.userId,n=zt((function(e){return E.selectById(e,t)})),r=Ht(),a=(0,Qt.$)().t;return(0,o.jsx)(o.Fragment,{children:(null===n||void 0===n?void 0:n.metadata.raised_hand)?(0,o.jsx)("div",ql({className:"",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:function(){return(0,o.jsx)("button",ql({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return $l(void 0,void 0,void 0,(function(){var e,t,o;return Jl(this,(function(i){switch(i.label){case 0:return e=Gt.getState().session,t={sid:e.currentRoom.sid,room_id:e.currentRoom.room_id,msg_type:Ho.OTHER_USER_LOWER_HAND,msg:null===n||void 0===n?void 0:n.userId},[4,Vo("dataMessage",t)];case 1:return(o=i.sent()).status?r(ue(!1)):(0,l.Am)(a(o.msg),{type:"error"}),[2]}}))}))}},{children:a("footer.icons.lower-hand")}))}})})):null})};var Yl=function(){return Yl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Yl.apply(this,arguments)},Kl=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Zl=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};const ec=function(e){var t,n=e.userId,r=null===(t=Gt.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features,a=(0,Qt.$)().t,i=zt((function(e){return E.selectById(e,n)})),s=function(e){return Kl(void 0,void 0,void 0,(function(){var t,n,r,o,s,c;return Zl(this,(function(u){switch(u.label){case 0:switch(t=i.metadata,n=Gt.getState().session,r=e,o="lock",e){case"mic":o=(null===t||void 0===t?void 0:t.lock_settings.lock_microphone)?"unlock":"lock";break;case"webcam":o=(null===t||void 0===t?void 0:t.lock_settings.lock_webcam)?"unlock":"lock";break;case"screenShare":o=(null===t||void 0===t?void 0:t.lock_settings.lock_screen_sharing)?"unlock":"lock";break;case"whiteboard":o=(null===t||void 0===t?void 0:t.lock_settings.lock_whiteboard)?"unlock":"lock";break;case"sharedNotepad":o=(null===t||void 0===t?void 0:t.lock_settings.lock_shared_notepad)?"unlock":"lock";break;case"chat":o=(null===t||void 0===t?void 0:t.lock_settings.lock_chat)?"unlock":"lock";break;case"sendChatMsg":o=(null===t||void 0===t?void 0:t.lock_settings.lock_chat_send_message)?"unlock":"lock";break;case"chatFile":o=(null===t||void 0===t?void 0:t.lock_settings.lock_chat_file_share)?"unlock":"lock"}return s={sid:n.currentRoom.sid,room_id:n.currentRoom.room_id,user_id:null===i||void 0===i?void 0:i.userId,service:r,direction:o},[4,Vo("updateLockSettings",s)];case 1:return(c=u.sent()).status?(0,l.Am)(a("left-panel.menus.notice.applied-new-setting"),{toastId:"lock-setting-status",type:"info"}):(0,l.Am)(a(c.msg),{type:"error"}),[2]}}))}))};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",Yl({className:"",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:function(){return(0,o.jsx)("button",Yl({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return s("mic")}},{children:(null===i||void 0===i?void 0:i.metadata.lock_settings.lock_microphone)?a("left-panel.menus.items.unlock-microphone"):a("left-panel.menus.items.lock-microphone")}))}})})),(null===r||void 0===r?void 0:r.allow_webcams)&&!(null===r||void 0===r?void 0:r.admin_only_webcams)?(0,o.jsx)("div",Yl({className:"",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:function(){return(0,o.jsx)("button",Yl({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return s("webcam")}},{children:(null===i||void 0===i?void 0:i.metadata.lock_settings.lock_webcam)?a("left-panel.menus.items.unlock-webcam"):a("left-panel.menus.items.lock-webcam")}))}})})):null,(null===r||void 0===r?void 0:r.allow_screen_share)?(0,o.jsx)("div",Yl({className:"",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:function(){return(0,o.jsx)("button",Yl({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return s("screenShare")}},{children:(null===i||void 0===i?void 0:i.metadata.lock_settings.lock_screen_sharing)?a("left-panel.menus.items.unlock-screen-sharing"):a("left-panel.menus.items.lock-screen-sharing")}))}})})):null,(null===r||void 0===r?void 0:r.whiteboard_features.allowed_whiteboard)?(0,o.jsx)("div",Yl({className:"",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:function(){return(0,o.jsx)("button",Yl({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return s("whiteboard")}},{children:(null===i||void 0===i?void 0:i.metadata.lock_settings.lock_whiteboard)?a("left-panel.menus.items.unlock-whiteboard"):a("left-panel.menus.items.lock-whiteboard")}))}})})):null,(null===r||void 0===r?void 0:r.shared_note_pad_features.allowed_shared_note_pad)?(0,o.jsx)("div",Yl({className:"",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:function(){return(0,o.jsx)("button",Yl({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return s("sharedNotepad")}},{children:(null===i||void 0===i?void 0:i.metadata.lock_settings.lock_shared_notepad)?a("left-panel.menus.items.unlock-shared-notepad"):a("left-panel.menus.items.lock-shared-notepad")}))}})})):null,(null===r||void 0===r?void 0:r.chat_features.allow_chat)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",Yl({className:"",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:function(){return(0,o.jsx)("button",Yl({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return s("chat")}},{children:(null===i||void 0===i?void 0:i.metadata.lock_settings.lock_chat)?a("left-panel.menus.items.unlock-chat"):a("left-panel.menus.items.lock-chat")}))}})})),(0,o.jsx)("div",Yl({className:"",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:function(){return(0,o.jsx)("button",Yl({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return s("sendChatMsg")}},{children:(null===i||void 0===i?void 0:i.metadata.lock_settings.lock_chat_send_message)?a("left-panel.menus.items.unlock-send-chat-message"):a("left-panel.menus.items.lock-send-chat-message")}))}})})),r.chat_features.allow_file_upload?(0,o.jsx)("div",Yl({className:"",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:function(){return(0,o.jsx)("button",Yl({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return s("chatFile")}},{children:(null===i||void 0===i?void 0:i.metadata.lock_settings.lock_chat_file_share)?a("left-panel.menus.items.unlock-send-file"):a("left-panel.menus.items.lock-send-file")}))}})})):null]}):null]})};var tc=function(){return tc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},tc.apply(this,arguments)};const nc=function(e){var t=e.userId,n=e.onOpenAlert,r=(0,Qt.$)().t;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",tc({className:"",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:function(){return(0,o.jsx)("button",tc({className:"text-red-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-red-400 hover:text-white",onClick:function(){n(t,"remove")}},{children:r("left-panel.menus.items.remove-participant")}))}})}))})})};var rc=function(){return rc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},rc.apply(this,arguments)};const oc=function(e){var t=e.name,n=e.userId,r=Ht(),a=(0,Qt.$)().t;return(0,o.jsx)("div",rc({className:"",role:"none"},{children:(0,o.jsx)(Fr.v.Item,{children:function(){return(0,o.jsx)("button",rc({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return r(le(!0)),r(Ke({name:t,userId:n})),void r(Ye(n))}},{children:a("left-panel.menus.items.private-chat")}))}})}))};var ac=function(){return ac=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ac.apply(this,arguments)},ic=(0,qt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.default_lock_settings}),(function(e){return e}));const sc=function(e){var t=e.userId,n=e.name,r=e.isAdmin,a=e.openRemoveParticipantAlert,i=zt(ic),s=Gt.getState().session.currentUser,l=function(){var e,l;return(null===(e=null===s||void 0===s?void 0:s.metadata)||void 0===e?void 0:e.is_admin)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Ll,{userId:t}),(0,o.jsx)(Vl,{userId:t}),(0,o.jsx)(oc,{userId:t,name:n}),(0,o.jsx)(Ql,{userId:t}),(0,o.jsx)(Xl,{userId:t}),(0,o.jsx)(ec,{userId:t}),(0,o.jsx)(nc,{onOpenAlert:a,userId:t})]}):(null===(l=null===s||void 0===s?void 0:s.metadata)||void 0===l?void 0:l.is_admin)||(null===i||void 0===i?void 0:i.lock_chat)||(null===i||void 0===i?void 0:i.lock_private_chat)?!(null===i||void 0===i?void 0:i.lock_chat)&&(null===i||void 0===i?void 0:i.lock_private_chat)&&r?(0,o.jsx)(oc,{userId:t,name:n}):null:(0,o.jsx)(oc,{userId:t,name:n})};return(0,o.jsx)(o.Fragment,{children:null!==l()?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Fr.v,{children:function(e){var t=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Fr.v.Button,ac({className:"relative flex-shrink-0 mt-2"},{children:(0,o.jsx)("i",{className:"pnm-menu-small primaryColor opacity-50"})})),(0,o.jsx)(Kt.u,ac({show:t,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100 z-10",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(Fr.v.Items,ac({static:!0,className:"origin-top-right z-10 absolute right-0 mt-2 w-44 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:l()}))}))]})}})}):null})};var lc=function(){return lc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},lc.apply(this,arguments)};const cc=function(e){var t=e.userId,n=zt((function(e){return E.selectById(e,t)}));return"hidden"===(null===n||void 0===n?void 0:n.visibility)?(0,o.jsx)("div",lc({className:"visibility mr-2 cursor-pointer mt-[2px]"},{children:(0,o.jsx)("i",{className:"pnm-eye-slash secondaryColor text-xs"})})):null};var uc=function(){return uc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},uc.apply(this,arguments)};const dc=function(e){var t=e.userId,n=zt((function(e){return E.selectById(e,t)}));return(null===n||void 0===n?void 0:n.metadata.is_presenter)?(0,o.jsx)("div",uc({className:"presenter mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-presenter secondaryColor text-[10px]"})})):null};var fc=function(){return fc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},fc.apply(this,arguments)},pc=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},mc=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};const hc=function(e){var t=e.userId,n=e.name,r=e.openRemoveParticipantAlert,a=zt((function(e){return E.selectById(e,t)})),i=(0,Qt.$)().t,s=function(){return pc(void 0,void 0,void 0,(function(){var e;return mc(this,(function(r){switch(r.label){case 0:return[4,Vo("waitingRoom/approveUsers",{user_id:t})];case 1:return(e=r.sent()).status?(0,l.Am)(i("left-panel.menus.notice.user-approved",{name:n}),{type:"info"}):(0,l.Am)(i(e.msg),{type:"error"}),[2]}}))}))},c=function(){r(t,"reject")};return(null===a||void 0===a?void 0:a.metadata.wait_for_approval)?(0,o.jsxs)("div",fc({className:"approve-btn-wrap"},{children:[(0,o.jsx)("button",fc({className:"text-xs text-white py-[1px] px-2 rounded-lg transition ease-in bg-primaryColor hover:bg-secondaryColor",onClick:s},{children:i("left-panel.approve")})),(0,o.jsx)("button",fc({className:"text-xs text-white py-[1px] px-2 rounded-lg transition ease-in bg-red-600 hover:bg-red-800 ml-2",onClick:c},{children:i("left-panel.reject")}))]})):null};var vc=function(){return vc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},vc.apply(this,arguments)},xc=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},bc=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},yc=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const gc=function(e){var t=e.participant,n=e.remoteParticipant,r=yc((0,a.useState)(!1),2),i=r[0],s=r[1],c=yc((0,a.useState)(0),2),u=c[0],d=c[1],f=yc((0,a.useState)("remove"),2),p=f[0],m=f[1],h=Gt.getState().session.currentUser,v=(0,Qt.$)().t,x=function(e,n){e===t.userId&&(m(n),s(!0))},b=function(e){return void 0===e&&(e=!1),xc(void 0,void 0,void 0,(function(){var n,r,o;return bc(this,(function(a){switch(a.label){case 0:return s(!1),e?(n=Gt.getState().session,r={sid:n.currentRoom.sid,room_id:n.currentRoom.room_id,user_id:t.userId,msg:v("remove"===p?"notifications.you-have-removed":"notifications.you-have-reject"),block_user:1===u},[4,Vo("removeParticipant",r)]):[2];case 1:return(o=a.sent()).status?(0,l.Am)(v("left-panel.menus.notice.participant-removed"),{toastId:"user-remove-status",type:"info"}):(0,l.Am)(v(o.msg),{type:"error"}),[2]}}))}))};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("li",vc({className:"mb-3 w-full list-none"},{children:(0,o.jsxs)("div",vc({className:"flex items-center justify-between relative"},{children:[(0,o.jsxs)("div",vc({className:"left flex items-center "},{children:[(0,o.jsx)(tl,{participant:t}),(0,o.jsx)(rl,{name:t.name,isCurrentUser:(null===h||void 0===h?void 0:h.userId)===t.userId})]})),(0,o.jsxs)("div",vc({className:"right ml-2 flex-auto flex items-center justify-end"},{children:[(0,o.jsx)(al,{userId:t.userId}),(0,o.jsx)(cc,{userId:t.userId}),(0,o.jsx)(dc,{userId:t.userId}),(0,o.jsx)(dl,{userId:t.userId}),(0,o.jsx)(cl,{userId:t.userId,remoteParticipant:n}),(null===h||void 0===h?void 0:h.userId)!==t.userId?(0,o.jsx)(sc,{userId:t.userId,name:t.name,isAdmin:t.metadata.is_admin,openRemoveParticipantAlert:x}):null]})),(0,o.jsx)("div",vc({className:"approve-wrap absolute right-0 top-5"},{children:(0,o.jsx)(hc,{userId:t.userId,name:t.name,openRemoveParticipantAlert:x})}))]}))})),(0,o.jsx)(Kt.u,vc({show:i,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(Zt.V,vc({open:i,onClose:function(){return b()},className:"remove-participants-popup fixed z-[99999] inset-0 overflow-y-auto"},{children:(0,o.jsxs)("div",vc({className:"flex items-center justify-center min-h-screen"},{children:[(0,o.jsx)(Zt.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),(0,o.jsxs)("div",vc({className:"popup-inner bg-white w-full max-w-sm rounded-3xl shadow-header relative px-4 lg:px-6 py-12 lg:py-14"},{children:[(0,o.jsxs)("button",vc({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return b()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(Zt.V.Title,vc({className:"mb-4 md:mb-6 text-sm"},{children:(0,o.jsx)("legend",vc({className:"text-base font-medium text-gray-900"},{children:v("left-panel.menus.notice.confirm",{name})}))})),(0,o.jsxs)("div",vc({className:"mb-10 pl-3"},{children:[(0,o.jsx)("p",vc({className:"text-sm text-gray-500"},{children:v("left-panel.menus.notice.want-to-block")})),(0,o.jsxs)("div",vc({className:"mt-4 pl-2 space-y-4"},{children:[(0,o.jsxs)("div",vc({className:"flex items-center"},{children:[(0,o.jsx)("input",{type:"radio",value:"1",name:"block",id:"yes",checked:1===u,onChange:function(e){return d(Number(e.currentTarget.value))}}),(0,o.jsx)("label",vc({htmlFor:"yes",className:"ml-3 block text-sm font-medium text-gray-700"},{children:v("yes")}))]})),(0,o.jsxs)("div",vc({className:"flex items-center"},{children:[(0,o.jsx)("input",{type:"radio",value:"0",name:"block",id:"no",checked:0===u,onChange:function(e){return d(Number(e.currentTarget.value))}}),(0,o.jsx)("label",vc({htmlFor:"no",className:"ml-3 block text-sm font-medium text-gray-700"},{children:v("no")}))]}))]}))]})),(0,o.jsx)("button",vc({className:"inline-flex justify-center px-4 py-2 text-xs md:text-sm font-medium text-white bg-red-600 mr-4 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return b(!0)}},{children:v("left-panel.menus.notice.remove")})),(0,o.jsx)("button",vc({className:"inline-flex justify-center px-4 py-2 text-xs md:text-sm font-medium bg-primaryColor hover:bg-secondaryColor text-white border border-transparent rounded-md focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return b(!1)}},{children:v("cancel")}))]}))]}))}))}))]})};var wc=function(){return wc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},wc.apply(this,arguments)};const jc=function(e){var t=e.currentRoom,n=zt(E.selectAll),r=(0,Qt.$)().t;return(0,o.jsxs)("div",wc({className:"inner-wrapper relative z-20"},{children:[(0,o.jsx)("div",wc({className:"top flex items-center justify-between font-medium mb-3 xl:mb-5"},{children:(0,o.jsx)("p",wc({className:"text-sm text-black"},{children:r("left-panel.participants",{total:n.length})}))})),(0,o.jsx)("div",wc({className:"all-participants-wrap"},{children:function(){var e,r,a,i,s,l,c,u=Gt.getState().session,d=null===(e=u.currentUser)||void 0===e?void 0:e.userId,f=null!==(i=null===(a=null===(r=u.currentRoom.metadata)||void 0===r?void 0:r.room_features)||void 0===a?void 0:a.allow_view_other_users_list)&&void 0!==i&&i,p=null!==(c=null===(l=null===(s=u.currentUser)||void 0===s?void 0:s.metadata)||void 0===l?void 0:l.is_admin)&&void 0!==c&&c;return n.map((function(e){var n=t.participants.get(e.sid);if(p||f||e.metadata.is_admin||d===e.userId)return(0,o.jsx)(gc,{participant:e,remoteParticipant:n},e.sid)}))}()}))]}))};var Sc=function(){return Sc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Sc.apply(this,arguments)},kc=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},_c=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};const Nc=function(){var e=(0,Qt.$)().t,t=kc((0,a.useState)(!1),2),n=t[0],r=t[1],i=kc((0,a.useState)(""),2),s=i[0],c=i[1],u=kc(kt(),2),d=u[0],f=u[1],p=f.isLoading,m=f.data,h=kc((0,a.useState)([{id:1,text:""},{id:2,text:""}]),2),v=h[0],x=h[1];(0,a.useEffect)((function(){!p&&m&&(m.status?(0,l.Am)(e("polls.created-successfully"),{type:"info"}):(0,l.Am)(e(m.msg),{type:"error"}),b())}),[p,m]);var b=function(){r(!1),c(""),x([{id:1,text:""},{id:2,text:""}])},y=function(e){e.preventDefault(),d({question:s,options:v})},g=function(){return(0,o.jsxs)("form",Sc({onSubmit:y},{children:[(0,o.jsx)("label",Sc({className:"text-base text-black block mb-1"},{children:e("polls.enter-question")})),(0,o.jsx)("input",{type:"text",name:"question",value:s,required:!0,onChange:function(e){return c(e.currentTarget.value)},placeholder:"Ask a question",className:"text-black placeholder:text-black/50 py-2 px-4 text-base w-full border border-solid border-primaryColor outline-none rounded-lg mb-4"}),(0,o.jsxs)("div",Sc({className:"flex items-start justify-between pb-2 pt-4 border-t border-solid border-primaryColor/20"},{children:[(0,o.jsx)("p",Sc({className:"text-lg text-black block leading-4"},{children:e("polls.options")})),(0,o.jsx)("button",Sc({className:"h-7 px-3 leading-[28px] text-center transition ease-in bg-primaryColor hover:bg-secondaryColor text-white text-sm font-semibold rounded-lg",type:"button",onClick:function(){return e=_c([],kc(v),!1),t={id:e[e.length-1].id+1,text:""},e.push(t),void x(_c([],kc(e),!1));var e,t}},{children:e("polls.add-new-option")}))]})),(0,o.jsx)("div",Sc({className:"option-field-wrapper overflow-auto h-full max-h-[345px] scrollBar scrollBar2"},{children:(0,o.jsxs)("div",Sc({className:"option-field-inner"},{children:[v.map((function(t,n){return(0,o.jsx)("div",Sc({className:"form-inline mb-4"},{children:(0,o.jsxs)("div",Sc({className:"input-wrapper w-full flex items-center"},{children:[(0,o.jsx)("input",{type:"text",required:!0,name:"opt_".concat(t.id),value:t.text,onChange:function(e){return function(e,t){var n=_c([],kc(v),!1);n[e].text=t.currentTarget.value,x(_c([],kc(n),!1))}(n,e)},placeholder:e("polls.option",{count:n+1}),className:"text-black placeholder:text-black/50 py-2 px-4 text-base w-[calc(100%-36px)] border border-solid border-primaryColor outline-none rounded-lg"}),n?(0,o.jsx)("button",Sc({type:"button",className:"ml-2 p-1",onClick:function(){return function(e){var t=_c([],kc(v),!1);t.splice(e,1),x(_c([],kc(t),!1))}(n)}},{children:(0,o.jsx)("i",{className:"pnm-delete w-5 h-5"})})):null]}))}),t.id)})),p?(0,o.jsx)("div",Sc({className:"loading absolute text-center top-1/2 -translate-y-1/2 z-[999] left-0 right-0 m-auto"},{children:(0,o.jsxs)("div",Sc({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]}))})):null]}))})),(0,o.jsx)("div",Sc({className:"button-section flex items-center justify-end"},{children:(0,o.jsx)("button",Sc({className:"h-8 px-6 leading-[32px] text-center transition ease-in bg-primaryColor hover:bg-secondaryColor text-white text-base font-semibold rounded-lg",type:"submit"},{children:e("polls.create-poll")}))}))]}))};return(0,o.jsxs)(o.Fragment,{children:[n?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Kt.u,Sc({appear:!0,show:n,as:a.Fragment},{children:(0,o.jsx)(Zt.V,Sc({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:b},{children:(0,o.jsxs)("div",Sc({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(Kt.u.Child,Sc({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(Zt.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",Sc({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(Kt.u.Child,Sc({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Sc({className:"inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",Sc({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return b()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(Zt.V.Title,Sc({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 text-left mb-2"},{children:e("polls.create")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",Sc({className:"mt-6"},{children:g()}))]}))}))]}))}))}))}):null,(0,o.jsx)("button",Sc({onClick:function(){return r(!0)},className:"w-[calc(100%-20px)] ml-[10px] h-10 leading-[40px] text-center transition ease-in bg-primaryColor hover:bg-secondaryColor text-white text-base font-semibold rounded-lg mb-2"},{children:e("polls.create")}))]})};var Cc=function(){return Cc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Cc.apply(this,arguments)},Tc=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Ec=function(e){var t=e.pollId,n=wt(t),r=n.data,i=n.isLoading,s=Tc((0,a.useState)(0),2),l=s[0],c=s[1],u=(0,Qt.$)().t;return(0,a.useEffect)((function(){var e;!i&&r&&r.status&&c(null!==(e=r.total_responses)&&void 0!==e?e:0)}),[r,i]),(0,o.jsxs)("div",Cc({className:"total-vote rounded-bl-lg bg-secondaryColor absolute top-0 right-0 text-white text-[10px] py-1 px-3 uppercase"},{children:[(0,o.jsxs)("strong",{children:[u("polls.total"),": "]})," ",l]}))};var Pc=function(){return Pc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Pc.apply(this,arguments)},Ac=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Rc=function(e){var t=e.onCloseForm,n=e.pollId,r=(0,Qt.$)().t,i=Ac((0,a.useState)(!0),2),s=i[0],c=i[1],u=Ac((0,a.useState)(0),2),d=u[0],f=u[1],p=Ac(_t(),2),m=p[0],h=p[1],v=h.isLoading,x=h.data,b=gt(void 0,{selectFromResult:function(e){var t=e.data;return{post:null===t||void 0===t?void 0:t.polls.find((function(e){return e.id===n}))}}}).post;(0,a.useEffect)((function(){!v&&x&&(x.status?(0,l.Am)(r("polls.response-added"),{type:"info"}):(0,l.Am)(r(x.msg),{type:"error"}),y())}),[v,x]);var y=function(){c(!1),t()},g=function(e){var t,r,o,a;e.preventDefault(),0!==d&&m({poll_id:n,user_id:null!==(r=null===(t=Gt.getState().session.currentUser)||void 0===t?void 0:t.userId)&&void 0!==r?r:"",name:null!==(a=null===(o=Gt.getState().session.currentUser)||void 0===o?void 0:o.name)&&void 0!==a?a:"",selected_option:d})};return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Kt.u,Pc({appear:!0,show:s,as:a.Fragment},{children:(0,o.jsx)(Zt.V,Pc({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:y},{children:(0,o.jsxs)("div",Pc({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(Kt.u.Child,Pc({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(Zt.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",Pc({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(Kt.u.Child,Pc({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Pc({className:"inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",Pc({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return y()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(Zt.V.Title,Pc({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 text-left mb-2"},{children:r("polls.submit-vote-form-title")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",Pc({className:"mt-2"},{children:(0,o.jsxs)("form",Pc({onSubmit:g},{children:[(0,o.jsxs)("label",Pc({className:"text-base text-black block mb-2 pb-1 border-b border-solid border-primaryColor/20"},{children:[(0,o.jsx)("span",Pc({className:"text-primaryColor"},{children:"Q:"}))," ",null===b||void 0===b?void 0:b.question]})),(0,o.jsxs)("div",Pc({className:""},{children:[(0,o.jsx)("p",Pc({className:"text-base text-black block mb-2 pb-1 border-b border-solid border-primaryColor/20"},{children:r("polls.select-option")})),(0,o.jsxs)("div",Pc({className:"mb-2 relative min-h-[75px]"},{children:[null===b||void 0===b?void 0:b.options.map((function(e){return(0,o.jsxs)("div",Pc({className:"flex items-center"},{children:[(0,o.jsx)("input",{type:"radio",id:"option-".concat(e.id),value:e.id,name:"option-".concat(e.id),checked:d===e.id,onChange:function(e){return f(Number(e.currentTarget.value))}}),(0,o.jsx)("label",Pc({className:"ml-2",htmlFor:"option-".concat(e.id)},{children:e.text}))]}),e.id)})),v?(0,o.jsx)("div",Pc({className:"loading absolute text-center top-1/2 -translate-y-1/2 z-[999] left-0 right-0 m-auto"},{children:(0,o.jsxs)("div",Pc({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]}))})):null]}))]})),(0,o.jsx)("div",Pc({className:"button-section flex items-center justify-end"},{children:(0,o.jsx)("button",Pc({className:"h-7 px-6 leading-[28px] text-center transition ease-in bg-primaryColor hover:bg-secondaryColor text-white text-base font-semibold rounded-lg",type:"submit"},{children:r("polls.submit")}))}))]}))}))]}))}))]}))}))}))})};var Oc=function(){return Oc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Oc.apply(this,arguments)},Ic=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Fc=function(e){var t,n=e.pollId,r=(0,Qt.$)().t,i=jt({pollId:n,userId:(null===(t=Gt.getState().session.currentUser)||void 0===t?void 0:t.userId)||""}),s=i.data,l=i.isLoading,c=Ic((0,a.useState)(!1),2),u=c[0],d=c[1],f=Ic((0,a.useState)(!1),2),p=f[0],m=f[1];(0,a.useEffect)((function(){!l&&s&&s.status&&d(!!(s.voted&&s.voted>0))}),[s,l]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",Oc({className:"has-voted"},{children:u?(0,o.jsx)("p",Oc({className:"absolute left-2 bottom-2 text-xs"},{children:r("polls.you-voted")})):(0,o.jsx)("button",Oc({className:"absolute left-0 bottom-0 transition ease-in bg-primaryColor hover:bg-secondaryColor text-[10px] text-white pt-1 pb-[2px] px-3 uppercase rounded-tr-lg",onClick:function(){m(!0)}},{children:r("polls.vote")}))})),p?(0,o.jsx)(Rc,{onCloseForm:function(){m(!1)},pollId:n}):null]})};var Mc=n(97762),Dc=function(){return Dc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Dc.apply(this,arguments)},Uc=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Lc=function(e){var t=e.pollId,n=e.onCloseViewDetails,r=Uc((0,a.useState)(!0),2),i=r[0],s=r[1],c=(0,Qt.$)().t,u=gt(void 0,{selectFromResult:function(e){var n=e.data;return{post:null===n||void 0===n?void 0:n.polls.find((function(e){return e.id===t}))}}}).post,d=St(t).data,f=Uc(Nt(),2),p=f[0],m=f[1],h=m.isLoading,v=m.data,x=(0,a.useMemo)((function(){var e={};(null===d||void 0===d?void 0:d.responses.all_respondents)&&""!==(null===d||void 0===d?void 0:d.responses.all_respondents)&&JSON.parse(null===d||void 0===d?void 0:d.responses.all_respondents).forEach((function(t){var n=t.split(":");"undefined"===typeof e[n[1]]&&(e[n[1]]=[]),e[n[1]].push(n[2])}));return e}),[d]);(0,a.useEffect)((function(){!h&&v&&(v.status?(0,l.Am)(c("polls.end-poll-success"),{type:"info"}):(0,l.Am)(c(v.msg),{type:"error"}))}),[h,v]);var b=function(){s(!1),n()},y=function(){p({poll_id:t})},g=function(e){return"undefined"!==typeof(null===d||void 0===d?void 0:d.responses[e+"_count"])?null===d||void 0===d?void 0:d.responses[e+"_count"]:0};return(0,o.jsx)(o.Fragment,{children:i?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Kt.u,Dc({appear:!0,show:i,as:a.Fragment},{children:(0,o.jsx)(Zt.V,Dc({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:b},{children:(0,o.jsxs)("div",Dc({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(Kt.u.Child,Dc({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(Zt.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",Dc({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(Kt.u.Child,Dc({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Dc({className:"inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",Dc({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return b()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(Zt.V.Title,Dc({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 text-left mb-2"},{children:c("polls.view-details-title")})),(0,o.jsx)("hr",{}),(0,o.jsxs)("div",Dc({className:"mt-2"},{children:[(0,o.jsxs)("div",Dc({className:"headline flex flex-wrap pb-5"},{children:[(0,o.jsxs)("p",Dc({className:"w-full text-lg font-bold text-black capitalize mb-2 pb-1 border-b border-solid border-primaryColor/20"},{children:[(0,o.jsx)("span",Dc({className:"text-primaryColor"},{children:"Q: "})),null===u||void 0===u?void 0:u.question]})),(0,o.jsx)("p",Dc({className:"w-full text-base"},{children:c("polls.total-responses",{count:null===d||void 0===d?void 0:d.responses.total_resp})}))]})),(0,o.jsxs)("div",Dc({className:""},{children:[(0,o.jsx)("p",Dc({className:"text-base text-black block mb-2 pb-1 border-b border-solid border-primaryColor/20"},{children:c("polls.options")})),(0,o.jsxs)("div",Dc({className:"relative min-h-[75px]"},{children:[null===u||void 0===u?void 0:u.options.map((function(e){return(0,o.jsx)("div",Dc({className:"mb-1"},{children:(0,o.jsx)(mi.p,{children:function(t){var n,r=t.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(mi.p.Button,Dc({className:"flex w-full justify-between rounded-lg transition ease-in bg-secondaryColor px-4 py-2 text-left text-sm font-medium text-white hover:bg-primaryColor outline-none"},{children:[(0,o.jsxs)("span",{children:[e.text," (",g(e.id),")"]}),(0,o.jsx)("svg",Dc({xmlns:"http://www.w3.org/2000/svg",className:"".concat(r?"rotate-180 transform":""," h-5 w-5 text-white"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2"},{children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}))]})),(0,o.jsx)(mi.p.Panel,Dc({className:"px-4 py-2 text-sm text-gray-500"},{children:(n=e.id,"undefined"!==typeof x[n]?x[n].map((function(e,t){return(0,o.jsx)("p",Dc({className:"inline-block pr-2 mr-2 border-r border-solid border-black leading-4 last:border-none last:mr-0 last:pr-0"},{children:e}),t)})):null)}))]})}})}),e.id)})),h?(0,o.jsx)("div",Dc({className:"loading absolute text-center top-1/2 -translate-y-1/2 z-[999] left-0 right-0 m-auto"},{children:(0,o.jsxs)("div",Dc({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]}))})):null]}))]})),(0,o.jsx)("div",Dc({className:"pt-10 text-right"},{children:(null===u||void 0===u?void 0:u.is_running)?(0,o.jsx)("button",Dc({className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none",onClick:y},{children:c("polls.end-poll")})):(0,o.jsx)("button",Dc({className:"inline-flex justify-center px-3 py-1 text-sm font-medium text-white bg-primaryColor rounded-md hover:bg-secondaryColor focus:outline-none",onClick:function(){return function(){var e,t,n,r,a;if(!h){var i=Gt.getState().session,s=Mc.renderToString((0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{children:null===u||void 0===u?void 0:u.question}),(0,o.jsx)("p",{children:c("polls.total-responses",{count:null===d||void 0===d?void 0:d.responses.total_resp})}),null===u||void 0===u?void 0:u.options.map((function(e){return(0,o.jsx)("p",{children:"".concat(e.text," (").concat(g(e.id),")")},e.id)}))]})),l={type:"CHAT",isPrivate:!1,time:"",message_id:"",from:{sid:null!==(t=null===(e=i.currentUser)||void 0===e?void 0:e.sid)&&void 0!==t?t:"",userId:null!==(r=null===(n=i.currentUser)||void 0===n?void 0:n.userId)&&void 0!==r?r:"",name:null===(a=i.currentUser)||void 0===a?void 0:a.name},msg:s},f={type:Go.USER,room_sid:i.currentRoom.sid,message_id:"",body:l};Ol()&&Il(JSON.stringify(f)),b()}}()}},{children:c("polls.publish-result")}))}))]}))]}))}))]}))}))}))}):null})};var Bc=function(){return Bc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Bc.apply(this,arguments)},Wc=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Vc=function(e){var t=e.pollId,n=e.onCloseViewResult,r=Wc((0,a.useState)(!0),2),i=r[0],s=r[1],l=(0,Qt.$)().t,c=Ct(t),u=c.data,d=c.isLoading,f=function(){s(!1),n()};return(0,o.jsx)(o.Fragment,{children:i?function(){var e,t,n,r;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Kt.u,Bc({appear:!0,show:i,as:a.Fragment},{children:(0,o.jsx)(Zt.V,Bc({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:f},{children:(0,o.jsxs)("div",Bc({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(Kt.u.Child,Bc({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(Zt.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",Bc({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(Kt.u.Child,Bc({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Bc({className:"inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",Bc({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return f()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(Zt.V.Title,Bc({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 text-left mb-2"},{children:l("polls.view-result-title")})),(0,o.jsx)("hr",{}),(0,o.jsxs)("div",Bc({className:"mt-2"},{children:[(0,o.jsxs)("p",Bc({className:"w-full text-lg font-bold text-black capitalize mb-2 pb-1 border-b border-solid border-primaryColor/20"},{children:[(0,o.jsx)("span",Bc({className:"text-primaryColor"},{children:"Q: "})),null===(e=null===u||void 0===u?void 0:u.result)||void 0===e?void 0:e.question]})),(0,o.jsx)("p",Bc({className:"w-full text-base"},{children:l("polls.total-responses",{count:null===(t=null===u||void 0===u?void 0:u.result)||void 0===t?void 0:t.total_responses})})),(0,o.jsxs)("div",Bc({className:"pt-5"},{children:[(0,o.jsx)("p",Bc({className:"text-base text-black block mb-2 pb-2 border-b border-solid border-primaryColor/20"},{children:l("polls.options")})),(0,o.jsxs)("div",Bc({className:"relative min-h-[75px]"},{children:[null===(r=null===(n=null===u||void 0===u?void 0:u.result)||void 0===n?void 0:n.options)||void 0===r?void 0:r.map((function(e){return(0,o.jsxs)("p",Bc({className:"relative w-full flex items-center justify-between"},{children:[(0,o.jsx)("span",Bc({className:"bg-white inline-block py-1 pr-2"},{children:e.text})),(0,o.jsxs)("span",Bc({className:"bg-white inline-block py-1 pl-2"},{children:["(",e.vote_count,")"]}))]}),e.id)})),d?(0,o.jsx)("div",Bc({className:"loading absolute text-center top-1/2 -translate-y-1/2 z-[999] left-0 right-0 m-auto"},{children:(0,o.jsxs)("div",Bc({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]}))})):null]}))]}))]}))]}))}))]}))}))}))})}():null})};var Gc=function(){return Gc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Gc.apply(this,arguments)},Hc=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const zc=function(e){var t,n,r=e.item,i=(0,Qt.$)().t,s=null===(n=null===(t=Gt.getState().session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.is_admin,l=Hc((0,a.useState)(!1),2),c=l[0],u=l[1],d=Hc((0,a.useState)(!1),2),f=d[0],p=d[1];return(0,o.jsxs)("div",Gc({className:"poll-item relative overflow-hidden border border-solid border-primaryColor/70 px-2 py-8 rounded-lg mb-4 transition ease-in hover:shadow-md"},{children:[(0,o.jsx)("div",Gc({className:"poll-title text-md text-primaryColor"},{children:r.question})),(0,o.jsx)(Ec,{pollId:r.id}),(0,o.jsx)("div",Gc({className:"status absolute top-0 left-0 bg-secondaryColor text-[10px] text-white py-1 px-3 uppercase rounded-br-lg"},{children:r.is_running?i("polls.poll-running"):i("polls.poll-closed")})),(0,o.jsxs)("div",Gc({className:"btn"},{children:[r.is_running?(0,o.jsx)(Fc,{pollId:r.id}):null,s?(0,o.jsx)("button",Gc({onClick:function(){return u(!0)},className:"absolute right-0 bottom-0 transition ease-in bg-primaryColor hover:bg-secondaryColor text-[10px] text-white pt-1 pb-[2px] px-3 uppercase rounded-tl-lg"},{children:i("polls.view-details")})):null,s||r.is_running?null:(0,o.jsx)("button",Gc({onClick:function(){return p(!0)},className:"absolute right-0 bottom-0 transition ease-in bg-primaryColor hover:bg-secondaryColor text-[10px] text-white pt-1 pb-[2px] px-3 uppercase rounded-tl-lg"},{children:i("polls.view-result")}))]})),(0,o.jsxs)(o.Fragment,{children:[s&&c?(0,o.jsx)(Lc,{onCloseViewDetails:function(){return u(!1)},pollId:r.id}):null,s||r.is_running||!f?null:(0,o.jsx)(Vc,{onCloseViewResult:function(){return p(!1)},pollId:r.id})]})]}))};var Qc=function(){return Qc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Qc.apply(this,arguments)};const qc=function(){var e,t,n=gt(),r=n.data,i=n.isLoading,s=null===(t=null===(e=Gt.getState().session.currentUser)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.is_admin,l=(0,a.useMemo)((function(){if(r&&null!==r.polls){var e=r.polls.slice();return e.sort((function(e,t){return t.created-e.created})),e}}),[r]);return(0,o.jsx)("div",Qc({className:"polls-list-wrapper relative overflow-auto scrollBar px-2 pt-2 xl:pt-3\n      ".concat(s?"h-[calc(100%-48px)]":"h-full")},{children:(0,o.jsxs)("div",Qc({className:"polls-list-wrap-inner"},{children:[null===l||void 0===l?void 0:l.map((function(e){return(0,o.jsx)(zc,{item:e},e.id)})),i?(0,o.jsx)("div",Qc({className:"loading absolute text-center top-1/2 -translate-y-1/2 z-[999] left-0 right-0 m-auto"},{children:(0,o.jsxs)("div",Qc({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]}))})):null]}))}))};const $c=function(){var e,t,n=null===(t=null===(e=Gt.getState().session.currentUser)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.is_admin;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(qc,{}),n?(0,o.jsx)(Nc,{}):null]})};var Jc=function(){return Jc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Jc.apply(this,arguments)},Xc=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Yc=function(){var e,t,n=(0,Qt.$)().t,r=Vt(void 0,{pollingInterval:1e4}),i=r.data,s=r.isLoading,c=Xc(Ut(),2),u=c[0],d=c[1],f=d.isLoading,p=d.data,m=Xc((0,a.useState)(""),2),h=m[0],v=m[1],x=null!==(t=null===(e=Gt.getState().session.currentUser)||void 0===e?void 0:e.userId)&&void 0!==t?t:"";(0,a.useEffect)((function(){var e;if(!f&&p){if(!p.status)return void(0,l.Am)(n(p.msg),{type:"error"});v(null!==(e=p.token)&&void 0!==e?e:"")}}),[f,p]),(0,a.useEffect)((function(){if(""!==h){var e=new URLSearchParams(window.location.search);e.set("access_token",h);var t=location.protocol+"//"+location.host+window.location.pathname+"?"+e.toString();window.open(t,"_blank")}}),[h]);var b=function(){var e,t,n,r;u({breakout_room_id:null!==(t=null===(e=null===i||void 0===i?void 0:i.room)||void 0===e?void 0:e.id)&&void 0!==t?t:"",user_id:null!==(r=null===(n=Gt.getState().session.currentUser)||void 0===n?void 0:n.userId)&&void 0!==r?r:""})};return(0,o.jsx)("div",Jc({className:"polls-list-wrapper relative overflow-auto scrollBar px-2 pt-2 xl:pt-3 h-full"},{children:(0,o.jsxs)("div",Jc({className:"polls-list-wrap-inner"},{children:[function(){var e,t,r,a,s,l,c,u;return i?(0,o.jsxs)("div",Jc({className:"poll-item relative overflow-hidden border border-solid border-primaryColor/70 px-2 py-8 rounded-lg mb-4 transition ease-in hover:shadow-md"},{children:[(0,o.jsx)("div",Jc({className:"poll-title text-md text-primaryColor"},{children:null===(e=i.room)||void 0===e?void 0:e.title})),(0,o.jsxs)("div",Jc({className:"total-vote rounded-bl-lg bg-secondaryColor absolute top-0 right-0 text-white text-[10px] py-1 px-3 uppercase"},{children:[(0,o.jsxs)("strong",{children:[n("polls.total"),": "]})," ",null===(t=i.room)||void 0===t?void 0:t.users.length]})),(null===(r=i.room)||void 0===r?void 0:r.started)?(0,o.jsx)("div",Jc({className:"status absolute top-0 left-0 text-[10px] text-white"},{children:(0,o.jsx)(ji,{duration:null!==(s=null===(a=i.room)||void 0===a?void 0:a.duration)&&void 0!==s?s:5,created:null!==(c=null===(l=i.room)||void 0===l?void 0:l.created)&&void 0!==c?c:Date.now()})})):(0,o.jsx)("div",Jc({className:"status absolute top-0 left-0 bg-secondaryColor text-[10px] text-white py-1 px-3 uppercase rounded-br-lg"},{children:n("breakout-room.not-started")})),(0,o.jsxs)("div",Jc({className:"btn"},{children:[(0,o.jsx)("p",Jc({className:"absolute left-2 bottom-2 text-xs"},{children:(null===(u=i.room)||void 0===u?void 0:u.users.filter((function(e){return!0===e.joined&&e.id===x})).length)?n("breakout-room.user-joined"):n("breakout-room.not-joined")})),(0,o.jsx)("button",Jc({onClick:b,className:"absolute right-0 bottom-0 transition ease-in bg-primaryColor hover:bg-secondaryColor text-[10px] text-white pt-1 pb-[2px] px-3 uppercase rounded-tl-lg",disabled:!!f},{children:n("breakout-room.join")}))]}))]})):null}(),s?(0,o.jsx)("div",Jc({className:"loading absolute text-center top-1/2 -translate-y-1/2 z-[999] left-0 right-0 m-auto"},{children:(0,o.jsxs)("div",Jc({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]}))})):null]}))}))};var Kc=function(){return Kc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Kc.apply(this,arguments)},Zc=(0,qt.P1)((function(e){return e.roomSettings.selectedTabLeftPanel}),(function(e){return e}));const eu=a.memo((function(e){var t,n=e.currentRoom,r=Tt().data,i=Vt().data,s=(0,Qt.$)().t,l=Ht(),c=null===(t=Gt.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features.allow_polls,u=zt(Zc),d=(0,a.useMemo)((function(){var e,t,a=null!==(t=null===(e=null===r||void 0===r?void 0:r.stats)||void 0===e?void 0:e.total_running)&&void 0!==t?t:0,l=[{id:1,title:(0,o.jsx)(o.Fragment,{children:s("left-panel.participants-tab")}),elm:(0,o.jsx)(jc,{currentRoom:n})}];return c&&l.push({id:2,title:(0,o.jsxs)(o.Fragment,{children:[s("left-panel.polls-tab"),a>0?(0,o.jsx)("span",Kc({className:"absolute -right-[20px] -top-[7px] w-5 h-5 bg-primaryColor rounded-full text-white text-[10px]"},{children:null!==a&&void 0!==a?a:0})):null]}),elm:(0,o.jsx)($c,{})}),(null===i||void 0===i?void 0:i.status)&&l.push({id:3,title:(0,o.jsx)(o.Fragment,{children:s("left-panel.breakout-room-tab")}),elm:(0,o.jsx)(Yc,{})}),l}),[r,i]);return(0,o.jsxs)("div",Kc({id:"main-left-panel",className:"participants-wrapper relative z-10 left-0 top-0 h-full w-[330px] multi-gradient"},{children:[(0,o.jsxs)("div",Kc({className:"hidden md:inline-block close absolute z-10 -right-[14px] top-1 w-6 h-6 rounded-full border border-solid border-primaryColor bg-white cursor-pointer",onClick:function(){l(ce(!1))}},{children:[(0,o.jsx)("span",{className:"inline-block w-[18px] h-[1px] bg-primaryColor absolute rotate-45 top-[11px] left-[2px]"}),(0,o.jsx)("span",{className:"inline-block w-[18px] h-[1px] bg-primaryColor absolute -rotate-45 top-[11px] right-[2px]"})]})),(0,o.jsxs)(ws.O.Group,Kc({vertical:!0,selectedIndex:u,onChange:function(e){l(Xe(e))}},{children:[(0,o.jsx)(ws.O.List,Kc({className:"flex"},{children:d.map((function(e){return(0,o.jsx)(ws.O,Kc({className:function(e){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(Boolean).join(" ")}("w-full py-2 text-xs text-black font-bold leading-5 border-b-4 border-solid transition ease-in",e.selected?"border-[#004d90]":"border-[#004d90]/20")}},{children:(0,o.jsx)("div",Kc({className:"name relative inline-block"},{children:e.title}))}),e.id)}))})),(0,o.jsx)(ws.O.Panels,Kc({className:"relative h-[calc(100%-45px)]"},{children:d.map((function(e){return(0,o.jsx)(ws.O.Panel,Kc({className:"".concat(2===e.id||3===e.id?"polls h-full":"px-2 xl:px-4 pt-2 xl:pt-5 h-full overflow-auto scrollBar")},{children:(0,o.jsx)(o.Fragment,{children:e.elm})}),e.id)}))}))]}))]}))}));var tu=n(91036),nu=n.n(tu),ru=function(){return ru=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ru.apply(this,arguments)},ou=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},au=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},iu=(0,qt.P1)((function(e){return e.roomSettings.selectedChatOption}),(function(e){return e}));const su=function(e){var t,n,r,i,s=e.isChatServiceReady,c=e.lockSendFile,u=e.currentRoom,d=(0,a.useRef)(null),f=(0,Qt.$)().t,p=ou((0,a.useState)(),2),m=p[0],h=p[1],v=zt(iu),x=null===(t=Gt.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features.chat_features,b=null!==(r=null===(n=null===x||void 0===x?void 0:x.allowed_file_types)||void 0===n?void 0:n.map((function(e){return"."+e})).join(","))&&void 0!==r?r:"*",y=(null===x||void 0===x?void 0:x.max_file_size)?null===x||void 0===x?void 0:x.max_file_size:void 0,g=wr({allowedFileTypes:null!==(i=null===x||void 0===x?void 0:x.allowed_file_types)&&void 0!==i?i:[],maxFileSize:y,files:m}),w=g.isUploading,j=g.result;(0,a.useEffect)((function(){j&&j.filePath&&j.fileName&&(S(j.filePath,j.fileName),(0,l.Am)(f("right-panel.file-upload-success"),{type:l.Am.TYPE.SUCCESS}))}),[j]);var S=function(e,t){if(Ol()){var n='<span class="download"> <i class="pnm-download"></i> <a href="'.concat(window.PLUG_N_MEET_SERVER_URL+"/download/uploadedFile/"+e,'" target="_blank">').concat(t,"</a></span>"),r={type:"CHAT",isPrivate:"public"!==v,time:"",message_id:"",from:{sid:u.localParticipant.sid,userId:u.localParticipant.identity,name:u.localParticipant.name},msg:n},o={type:Go.USER,room_sid:u.sid,to:"public"!==v?v:"",message_id:"",body:r};Il(JSON.stringify(o))}};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",{type:"file",id:"chat-file",ref:d,accept:b,style:{display:"none"},onChange:function(e){return function(e){var t=e.target.files;t.length&&h(au([],ou(t),!1))}(e)}}),(0,o.jsx)("button",ru({disabled:!s||c||w,onClick:function(){return function(){var e;w||null===(e=d.current)||void 0===e||e.click()}()},className:"w-4 h-6 px-2"},{children:(0,o.jsx)("i",{className:"pnm-attachment primaryColor text-[20px] opacity-50"})}))]})})};var lu=function(){return lu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},lu.apply(this,arguments)},cu=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},uu=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},du=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},fu=(0,qt.P1)((function(e){return e.session.isChatServiceReady}),(function(e){return e})),pu=(0,qt.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_chat_send_message}),(function(e){return e})),mu=(0,qt.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_chat_file_share}),(function(e){return e})),hu=(0,qt.P1)((function(e){return e.roomSettings.selectedChatOption}),(function(e){return e}));const vu=function(e){var t=e.currentRoom,n=zt(fu),r=zt(pu),i=zt(mu),s=zt(hu),l=(0,Qt.$)().t,c=du((0,a.useState)(!1),2),u=c[0],d=c[1],f=du((0,a.useState)(!1),2),p=f[0],m=f[1],h=du((0,a.useState)(!0),2),v=h[0],x=h[1],b=du((0,a.useState)(""),2),y=b[0],g=b[1];(0,a.useEffect)((function(){Gt.getState().session.currentRoom.metadata.room_features.chat_features.allow_file_upload||x(!1)}),[]),(0,a.useEffect)((function(){d(!!r),m(!!i)}),[r,i]),(0,a.useEffect)((function(){var e,t,n,o,a,i,s=null===(t=null===(e=Gt.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_chat_send_message,l=null===(o=null===(n=Gt.getState().session.currentRoom.metadata)||void 0===n?void 0:n.default_lock_settings)||void 0===o?void 0:o.lock_chat_file_share,c=null===(i=null===(a=Gt.getState().session.currentUser)||void 0===a?void 0:a.metadata)||void 0===i?void 0:i.is_admin;s&&!c&&!1!==r&&d(!0),l&&!c&&!1!==r&&m(!0)}),[]);var w=function(){return cu(void 0,void 0,void 0,(function(){var e,n,r;return uu(this,(function(o){var a;return a=y,e=nu()(a,{allowedTags:["b","i","strong","br"],allowedSchemes:["mailto","tel"]}),(0,ba.isEmpty)(e)||(n={type:"CHAT",isPrivate:"public"!==s,time:"",message_id:"",from:{sid:t.localParticipant.sid,userId:t.localParticipant.identity,name:t.localParticipant.name},msg:e.replace(/\r?\n/g,"<br />")},r={type:Go.USER,room_sid:t.sid,to:"public"!==s?s:"",message_id:"",body:n},Ol()&&(Il(JSON.stringify(r)),g(""))),[2]}))}))};return(0,o.jsxs)("div",lu({className:"flex items-start justify-between h-[4.5rem] p-2"},{children:[(0,o.jsx)("textarea",{name:"message-textarea",id:"message-textarea",className:"w-full bg-white h-14 max-h-14 mt-1 leading-[1.2] rounded-xl py-2 px-4 outline-none text-xs lg:text-sm primaryColor placeholder:text-primaryColor/70",value:y,onChange:function(e){return g(e.currentTarget.value)},disabled:!n||u,placeholder:l("right-panel.chat-box-placeholder"),onKeyDown:function(e){return function(e){13==e.keyCode&&0==e.shiftKey&&(e.preventDefault(),w())}(e)}}),(0,o.jsxs)("div",lu({className:"btns"},{children:[(0,o.jsx)("button",lu({disabled:!n||u,onClick:function(){return w()},className:"w-4 h-6 p-2"},{children:(0,o.jsx)("i",{className:"pnm-send primaryColor text-[20px]"})})),v?(0,o.jsx)(su,{isChatServiceReady:n,lockSendFile:p,currentRoom:t}):null]}))]}))};var xu=n(74730),bu=function(){return bu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},bu.apply(this,arguments)};const yu=function(e){var t=e.participant,n=e.from;return(0,o.jsx)("div",bu({className:"avatar flex items-center justify-center text-white h-8 w-8 overflow-hidden rounded-full shadow-header bg-primaryColor"},{children:function(){var e;if(null===(e=null===t||void 0===t?void 0:t.metadata)||void 0===e?void 0:e.profile_pic)return(0,o.jsx)("img",{src:null===t||void 0===t?void 0:t.metadata.profile_pic,alt:t.name});var r=n.name;return(null===t||void 0===t?void 0:t.name)&&(r=null===t||void 0===t?void 0:t.name),(0,o.jsx)(o.Fragment,{children:null===r||void 0===r?void 0:r.slice(0,2).toUpperCase()})}()}))};var gu=function(){return gu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},gu.apply(this,arguments)};const wu=a.memo((function(e){var t=e.body,n=e.currentUser,r=zt((function(e){return E.selectById(e,t.from.userId)})),a=(0,Qt.$)().t;return(0,o.jsx)("div",gu({className:"message-item mb-2 xl:mb-3"},{children:(0,o.jsx)("div",gu({className:"wrapper flex "},{children:"system"===t.from.userId?(0,o.jsx)("div",gu({className:"content w-[calc(100%)] pt-2 system mb-2"},{children:(0,o.jsx)("p",{className:"message-content max-w-fit shadow-footer text-xs bg-primaryColor text-white",dangerouslySetInnerHTML:{__html:t.msg}})})):(null===n||void 0===n?void 0:n.userId)===t.from.userId?(0,o.jsxs)("div",gu({className:"content me w-[calc(100%-2rem)] pt-2"},{children:[(0,o.jsx)("p",gu({className:"name pl-2 text-sm pb-1 primaryColor"},{children:a("right-panel.you")})),(0,o.jsx)("p",{className:"message-content max-w-fit shadow-footer text-xs bg-secondaryColor text-white",dangerouslySetInnerHTML:{__html:t.msg}})]})):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(yu,{participant:r,from:t.from}),(0,o.jsxs)("div",gu({className:"content w-[calc(100%-2rem)] pt-2"},{children:[(0,o.jsxs)("p",gu({className:"name pl-2 text-sm pb-1"},{children:[t.from.name?t.from.name:null===r||void 0===r?void 0:r.name,(0,o.jsx)("span",gu({style:{fontSize:"10px"}},{children:r?null:" (offline)"}))]})),(0,o.jsx)("p",{className:"message-content max-w-fit bg-white shadow-footer text-xs",dangerouslySetInnerHTML:{__html:t.msg}})]}))]})}))}))}));var ju=function(){return ju=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ju.apply(this,arguments)},Su=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const ku=function(e){var t=e.userId,n=zt(Te.selectAll),r=(0,a.useRef)(null),i=Gt.getState().session.currentUser,s=Su((0,a.useState)([]),2),l=s[0],c=s[1];(0,a.useEffect)((function(){var e=[];e="public"===t?n.filter((function(e){return!e.isPrivate})):n.filter((function(e){return e.isPrivate&&(e.from.userId===t||e.to===t)})),c(e)}),[n,t]),(0,a.useEffect)((function(){r.current&&r.current.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}),[l]);return(0,o.jsx)("div",ju({className:"relative h-full px-2 xl:px-4 pt-2 xl:pt-4 overflow-auto scrollBar scrollBar4 messages-item-wrap"},{children:(0,o.jsx)("div",ju({className:"inner",ref:r},{children:l.map((function(e){var t=e;return(0,o.jsx)(wu,{body:t,currentUser:i},t.message_id)}))}))}))};var _u=function(){return _u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_u.apply(this,arguments)},Nu=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Cu=(0,qt.P1)((function(e){return e.roomSettings.selectedChatOption}),(function(e){return e})),Tu=(0,qt.P1)((function(e){return e.roomSettings.initiatePrivateChat}),(function(e){return e})),Eu=(0,qt.P1)((function(e){return e.roomSettings.unreadMsgFrom}),(function(e){return e}));const Pu=a.memo((function(){var e=(0,Qt.$)().t,t=Ht(),n=zt(Tu),r=zt(Te.selectAll),i=Nu((0,a.useState)(new Map),2),s=i[0],l=i[1],c=Gt.getState().session.currentUser,u=zt(Eu),d=zt(Cu),f=Nu((0,a.useState)([{id:"public",title:e("left-panel.public-chat")}]),2),p=f[0],m=f[1],h=Nu((0,a.useState)(e("left-panel.public-chat")),2),v=h[0],x=h[1];(0,a.useEffect)((function(){""!==n.userId&&(s.set(n.userId,n.name),l(new Map(s))),r.forEach((function(e){var t;if(e.isPrivate)if(e.from.userId!==(null===c||void 0===c?void 0:c.userId))s.has(e.from.userId)||(s.set(e.from.userId,null!==(t=e.from.name)&&void 0!==t?t:""),l(new Map(s)));else if(e.from.userId===(null===c||void 0===c?void 0:c.userId)&&e.to&&!s.has(e.to)){var n=E.selectById(Gt.getState(),e.to);n&&(s.set(n.userId,n.name),l(new Map(s)))}}))}),[n,r]),(0,a.useEffect)((function(){var t=[{id:"public",title:e("left-panel.public-chat")}];s.forEach((function(e,n){t.push({id:n,title:e})})),m(t)}),[s,e]),(0,a.useEffect)((function(){var e=p.filter((function(e){return e.id===d}));e.length&&x(e[0].title)}),[d,p]);return(0,o.jsxs)("div",_u({className:"h-full"},{children:[(0,o.jsx)(xu.R,_u({value:d,onChange:function(e){t(Ye(e)),t(Ze({task:"DEL",id:e}))}},{children:(0,o.jsxs)("div",_u({className:"relative h-10 z-10"},{children:[(0,o.jsxs)(xu.R.Button,_u({className:"flex items-center justify-between py-2 text-sm text-black font-bold leading-5 border-b-4 border-solid transition ease-in shrink-0 border-primaryColor w-full"},{children:[(0,o.jsx)("span",_u({className:"block truncate pl-4 md:pl-6"},{children:v})),(0,o.jsxs)("span",_u({className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},{children:[u.length?(0,o.jsx)("span",_u({className:"shake pr-1 -mb-1"},{children:(0,o.jsx)("i",{className:"pnm-chat shake"})})):null,(0,o.jsx)("svg",_u({xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},{children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}))]}))]})),(0,o.jsx)(Kt.u,_u({as:a.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100 z-90",leaveTo:"opacity-0"},{children:(0,o.jsx)(xu.R.Options,_u({className:"absolute max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{children:p.map((function(e){return(0,o.jsx)(xu.R.Option,_u({className:function(e){var t=e.active;return"relative cursor-pointer select-none py-2 pl-10 pr-4 ".concat(t?"bg-primaryColor text-white":"text-gray-900")},value:e.id},{children:function(t){var n=t.selected;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("span",_u({className:"flex truncate items-center justify-between ".concat(n?"font-medium":"font-normal")},{children:[e.title,u.filter((function(t){return t===e.id})).length?(0,o.jsx)("span",_u({className:"shake pr-1"},{children:(0,o.jsx)("i",{className:"pnm-chat shake"})})):null]})),n?(0,o.jsx)("span",_u({className:"absolute inset-y-0 left-0 flex items-center pl-3 text-secondaryColor"},{children:(0,o.jsx)("svg",_u({xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2},{children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}))})):null]})}}),e.id)}))}))}))]}))})),(0,o.jsx)("div",_u({className:"h-[calc(100%-40px)]"},{children:(0,o.jsx)(ku,{userId:d})}))]}))}));var Au=function(){return Au=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Au.apply(this,arguments)},Ru=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Ou=(0,qt.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_chat}),(function(e){return e}));const Iu=function(e){var t=e.currentRoom,n=e.isRecorder,r=zt(Ou),i=Ru((0,a.useState)(!1),2),s=i[0],l=i[1];return(0,a.useEffect)((function(){var e,t,n,o,a=null===(t=null===(e=Gt.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_chat,i=null===(o=null===(n=Gt.getState().session.currentUser)||void 0===n?void 0:n.metadata)||void 0===o?void 0:o.is_admin;a&&!i&&!1!==r&&l(!1)}),[]),(0,a.useEffect)((function(){n&&l(!1)}),[n]),(0,a.useEffect)((function(){n||l(!r)}),[r,n]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",Au({className:"h-[calc(100%)] messageModule-wrapper relative z-10 right-0 top-0 w-[250px] xl:w-[300px] multi-gradient"},{children:(0,o.jsx)("div",Au({className:"all-MessageModule-wrap h-full"},{children:(0,o.jsx)(Pu,{})}))})),n?(0,o.jsx)("div",{className:"w-[100%] h-[1px] hiddenAnimation absolute z-50 bottom-0 bg-gradient-to-r from-primaryColor to-secondaryColor"}):null,s?(0,o.jsx)("div",Au({className:"message-form fixed z-[99] xl:z-0 bottom-1 w-[230px] xl:w-[300px] bg-white"},{children:(0,o.jsx)(vu,{currentRoom:t})})):null]})};var Fu=function(){return Fu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Fu.apply(this,arguments)};const Mu=a.memo((function(e){var t=e.currentRoom,n=e.isRecorder,r=Ht();return(0,o.jsxs)("div",Fu({id:"main-right-panel",className:"h-[calc(100%)]"},{children:[(0,o.jsxs)("div",Fu({className:"hidden md:inline-block close absolute -left-[14px] z-20 top-1 w-6 h-6 rounded-full border border-solid border-primaryColor bg-white cursor-pointer",onClick:function(){r(le(!1))}},{children:[(0,o.jsx)("span",{className:"inline-block w-[18px] h-[1px] bg-primaryColor absolute rotate-45 top-[11px] left-[2px]"}),(0,o.jsx)("span",{className:"inline-block w-[18px] h-[1px] bg-primaryColor absolute -rotate-45 top-[11px] right-[2px]"})]})),(0,o.jsx)(Iu,{currentRoom:t,isRecorder:n})]}))}));var Du=function(){return Du=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Du.apply(this,arguments)};const Uu=function(e){var t=e.speaker;return(0,o.jsxs)("div",Du({className:"m-1 px-3 py-1 primaryColor text-[12px] rounded-2xl inline-flex items-center bg-white border border-solid border-white"},{children:[(0,o.jsx)("i",{className:"pnm-mic-unmute text-[10px] secondaryColor mr-2"}),t.name]}))};var Lu=function(){return Lu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Lu.apply(this,arguments)};const Bu=a.memo((function(){var e=zt(w.selectAll);return(0,o.jsx)("div",Lu({className:"active-speakers-wrap flex w-full items-center justify-center absolute top-0 left-0 z-[9999]"},{children:e.length?e.map((function(e){return(0,o.jsx)(Uu,{speaker:e},e.sid)})):null}))}));var Wu=function(){return Wu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Wu.apply(this,arguments)},Vu=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Gu=(0,qt.P1)((function(e){return e.roomSettings.roomVideoQuality}),(function(e){return e}));const Hu=function(e){var t=e.track,n=(0,a.useRef)(null),r=Vu((0,a.useState)(),2),i=r[0],s=r[1],l=Vu((0,a.useState)(!1),2),c=l[0],u=l[1],d=zt(Gu);(0,a.useEffect)((function(){t instanceof Oe.E8?t.setVideoQuality(d):u(!0)}),[d,t]),(0,a.useEffect)((function(){var e,r=n.current;return r&&(null===(e=t.videoTrack)||void 0===e||e.attach(r)),function(){var e;r&&(null===(e=t.videoTrack)||void 0===e||e.detach(r))}}),[t]);return(0,o.jsxs)("div",Wu({className:"screen-share-video relative pb-[calc(100vh-210px)]"},{children:[i?null:(0,o.jsx)("div",Wu({className:"loading flex justify-center"},{children:(0,o.jsxs)("div",Wu({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]}))})),(0,o.jsx)("button",Wu({className:"absolute z-[99] bottom-0 right-0 p-1 bg-black/50",onClick:function(){var e;document.fullscreenElement?document.exitFullscreen():null===(e=n.current)||void 0===e||e.requestFullscreen().catch((function(e){alert("Error attempting to enable full-screen mode: ".concat(e.message," (").concat(e.name,")"))}))}},{children:(0,o.jsx)("i",{className:"icon pnm-fullscreen text[20px] text-white"})})),(0,o.jsx)("video",{onLoadedData:function(){console.log("onPlaying"),s(!0)},ref:n,className:"video-player absolute ".concat(c?"self-screen-share":"remote-screen-share")})]}))};var zu=function(){return zu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},zu.apply(this,arguments)};const Qu=function(e){var t=e.track,n=(0,a.useRef)(null);return(0,a.useEffect)((function(){var e,r=n.current;return r&&(null===(e=t.audioTrack)||void 0===e||e.attach(r)),function(){var e;r&&(null===(e=t.audioTrack)||void 0===e||e.detach(r))}}),[t]),(0,o.jsx)("div",zu({style:{display:"none"}},{children:(0,o.jsx)("audio",{autoPlay:!0,ref:n})}))};var qu=function(){return qu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},qu.apply(this,arguments)},$u=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Ju=(0,qt.P1)((function(e){return e.roomSettings.roomVideoQuality}),(function(e){return e}));const Xu=function(e){var t=e.track,n=(0,a.useRef)(null),r=$u((0,a.useState)(),2),i=r[0],s=r[1],l=zt(Ju);(0,a.useEffect)((function(){t instanceof Oe.E8&&t.setVideoQuality(l)}),[l,t]),(0,a.useEffect)((function(){var e,r=n.current;return r&&(null===(e=t.videoTrack)||void 0===e||e.attach(r)),function(){var e;r&&(null===(e=t.videoTrack)||void 0===e||e.detach(r))}}),[t]);return(0,o.jsxs)("div",qu({className:"camera-video-player"},{children:[i?null:(0,o.jsx)("div",qu({className:"loading absolute text-center top-3 z-[999] left-0 right-0 m-auto"},{children:(0,o.jsxs)("div",qu({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]}))})),(0,o.jsx)("button",qu({className:"absolute z-[999] top-2 right-2 p-1 bg-black/50 w-6 h-6 flex",onClick:function(){var e;document.fullscreenElement?document.exitFullscreen():null===(e=n.current)||void 0===e||e.requestFullscreen().catch((function(e){alert("Error attempting to enable full-screen mode: ".concat(e.message," (").concat(e.name,")"))}))}},{children:(0,o.jsx)("i",{className:"icon pnm-fullscreen text[14px] text-white"})})),(0,o.jsx)("video",{className:"camera-video",onLoadedData:function(){s(!0)},ref:n,height:"200px",width:"200px"})]}))};var Yu=function(){return Yu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Yu.apply(this,arguments)},Ku=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Zu=function(e){var t=e.userId,n=zt((function(e){return E.selectById(e,t)})),r=Ku((0,a.useState)("#FFFFFF"),2),i=r[0],s=r[1];(0,a.useEffect)((function(){switch(null===n||void 0===n?void 0:n.connectionQuality){case Oe.ZV.Excellent:s("#38f105");break;case Oe.ZV.Good:s("#c8f6bd");break;case Oe.ZV.Poor:s("#FF0000");break;default:s("#FFFFFF")}}),[null===n||void 0===n?void 0:n.connectionQuality]);return(0,o.jsx)("div",Yu({className:"connection-status"},{children:(0,o.jsx)("i",{style:{color:i},className:"pnm-network text-[7px]"})}))};var ed=function(){return ed=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ed.apply(this,arguments)};const td=function(e){var t=e.userId,n=zt((function(e){return E.selectById(e,t)}));return(0,o.jsx)(o.Fragment,{children:(null===n||void 0===n?void 0:n.audioTracks)?(0,o.jsx)("div",ed({className:"mic-status"},{children:(null===n||void 0===n?void 0:n.isMuted)?(0,o.jsx)("p",ed({className:"mute"},{children:(0,o.jsx)("i",{className:"pnm-mic-mute text-white text-[9px]"})})):(0,o.jsx)("p",ed({className:"mute"},{children:(0,o.jsx)("i",{className:"pnm-mic-unmute text-white text-[9px]"})}))})):null})};var nd=function(){return nd=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},nd.apply(this,arguments)};const rd=a.memo((function(e){var t=e.userId,n=e.track;return(0,o.jsx)("div",nd({className:"camera-modules"},{children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Zu,{userId:t}),(0,o.jsx)(td,{userId:t}),(0,o.jsx)(Xu,{track:n})]})}))}));var od=function(){return od=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},od.apply(this,arguments)};const ad=function(e){var t,n=e.participantType,r=e.participant,a=zt((function(e){return w.selectById(e,r.identity)}));return(0,o.jsx)("div",od({className:"video-camera-item relative ".concat(a?"speaking":""," ").concat(n.isAdmin?"admin":"participants")},{children:(t=[],r.tracks.forEach((function(e){if(e.source===Oe.fQ.Source.Camera){var a=(0,o.jsxs)("div",od({className:"video-camera-item-inner"},{children:[(0,o.jsxs)("div",od({className:"name"},{children:[r.name," ",n.isLocal?"(me)":null]})),(0,o.jsx)(rd,{userId:r.identity,track:e})]}),e.trackSid);t.push(a)}})),t)}))};var id=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const sd=function(e){var t=id((0,a.useState)([]),2),n=t[0],r=t[1],i=id((0,a.useState)(0),2),s=i[0],l=i[1];return(0,a.useEffect)((function(){var t=0,n=[];e.forEach((function(e){var r;if(e.metadata){var a={isAdmin:null!==(r=JSON.parse(e.metadata).is_admin)&&void 0!==r&&r,isLocal:e instanceof Oe.Ix},i=e.getTracks().filter((function(e){return e.source===Oe.fQ.Source.Camera}));if(t+=i.length,i.length){var s=(0,o.jsx)(ad,{participantType:a,participant:e},e.sid);n.push(s)}}})),l(t),r(n)}),[e]),{allParticipants:n,totalNumWebcams:s}};var ld=function(){return ld=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ld.apply(this,arguments)},cd=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const ud=a.memo((function(e){var t=e.videoSubscribers,n=e.perPage,r=e.isVertical,i=Ht(),s=(0,Qt.$)().t,l=sd(t),c=l.allParticipants,u=l.totalNumWebcams,d=cd((0,a.useState)(0),2),f=d[0],p=d[1],m=cd((0,a.useState)([]),2),h=m[0],v=m[1],x=cd((0,a.useState)(!1),2),b=x[0],y=x[1],g=cd((0,a.useState)(!1),2),w=g[0],j=g[1],S=cd((0,a.useState)(null!==n&&void 0!==n?n:24),2),k=S[0],_=S[1];(0,a.useEffect)((function(){c.length<=k?v(c):(p(1),N(c,1,k))}),[c,k]),(0,a.useEffect)((function(){u>k?(y(1!==f),j(!(f>=u/k))):(y(!1),j(!1))}),[u,f,k]);var N=function(e,t,n){var r=cd(e).slice(0).slice((t-1)*n,t*n);v(r),i(G(1!==t))};return(0,o.jsxs)(o.Fragment,{children:[u>0?(0,o.jsx)("div",ld({className:"all-webcam-wrapper total-cam-".concat(u," selected-cam-").concat(k," page-").concat(f," ").concat(r?"vertical-webcams":"")},{children:(0,o.jsx)("div",ld({className:"all-webcam-wrapper-inner"},{children:(0,o.jsxs)(o.Fragment,{children:[b?(0,o.jsx)("button",ld({type:"button",className:"previous-cam",onClick:function(){return N(c,f-1,k),void p(f-1)}},{children:(0,o.jsx)("i",{className:"pnm-arrow-up"})})):null,(0,o.jsx)(o.Fragment,{children:h}),w?(0,o.jsx)("button",ld({type:"button",className:"next-cam",onClick:function(){return N(c,f+1,k),void p(f+1)}},{children:(0,o.jsx)("i",{className:"pnm-arrow-down"})})):null]})}))})):null,u>6&&!r?(0,o.jsxs)("div",ld({className:"select-camera-number"},{children:[(0,o.jsx)("label",ld({htmlFor:"select-camera-num"},{children:s("app.webcams-per-page")})),(0,o.jsxs)("select",ld({name:"select-camera-num",id:"select-camera-num",onChange:function(e){return _(Number(e.currentTarget.value))}},{children:[(0,o.jsx)("option",ld({value:"6"},{children:"6"})),(0,o.jsx)("option",ld({value:"8"},{children:"8"})),(0,o.jsx)("option",ld({value:"12"},{children:"12"})),(0,o.jsx)("option",ld({value:"15"},{children:"15"})),(0,o.jsx)("option",ld({value:"18"},{children:"18"})),(0,o.jsx)("option",ld({selected:!0},{children:"24"}))]}))]})):null]})}));var dd=(0,qt.P1)((function(e){return e.bottomIconsActivity.isActiveParticipantsPanel}),(function(e){return e})),fd=(0,qt.P1)((function(e){return e.bottomIconsActivity.isActiveChatPanel}),(function(e){return e})),pd=(0,qt.P1)((function(e){return e.roomSettings.activateWebcamsView}),(function(e){return e}));const md=a.memo((function(e){var t=e.videoSubscribers,n=zt(dd),r=zt(fd),a=zt(pd);return(0,o.jsx)(o.Fragment,{children:!t||!a||r&&n?null:(0,o.jsx)(ud,{videoSubscribers:t,perPage:3,isVertical:!0})})}));var hd=function(){return hd=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},hd.apply(this,arguments)};const vd=a.memo((function(e){var t=e.screenShareTracks,n=e.videoSubscribers;return(0,o.jsxs)("div",hd({className:"share-screen-wrapper is-share-screen-running"},{children:[(0,o.jsx)(md,{videoSubscribers:n}),function(){if(t){var e=Array();return t.forEach((function(t){t.source===Oe.fQ.Source.ScreenShare?e.push((0,o.jsx)(Hu,{track:t},t.trackSid)):t.source===Oe.fQ.Source.ScreenShareAudio&&e.push((0,o.jsx)(Qu,{track:t},t.trackSid))})),e}return null}()]}))}));var xd=function(){return xd=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xd.apply(this,arguments)};const bd=a.memo((function(e){var t=e.track,n=(0,a.useRef)(null);return(0,a.useEffect)((function(){var e,r=n.current;return r&&(null===(e=t.audioTrack)||void 0===e||e.attach(r)),function(){var e;r&&(null===(e=t.audioTrack)||void 0===e||e.detach(r))}}),[t]),(0,o.jsx)("div",xd({style:{display:"none"}},{children:(0,o.jsx)("audio",{autoPlay:!0,ref:n})}))}));var yd=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const gd=a.memo((function(e){var t=e.audioSubscribers,n=yd((0,a.useState)([]),2),r=n[0],i=n[1];return(0,a.useEffect)((function(){var e=[];t.forEach((function(t){t.tracks.forEach((function(t){e.push((0,o.jsx)(bd,{track:t},t.trackSid))}))})),i(e)}),[t]),(0,o.jsx)(o.Fragment,{children:r.length?r:null})}));var wd=function(){return wd=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},wd.apply(this,arguments)},jd=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Sd=(0,qt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.shared_note_pad_features}),(function(e){return e})),kd=(0,qt.P1)((function(e){var t,n,r;return null===(r=null===(n=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings)||void 0===r?void 0:r.lock_shared_notepad}),(function(e){return e}));const _d=a.memo((function(e){var t=e.videoSubscribers,n=Ht(),r=zt(Sd),i=zt(kd),s=Gt.getState().session.currentUser,l=jd((0,a.useState)(),2),c=l[0],u=l[1],d=jd((0,a.useState)(),2),f=d[0],p=d[1];(0,a.useEffect)((function(){n(ce(!1))}),[n]),(0,a.useEffect)((function(){if((null===r||void 0===r?void 0:r.is_active)&&r.host){var e=r.host;if(r.host.match("host.docker.internal")&&(e="http://localhost:9001"),null===s||void 0===s?void 0:s.isRecorder)return void p("".concat(e,"/p/").concat(r.read_only_pad_id,"?userName=").concat(null===s||void 0===s?void 0:s.name));e=i?"".concat(e,"/p/").concat(r.read_only_pad_id,"?userName=").concat(null===s||void 0===s?void 0:s.name):"".concat(e,"/p/").concat(r.note_pad_id,"?userName=").concat(null===s||void 0===s?void 0:s.name),p(e)}}),[r,i]);var m=function(){u(!0)};return(0,o.jsxs)("div",wd({className:"middle-fullscreen-wrapper h-full flex ".concat((null===t||void 0===t?void 0:t.size)?"verticalsWebcamsActivated":"")},{children:[(0,o.jsx)(md,{videoSubscribers:t}),f?(0,o.jsxs)("div",wd({className:"notepad-wrapper m-auto h-[calc(100%-50px)] w-full max-w-[1100px] flex-1 sm:px-5 mt-9"},{children:[c?null:(0,o.jsx)("div",wd({className:"loading absolute left-[50%] top-[40%] flex justify-center"},{children:(0,o.jsxs)("div",wd({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]}))})),(0,o.jsx)("iframe",{height:"100%",width:"100%",src:f,onLoad:m})]})):null]}))}));var Nd=n(23493),Cd=n.n(Nd),Td=n(74474),Ed=n.n(Td),Pd=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Ad=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Rd=function(e,t,n){var r,o,a;return!(!t||!(t.id===(null===(r=e.editingElement)||void 0===r?void 0:r.id)||t.id===(null===(o=e.resizingElement)||void 0===o?void 0:o.id)||t.id===(null===(a=e.draggingElement)||void 0===a?void 0:a.id)||t.version>n.version||t.version===n.version&&t.versionNonce<n.versionNonce))},Od=function(){return Od=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Od.apply(this,arguments)},Id=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Fd=new Map,Md=function(e,t){var n,r,o,a,i=Gt.getState().session,s={sid:null!==(r=null===(n=i.currentUser)||void 0===n?void 0:n.sid)&&void 0!==r?r:"",userId:null!==(a=null===(o=i.currentUser)||void 0===o?void 0:o.userId)&&void 0!==a?a:""},l={type:zo.SCENE_UPDATE,from:s,msg:JSON.stringify(e)},c={type:Go.WHITEBOARD,room_sid:i.currentRoom.sid,room_id:i.currentRoom.room_id,message_id:"",body:l};""!==t&&(c.to=t),Il(JSON.stringify(c))},Dd=function(e,t){var n,r,o,a,i=Gt.getState().session,s={type:zo.ADD_WHITEBOARD_OFFICE_FILE,from:{sid:null!==(r=null===(n=i.currentUser)||void 0===n?void 0:n.sid)&&void 0!==r?r:"",userId:null!==(a=null===(o=i.currentUser)||void 0===o?void 0:o.userId)&&void 0!==a?a:""},msg:JSON.stringify(e)},l={type:Go.WHITEBOARD,room_sid:i.currentRoom.sid,room_id:i.currentRoom.room_id,message_id:"",body:s};""!==t&&(l.to=t),Il(JSON.stringify(l))},Ud=function(){return Ud=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ud.apply(this,arguments)},Ld=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Bd=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Wd=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Vd=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};const Gd=function(e){var t=e.currenPage,n=e.excalidrawAPI,r=(0,a.useRef)(null),i=Wd((0,a.useState)(),2),s=i[0],c=i[1],u=(0,Qt.$)().t,d=Ht(),f=["jpg","jpeg","png","svg","pdf","docx","doc","odt","txt","rtf","xml","xlsx","xls","ods","csv","pptx","ppt","odp","vsd","odg","html"],p=Gt.getState().session,m=wr({allowedFileTypes:f,maxFileSize:30,files:s}),h=m.isUploading,v=m.result;(0,a.useEffect)((function(){v&&v.filePath&&x(v.filePath,v.fileName,v.fileExtension)}),[v]);var x=function(e,t,n){switch(n){case"jpg":case"jpeg":case"png":case"svg":(0,l.Am)(u("right-panel.file-upload-success"),{type:l.Am.TYPE.SUCCESS}),y(e,t);break;default:b(p,e)}},b=function(e,t){return Ld(void 0,void 0,void 0,(function(){var r,o,a,i,s,c,d,f,p;return Bd(this,(function(m){switch(m.label){case 0:return r=l.Am.loading(u("whiteboard.converting"),{type:"info"}),o={sid:e.currentRoom.sid,roomId:e.currentRoom.room_id,userId:null===(p=e.currentUser)||void 0===p?void 0:p.userId,file_path:t},[4,Vo("convertWhiteboardFile",o)];case 1:if(!(a=m.sent()).status)return l.Am.update(r,{render:u(a.msg),type:"error",isLoading:!1,closeButton:!0}),[2];for(i=[],s=0;s<a.total_pages;s++)c="page_"+(s+1)+".png",d={id:on(),currenPage:s+1,filePath:a.file_path+"/"+c,fileName:c,uploaderWhiteboardHeight:n.getAppState().height,uploaderWhiteboardWidth:n.getAppState().width},i.push(d);return f={fileId:a.file_id,fileName:a.file_name,filePath:a.file_path,totalPages:a.total_pages,pageFiles:JSON.stringify(i)},Gt.dispatch(ct(f)),[4,(h=500,new Promise((function(e){return setTimeout(e,h)})))];case 2:return m.sent(),Dd(f),l.Am.update(r,{render:u("whiteboard.file-ready"),type:"success",isLoading:!1,autoClose:1e3}),[2]}var h}))}))},y=function(e,r){var o,a,i,s,l={id:on(),currenPage:t,filePath:e,fileName:r,uploaderWhiteboardHeight:n.getAppState().height,uploaderWhiteboardWidth:n.getAppState().width};d(at(l));var c=Gt.getState().whiteboard.whiteboardFiles,u=Gt.getState().session,f={type:zo.ADD_WHITEBOARD_FILE,from:{sid:null!==(a=null===(o=u.currentUser)||void 0===o?void 0:o.sid)&&void 0!==a?a:"",userId:null!==(s=null===(i=u.currentUser)||void 0===i?void 0:i.userId)&&void 0!==s?s:""},msg:c},p={type:Go.WHITEBOARD,room_sid:u.currentRoom.sid,room_id:u.currentRoom.room_id,message_id:"",body:f};Il(JSON.stringify(p))};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",{type:"file",id:"chat-file",ref:r,style:{display:"none"},onChange:function(e){return function(e){var t=e.target.files;t.length&&c(Vd([],Wd(t),!1))}(e)},accept:f.map((function(e){return"."+e})).join(",")}),(0,o.jsxs)("button",Ud({disabled:h,onClick:function(){return function(){var e;h||null===(e=r.current)||void 0===e||e.click()}()},className:"w-[90px] text-xs h-7 flex items-center justify-center"},{children:[(0,o.jsx)("i",{className:"pnm-attachment primaryColor hover:secondaryColor text-[14px] opacity-50 mr-1"}),u("whiteboard.upload-file")]}))]})})};var Hd,zd,Qd,qd,$d,Jd=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Xd=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Yd="",Kd="",Zd="",ef=function(e,t,n,r,o){return Jd(void 0,void 0,void 0,(function(){return Xd(this,(function(a){return[2,new Promise((function(a,i){return Jd(void 0,void 0,void 0,(function(){var s,l,c;return Xd(this,(function(u){switch(u.label){case 0:return[4,fetch(e)];case 1:return[4,u.sent().blob()];case 2:return(s=u.sent())||i(null),Yd=t,qd=r,$d=o,(Qd=n)<0&&(Qd=1),l=new FileReader,c=new FileReader,l.onloadend=function(){"unknown"!==(Kd=nf(l))?c.readAsDataURL(s):i(null)},l.readAsArrayBuffer(s),c.onload=function(){if(Zd=(Zd=c.result).replace("application/octet-stream",Kd),"image/svg+xml"!==Kd){var e=new Image;e.src=Zd,e.onload=function(){return Jd(this,void 0,void 0,(function(){var t;return Xd(this,(function(n){switch(n.label){case 0:return[4,rf(e.height,e.width)];case 1:return n.sent(),t=tf(),a(t),[2]}}))}))}}else if("image/svg+xml"==Kd){Hd=.8*qd,zd=.7*$d;var t=tf();a(t)}else i("unsupported file")},[2]}}))}))}))]}))}))},tf=function(){var e={id:Yd,dataURL:Zd,mimeType:Kd,created:Date.now()},t=.4;return Math.round(100*zd/$d)<50&&(t=.7),{image:e,elm:{id:Yd,type:"image",x:qd*t,y:.06*$d,width:zd,height:Hd,angle:0,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:"hachure",strokeWidth:1,strokeStyle:"solid",roughness:1,opacity:100,groupIds:[],strokeSharpness:"round",seed:an(),version:Qd+1,versionNonce:an(),isDeleted:!1,boundElements:null,updated:Date.now(),link:null,status:"pending",fileId:Yd,scale:[1,1]}}},nf=function(e){for(var t,n=new Uint8Array(e.result).subarray(0,4),r="",o=0;o<n.length;o++)r+=n[o].toString(16);switch(r){case"89504e47":t="image/png";break;case"47494638":t="image/gif";break;case"ffd8ffDB":case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":case"ffd8ffe3":case"ffd8ffe8":t="image/jpeg";break;case"3c3f786d":case"3c737667":t="image/svg+xml";break;default:t="unknown"}return t},rf=function(e,t){return Jd(void 0,void 0,void 0,(function(){var n,r,o;return Xd(this,(function(a){for(Hd=Number("".concat(e)),zd=Number("".concat(t)),n=qd-40,r=$d-180,o=.01;Hd>n;)Hd-=Hd*o,zd-=zd*o,o+=.01;for(o=.01;zd>r;)Hd-=Hd*o,zd-=zd*o,o+=.01;return[2]}))}))};const of=function(e){var t=(0,a.useRef)();return(0,a.useEffect)((function(){t.current=e})),t.current};var af=function(){return af=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},af.apply(this,arguments)},sf=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},lf=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},cf=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},uf=(0,qt.P1)((function(e){return e.whiteboard.totalPages}),(function(e){return e})),df=(0,qt.P1)((function(e){return e.whiteboard.currentPage}),(function(e){return e}));const ff=a.memo((function(e){var t,n=e.excalidrawAPI,r=e.isPresenter,i=zt(uf),s=zt(df),c=cf((0,a.useState)(),2),u=c[0],d=c[1],f=cf((0,a.useState)(!0),2),p=f[0],m=f[1],h=cf((0,a.useState)(!1),2),v=h[0],x=h[1],b=of(s),y=Ht(),g=(0,Qt.$)().t,w=Gt.getState().session.currentUser,j=null===(t=null===w||void 0===w?void 0:w.metadata)||void 0===t?void 0:t.is_admin,S=null===w||void 0===w?void 0:w.isRecorder;(0,a.useEffect)((function(){b&&s!==b&&n&&k()}),[s,b,n]),(0,a.useEffect)((function(){s>1&&m(!1),1===s&&m(!0),v?s!==i&&x(!1):s===i&&x(!0)}),[s,v,i]),(0,a.useEffect)((function(){for(var e=[],t=0;t<i;t++)e.push((0,o.jsx)("option",af({value:t+1},{children:g("whiteboard.page",{count:t+1})}),t));d(e)}),[i]),(0,a.useEffect)((function(){return n&&r&&setTimeout((function(){var e=Gt.getState().whiteboard.currentPage;_(e)}),100),function(){if(n&&r){var e=Gt.getState().whiteboard.currentPage,t=n.getSceneElementsIncludingDeleted();t.length&&sessionStorage.setItem(String(e),JSON.stringify(t))}}}),[n]);var k=function(){if(n&&r){var e=n.getSceneElementsIncludingDeleted();e.length&&sessionStorage.setItem(String(b),JSON.stringify(e)),N(),_(s)}},_=function(e){var t=sessionStorage.getItem(e);if(t&&n){var o=JSON.parse(t);o.length&&(n.updateScene({elements:o}),r&&Md(o))}},N=function(){null===n||void 0===n||n.updateScene({elements:[]})},C=function(e){!function(e,t){var n,r,o,a,i=Gt.getState().session,s={type:Go.WHITEBOARD,room_sid:i.currentRoom.sid,message_id:"",body:{type:zo.PAGE_CHANGE,from:{sid:null!==(r=null===(n=i.currentUser)||void 0===n?void 0:n.sid)&&void 0!==r?r:"",userId:null!==(a=null===(o=i.currentUser)||void 0===o?void 0:o.userId)&&void 0!==a?a:""},msg:"".concat(e)}};""!==t&&(s.to=t),Il(JSON.stringify(s))}(e),setTimeout((function(){y(lt(e))}),500)},T=function(){C(s-1)},E=function(){C(s+1)},P=function(){return sf(void 0,void 0,void 0,(function(){var e,t;return lf(this,(function(n){switch(n.label){case 0:return e={user_id:null===w||void 0===w?void 0:w.userId,task:"promote"},[4,Vo("switchPresenter",e)];case 1:return(t=n.sent()).status?(0,l.Am)(g("left-panel.menus.notice.presenter-changed"),{toastId:"lock-setting-status",type:"info"}):(0,l.Am)(g(t.msg),{toastId:"lock-setting-status",type:"error"}),[2]}}))}))};return(0,o.jsx)(o.Fragment,{children:r?(0,o.jsxs)("div",af({className:"flex pt-1 wb-page-navigation"},{children:[(0,o.jsx)("button",af({className:"pre w-8 h-8 flex items-center justify-center",onClick:T,disabled:p},{children:(0,o.jsx)("i",{className:"pnm-arrow-left-short text-black text-xl opacity-50"})})),(0,o.jsx)("select",af({id:"pages",name:"pages",className:"pagesOpts block h-8 py-1 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",onChange:function(e){return C(Number(e.currentTarget.value))},value:s},{children:u})),(0,o.jsx)("button",af({className:"next w-8 h-8 flex items-center justify-center",onClick:E,disabled:v},{children:(0,o.jsx)("i",{className:"pnm-arrow-right-short text-black text-xl opacity-50"})}))]})):(0,o.jsxs)("div",af({className:"flex text-sm items-center justify-center relative pt-3"},{children:[j&&!S?(0,o.jsx)("button",af({className:"w-10 h-8 flex items-center justify-center absolute left-0 top-[3px]",onClick:P},{children:(0,o.jsx)("i",{className:"pnm-presenter primaryColor text-[14px] opacity-50"})})):null,g("whiteboard.page",{count:s})]}))})}));const pf=function(e){var t=(0,a.useRef)();return(0,a.useEffect)((function(){t.current=e})),t.current};var mf=function(){return mf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},mf.apply(this,arguments)},hf=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},vf=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},xf=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},bf=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},yf=(0,qt.P1)((function(e){return e.whiteboard.excalidrawElements}),(function(e){return e})),gf=(0,qt.P1)((function(e){return e.whiteboard.mousePointerLocation}),(function(e){return e})),wf=(0,qt.P1)((function(e){return e.whiteboard.whiteboardFiles}),(function(e){return e})),jf=(0,qt.P1)((function(e){return e.whiteboard.requestedWhiteboardData}),(function(e){return e})),Sf=(0,qt.P1)((function(e){var t,n,r;return null===(r=null===(n=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings)||void 0===r?void 0:r.lock_whiteboard}),(function(e){return e})),kf=(0,qt.P1)((function(e){return e.whiteboard.currentPage}),(function(e){return e})),_f=(0,qt.P1)((function(e){return e.whiteboard.whiteboardFileId}),(function(e){return e})),Nf=(0,qt.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.is_presenter}),(function(e){return e}));const Cf=a.memo((function(e){var t=e.videoSubscribers,n=Gt.getState().session.currentUser,r=Gt.getState().session.currentRoom,i=new Map,s=(0,Qt.$)().i18n,l=xf(function(){var e=Pd((0,a.useState)(null),2),t=e[0],n=e[1];return[t,(0,a.useCallback)((function(e){return n(e)}),[])]}(),2),c=l[0],u=l[1],d=xf((0,a.useState)(!0),2),f=d[0],p=d[1],m=xf((0,a.useState)("light"),2),h=m[0],v=m[1],x=xf((0,a.useState)(-1),2),b=x[0],y=x[1],g=zt(yf),w=zt(gf),j=zt(E.selectAll),S=zt(wf),k=zt(jf),_=zt(Sf),N=zt(_f),C=pf(N),T=zt(Nf),P=zt(kf),A=of(P),R=xf((0,a.useState)(!1),2),O=R[0],I=R[1];(0,a.useEffect)((function(){var e,t;c||(v("light"),(null===n||void 0===n?void 0:n.isRecorder)||(null===(t=null===(e=r.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_whiteboard)||p(!1))}),[c]),(0,a.useEffect)((function(){var e;return O||(!function(){var e=Gt.getState().session,t=E.selectAll(Gt.getState()).filter((function(t){var n;return t.sid!==(null===(n=e.currentUser)||void 0===n?void 0:n.sid)}));if(t.length){t.sort((function(e,t){return e.joinedAt-t.joinedAt}));var n=t;n.length>2&&(n=t.slice(0,2)),n.forEach((function(t){var n,r,o,a,i={type:Go.SYSTEM,room_sid:e.currentRoom.sid,message_id:"",to:t.sid,body:{type:Ho.INIT_WHITEBOARD,from:{sid:null!==(r=null===(n=e.currentUser)||void 0===n?void 0:n.sid)&&void 0!==r?r:"",userId:null!==(a=null===(o=e.currentUser)||void 0===o?void 0:o.userId)&&void 0!==a?a:""},msg:""}};Il(JSON.stringify(i))}))}}(),e=setTimeout((function(){O||I(!0)}),500)),k.requested&&c&&function(e,t){var n=Gt.getState().whiteboard,r={fileId:n.whiteboardFileId,fileName:n.fileName,filePath:n.filePath,totalPages:n.totalPages,currenPage:n.currentPage,pageFiles:n.whiteboardFiles};Dd(r,t);var o=e.getSceneElementsIncludingDeleted();o.length&&Md(o,t),Gt.dispatch(st({requested:!1,sendTo:""}))}(c,k.sendTo),function(){e&&clearTimeout(e)}}),[k,c,O]),(0,a.useEffect)((function(){c&&N!==C&&(y(-1),c.updateScene({elements:[]}),c.addFiles([]),sessionStorage.clear())}),[N,c,C]),(0,a.useEffect)((function(){c&&(j.forEach((function(e){e.metadata.is_admin&&(i.has(e.userId)||i.set(e.userId,{}))})),c.updateScene({collaborators:i}))}),[j,c]),(0,a.useEffect)((function(){"undefined"!==typeof _&&((null===n||void 0===n?void 0:n.isRecorder)||p(_))}),[_]),(0,a.useEffect)((function(){var e,t;T?p(!1):(null===n||void 0===n?void 0:n.isRecorder)||p(null===(t=null===(e=null===n||void 0===n?void 0:n.metadata)||void 0===e?void 0:e.lock_settings.lock_whiteboard)||void 0===t||t)}),[T]),(0,a.useEffect)((function(){A&&P!==A&&y(-1),!T&&A&&P!==A&&(null===c||void 0===c||c.updateScene({elements:[]}),null===c||void 0===c||c.addFiles([]))}),[P,A,T,c]),(0,a.useEffect)((function(){if(g&&c&&O){var e=JSON.parse(g),t=function(e,t,n){var r,o,a,i,s=e.reduce((function(e,t,n){return e[t.id]=[t,n],e}),{}),l=e.slice(),c=new WeakMap,u=0,d=0,f=-1;try{for(var p=Ad(t),m=p.next();!m.done;m=p.next()){var h=m.value;f++;var v=s[h.id];if(Rd(n,null===v||void 0===v?void 0:v[0],h))h.parent&&delete h.parent;else{v&&c.set(v[0],!0);var x=h.parent||(null===(a=t[f-1])||void 0===a?void 0:a.id)||null;if(null!=x)if(delete h.parent,"^"===x)d++,0===u?(l.unshift(h),s[h.id]=[h,u-d]):(l.splice(u+1,0,h),s[h.id]=[h,u+1-d],u++);else{var b=s[x]?null===(i=s[x])||void 0===i?void 0:i[1]:null;null!=b&&(b+=d),null!=b&&b>=u?(l.splice(b+1,0,h),d++,s[h.id]=[h,b+1-d],u=b+1):null!=b?(l.splice(u+1,0,h),d++,s[h.id]=[h,u+1-d],u++):(l.push(h),s[h.id]=[h,l.length-1-d])}else v?(l[v[1]]=h,s[h.id]=[h,v[1]]):(l.push(h),s[h.id]=[h,l.length-1-d])}}}catch(y){r={error:y}}finally{try{m&&!m.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}return l.filter((function(e){return!c.has(e)}))}(c.getSceneElementsIncludingDeleted(),e,c.getAppState());M(t)}}),[g,c,O]),(0,a.useEffect)((function(){var e;if(w){var t=JSON.parse(w),n=t.pointer,r=t.button,o=t.name,a=t.userId,s=t.selectedElementIds,l=new Map(i),u=null!==(e=l.get(a))&&void 0!==e?e:{};u.pointer=n,u.button=r,u.selectedElementIds=s,u.username=o,l.set(a,u),null===c||void 0===c||c.updateScene({collaborators:l})}}),[w]),(0,a.useEffect)((function(){if(S&&c){var e=JSON.parse(S);if(e.length){var t=e.filter((function(e){return e.currenPage===P}));F(c,t)}}}),[S,c,P]);var F=function(e,t){return hf(void 0,void 0,void 0,(function(){var n,r,o,a,i,s,l,c,u,d,f,p,m;return vf(this,(function(h){switch(h.label){case 0:n=[],r=[],h.label=1;case 1:h.trys.push([1,6,7,8]),o=bf(t),a=o.next(),h.label=2;case 2:if(a.done)return[3,5];for(u in i=a.value,s=window.PLUG_N_MEET_SERVER_URL+"/download/uploadedFile/"+i.filePath,l=e.getFiles(),c=!1,l)if(l[u].id===i.id){c=!0;break}return c?[3,4]:[4,ef(s,i.id,b,i.uploaderWhiteboardHeight,i.uploaderWhiteboardWidth)];case 3:(d=h.sent())&&e&&(n.push(d.image),r.push(d.elm)),h.label=4;case 4:return a=o.next(),[3,2];case 5:return[3,8];case 6:return f=h.sent(),p={error:f},[3,8];case 7:try{a&&!a.done&&(m=o.return)&&m.call(o)}finally{if(p)throw p.error}return[7];case 8:return n.length?(e.addFiles(n),r.forEach((function(t){var n=e.getSceneElementsIncludingDeleted().slice(0);n.filter((function(e){return e.id===t.id})).length||n.push(t),e.updateScene({elements:n})})),[2]):[2]}}))}))},M=function(e,t){var n=(void 0===t?{}:t).init,r=void 0!==n&&n;e.length&&(null===c||void 0===c||c.updateScene({elements:e,commitToHistory:r}),y((0,Td.getSceneVersion)(e)),null===c||void 0===c||c.history.clear())},D=function(e){if(c&&n&&e.length){if(f)return;(0,Td.getSceneVersion)(e)>b&&(y((0,Td.getSceneVersion)(e)),function(e){var t,n,r=e.reduce((function(e,t,n,r){var o;return(!Fd.has(t.id)||t.version>Fd.get(t.id))&&e.push(Od(Od({},t),{parent:0===n?"^":null===(o=r[n-1])||void 0===o?void 0:o.id})),e}),[]);Md(r,"");try{for(var o=Id(r),a=o.next();!a.done;a=o.next()){var i=a.value;Fd.set(i.id,i.version)}}catch(s){t={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}(e))}},U=Cd()((function(e){f||e.pointersMap.size<2&&n&&function(e){var t,n,r,o,a=Gt.getState().session,i={type:zo.POINTER_UPDATE,from:{sid:null!==(n=null===(t=a.currentUser)||void 0===t?void 0:t.sid)&&void 0!==n?n:"",userId:null!==(o=null===(r=a.currentUser)||void 0===r?void 0:r.userId)&&void 0!==o?o:""},msg:JSON.stringify(e)},s={type:Go.WHITEBOARD,room_sid:a.currentRoom.sid,room_id:a.currentRoom.room_id,message_id:"",body:i};Il(JSON.stringify(s))}({pointer:e.pointer,button:e.button||"up",selectedElementIds:null===c||void 0===c?void 0:c.getAppState().selectedElementIds,userId:n.userId,name:n.name})}),33),L=function(){return(0,o.jsx)(o.Fragment,{children:T&&c?(0,o.jsx)(Gd,{currenPage:P,excalidrawAPI:c}):null})},B=function(){return(0,o.jsx)(ff,{excalidrawAPI:c,isPresenter:null!==T&&void 0!==T&&T})};return(0,o.jsxs)("div",mf({className:"middle-fullscreen-wrapper h-full flex ".concat((null===t||void 0===t?void 0:t.size)?"verticalsWebcamsActivated":"")},{children:[(0,o.jsx)(md,{videoSubscribers:t}),(0,o.jsx)("div",mf({className:"excalidraw-wrapper flex-1 w-full max-w-[1200px] m-auto h-[calc(100%-50px)] sm:px-5 mt-9 z-[0]"},{children:(0,o.jsx)(Ed(),{ref:u,onChange:D,onPointerUpdate:U,viewModeEnabled:f,isCollaborating:!0,theme:h,name:"plugNmeet whiteboard",UIOptions:{canvasActions:{loadScene:!1,export:!1,saveAsImage:!(null===n||void 0===n?void 0:n.isRecorder)}},autoFocus:!0,detectScroll:!0,langCode:s.languages[0],renderTopRightUI:L,renderFooter:B})}))]}))}));var Tf=function(){return Tf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Tf.apply(this,arguments)},Ef=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Pf=(0,qt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.external_media_player_features.is_active}),(function(e){return e})),Af=(0,qt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.external_media_player_features.url}),(function(e){return e})),Rf=(0,qt.P1)((function(e){return e.externalMediaPlayer.action}),(function(e){return e})),Of=(0,qt.P1)((function(e){return e.externalMediaPlayer.seekTo}),(function(e){return e})),If=(0,qt.P1)((function(e){return e.bottomIconsActivity.screenHeight}),(function(e){return e})),Ff=(0,qt.P1)((function(e){return e.bottomIconsActivity.screenWidth}),(function(e){return e}));const Mf=function(e){var t,n,r,i=e.videoSubscribers,s=Ef((0,a.useState)(!0),2),l=s[0],c=s[1],u=Ef((0,a.useState)(!1),2),d=u[0],f=u[1],p=Ef((0,a.useState)(!1),2),m=p[0],h=p[1],v=zt(Af),x=zt(Pf),b=zt(Rf),y=zt(Of),g=zt(If),w=zt(Ff),j=Ht(),S=Gt.getState().session,k=null===(n=null===(t=S.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.is_admin,_=null===(r=S.currentUser)||void 0===r?void 0:r.isRecorder,N=(0,a.useRef)();(0,a.useEffect)((function(){_||(j(le(!1)),j(ce(!1)))}),[]),(0,a.useEffect)((function(){v&&(j(ht()),h(!1))}),[j,v]),(0,a.useEffect)((function(){"play"===b?h(!0):"pause"===b&&h(!1)}),[b]),(0,a.useEffect)((function(){var e;d&&y>1&&N&&(null===(e=N.current)||void 0===e||e.seekTo(y))}),[y,N,d]),(0,a.useEffect)((function(){var e;if(k&&d&&N){var t=function(e){var t,n,r,o,a={type:Go.SYSTEM,room_sid:S.currentRoom.sid,message_id:"",body:{type:Ho.EXTERNAL_MEDIA_PLAYER_EVENTS,from:{sid:null!==(n=null===(t=S.currentUser)||void 0===t?void 0:t.sid)&&void 0!==n?n:"",userId:null!==(o=null===(r=S.currentUser)||void 0===r?void 0:r.userId)&&void 0!==o?o:""},msg:e}};Il(JSON.stringify(a))};if(l){var n={action:"pause"};t(JSON.stringify(n))}else{n={action:"play",seekTo:null===(e=N.current)||void 0===e?void 0:e.getCurrentTime()};t(JSON.stringify(n))}}}),[d,l,N]);var C=function(){f(!0)},T=function(){c(!0)},E=function(){c(!1)},P=function(e){N.current=e};return(0,o.jsx)(o.Fragment,{children:x?(0,o.jsxs)("div",Tf({className:"middle-fullscreen-wrapper h-full flex ".concat((null===i||void 0===i?void 0:i.size)?"verticalsWebcamsActivated":"")},{children:[(0,o.jsx)(md,{videoSubscribers:i}),v?(0,o.jsx)("div",Tf({className:"externalMediaPlayerWrapper m-auto w-full flex items-center justify-center max-w-[1000px] flex-1 p-4"},{children:(0,o.jsx)("div",Tf({className:"media-player-inner"},{children:(0,o.jsx)(Na.Z,{ref:P,url:v,width:.7*w,height:.7*g,playing:m,controls:!!k,onReady:C,onPause:T,onPlay:E})}))})):null]})):null})};var Df=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Uf=(0,qt.P1)((function(e){return e.session.screenSharing}),(function(e){return e.isActive})),Lf=(0,qt.P1)((function(e){return e.roomSettings.activateWebcamsView}),(function(e){return e})),Bf=(0,qt.P1)((function(e){return e.roomSettings.activeScreenSharingView}),(function(e){return e})),Wf=(0,qt.P1)((function(e){return e.bottomIconsActivity.isActiveSharedNotePad}),(function(e){return e})),Vf=(0,qt.P1)((function(e){return e.bottomIconsActivity.isActiveWhiteboard}),(function(e){return e})),Gf=(0,qt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.external_media_player_features.is_active}),(function(e){return e}));const Hf=function(e){var t=e.audioSubscribers,n=e.videoSubscribers,r=e.screenShareTracks,i=zt(Uf),s=zt(Lf),l=zt(Bf),c=zt(Wf),u=zt(Vf),d=zt(Gf),f=Df((0,a.useState)(24),2),p=f[0],m=f[1];(0,a.useEffect)((function(){var e=Gt.getState().session.userDeviceType;"mobile"!==e&&"tablet"!==e||m(6)}),[]);return(0,o.jsxs)(o.Fragment,{children:[l&&i&&r?(0,o.jsx)(vd,{videoSubscribers:n,screenShareTracks:r}):null,!i&&c?(0,o.jsx)(_d,{videoSubscribers:n}):null,!i&&u?(0,o.jsx)(Cf,{videoSubscribers:n}):null,!i&&d?(0,o.jsx)(Mf,{videoSubscribers:n}):null,!s||(l||c||u||d)&&(i||c||u||d)||!n?null:(0,o.jsx)(ud,{videoSubscribers:n,perPage:p}),t?(0,o.jsx)(gd,{audioSubscribers:t}):null]})};var zf=function(){return zf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},zf.apply(this,arguments)},Qf=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},qf=(0,qt.P1)((function(e){return e.bottomIconsActivity.isActiveParticipantsPanel}),(function(e){return e})),$f=(0,qt.P1)((function(e){return e.bottomIconsActivity.isActiveChatPanel}),(function(e){return e})),Jf=(0,qt.P1)((function(e){return e.roomSettings.activeScreenSharingView}),(function(e){return e})),Xf=(0,qt.P1)((function(e){return e.bottomIconsActivity.isActiveSharedNotePad}),(function(e){return e})),Yf=(0,qt.P1)((function(e){return e.bottomIconsActivity.isActiveWhiteboard}),(function(e){return e})),Kf=(0,qt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.external_media_player_features.is_active}),(function(e){return e}));const Zf=function(e){var t,n=e.currentRoom,r=e.audioSubscribers,i=e.videoSubscribers,s=e.screenShareTracks,l=e.isRecorder,c=zt(qf),u=zt(Jf),d=zt(Xf),f=zt(Yf),p=zt(Kf),m=Ht(),h=zt($f),v=Qf((0,a.useState)(!0),2),x=v[0],b=v[1],y=Qf((0,a.useState)(),2),g=y[0],w=y[1],j=null!==(t=window.STATIC_ASSETS_PATH)&&void 0!==t?t:"./assets";return(0,a.useEffect)((function(){var e;(null===(e=Gt.getState().session.currentRoom.metadata.room_features)||void 0===e?void 0:e.chat_features.allow_chat)||(b(!1),m(le(!1)))}),[m]),(0,a.useEffect)((function(){var e=[];h?e.push("showChatPanel"):e.push("hideChatPanel"),c?e.push("showParticipantsPanel"):e.push("hideParticipantsPanel"),(null===s||void 0===s?void 0:s.size)&&u?e.push("showScreenShare fullWidthMainArea"):e.push("hideScreenShare"),d?e.push("showSharedNotepad fullWidthMainArea"):e.push("hideSharedNotepad"),f?e.push("showWhiteboard fullWidthMainArea"):e.push("hideWhiteboard"),p?e.push("showExternalMediaPlayer fullWidthMainArea"):e.push("hideExternalMediaPlayer"),w(e.join(" "))}),[u,h,c,d,f,null===s||void 0===s?void 0:s.size,p]),(0,o.jsxs)("div",zf({id:"main-area",className:"".concat(l?"h-[calc(100vh)] isRecorder":"lg:h-[calc(100vh-110px)]","  plugNmeet-app-main-area overflow-hidden relative flex ").concat(g)},{children:[(0,o.jsx)("div",{className:"main-app-bg absolute w-full h-full left-0 top-0 object-cover pointer-events-none ",style:{backgroundImage:'url("'.concat(j,'/imgs/app-banner.jpg")')}}),(0,o.jsxs)("div",zf({className:"inner flex justify-between w-full"},{children:[(0,o.jsx)(Kt.u,zf({className:"transition-left-panel",show:c,enter:"transform transition duration-[400ms]",enterFrom:"opacity-0 translate-x-0",enterTo:"opacity-100",leave:"transform transition duration-[400ms]",leaveFrom:"opacity-100",leaveTo:"opacity-0 -translate-x-full"},{children:(0,o.jsx)(eu,{currentRoom:n})})),(0,o.jsxs)("div",zf({className:"middle-area relative flex-auto"},{children:[(0,o.jsx)(Bu,{}),(0,o.jsx)(Hf,{currentRoom:n,audioSubscribers:r,videoSubscribers:i,screenShareTracks:s})]})),x?(0,o.jsx)(Kt.u,zf({className:"transition-right-panel",show:h,enter:"transform transition duration-[400ms]",enterFrom:"opacity-0 translate-x-0",enterTo:"opacity-100",leave:"transform transition duration-[400ms]",leaveFrom:"opacity-100",leaveTo:"opacity-0 translate-x-full"},{children:(0,o.jsx)(Mu,{currentRoom:n,isRecorder:l})})):null]}))]}))};var ep=function(){return ep=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ep.apply(this,arguments)},tp=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},np=(0,qt.P1)((function(e){return e.session.isStartup}),(function(e){return e}));const rp=function(e){var t=e.onCloseModal,n=tp((0,a.useState)(!0),2),r=n[0],i=n[1],s=zt(np),l=Ht(),c=(0,Qt.$)().t,u=function(e){void 0===e&&(e=!1),i(!1),l(L(!1)),e&&l($e(0)),t()};return(0,o.jsx)("div",{children:s?(0,o.jsx)("div",ep({id:"startupJoinModal",className:"".concat(r?"opacity-1 pointer-events-auto":"pointer-events-none opacity-0"," join-the-audio-popup fixed transition ease-in top-0 left-0 w-full h-full z-[999] bg-white/80 px-6 flex items-center justify-center")},{children:(0,o.jsxs)("div",ep({className:"popup-inner bg-white w-full max-w-md rounded-2xl shadow-header relative px-6 py-14"},{children:[(0,o.jsxs)("button",ep({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return u(!0)}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)("p",ep({className:"text-base md:text-lg primaryColor font-normal mb-5 text-center"},{children:c("app.how-to-join")})),(0,o.jsxs)("div",ep({className:"btn flex justify-center"},{children:[(0,o.jsxs)("button",ep({type:"button",className:"microphone bg-transparent mr-4 text-center",onClick:function(){return l(me(!0)),void u()}},{children:[(0,o.jsx)("div",ep({className:"h-[40px] md:h-[60px] w-[40px] md:w-[60px] m-auto overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mb-1 flex items-center justify-center cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-mic-unmute primaryColor text-xl"})})),(0,o.jsx)("p",ep({className:"text-sm md:text-base primaryColor font-normal"},{children:c("app.microphone")}))]})),(0,o.jsxs)("button",ep({type:"button",id:"listenOnlyJoin",className:"headphone bg-transparent ml-4 text-center"},{children:[(0,o.jsx)("div",ep({className:"camera h-[40px] md:h-[60px] w-[40px] md:w-[60px] m-auto overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mb-1 flex items-center justify-center cursor-pointer",onClick:function(){return u()}},{children:(0,o.jsx)("i",{className:"pnm-listen-only primaryColor text-xl"})})),(0,o.jsx)("p",ep({className:"text-sm md:text-base primaryColor font-normal"},{children:c("app.listen-only")}))]}))]}))]}))})):null})};var op=function(){function e(e){var t=this;this.isRecorderJoin=!1,this.participantsCount=0,this.participantCounterInterval=0,this.participantConnected=function(e){t.addParticipant(e)},this.addParticipant=function(e){var n,r,o,a,i,s;if(e.metadata){var c=JSON.parse(e.metadata);c.wait_for_approval&&(null===(r=null===(n=Gt.getState().session.currentUser)||void 0===n?void 0:n.metadata)||void 0===r?void 0:r.is_admin)&&(0,l.Am)(v.t("waiting-room.user-waiting",{name:e.name}).toString(),{type:"info",toastId:"user-waiting"}),s=c}Gt.dispatch(A({sid:e.sid,userId:e.identity,name:null!==(o=e.name)&&void 0!==o?o:"",metadata:s||null,audioTracks:e.audioTracks.size,videoTracks:e.videoTracks.size,screenShareTrack:0,isMuted:!1,connectionQuality:e.connectionQuality,isLocal:!1,joinedAt:null!==(i=null===(a=e.joinedAt)||void 0===a?void 0:a.getTime())&&void 0!==i?i:Date.now(),visibility:"visible"})),t.isRecorderJoin&&t.participantsCount++},this.participantDisconnected=function(e){t.removeParticipant(e),t.isRecorderJoin&&t.participantsCount--},this.removeParticipant=function(e){var n=E.selectById(Gt.getState(),e.identity);(null===n||void 0===n?void 0:n.screenShareTrack)&&Gt.dispatch(V({isActive:!1,sharedBy:""})),Gt.dispatch(R(e.identity)),t.that.updateVideoSubscribers(e,!1),t.that.updateAudioSubscribers(e,!1),t.that.updateScreenShareOnUserDisconnect(e)},this.connectionQualityChanged=function(e,n){Gt.dispatch(O({id:n.identity,changes:{connectionQuality:e}})),e===Oe.ZV.Poor&&n.sid===t.that.room.localParticipant.sid&&"RECORDER_BOT"!==n.identity&&"RTMP_BOT"!==n.identity&&(0,l.Am)("Your connection quality isn't good enough",{toastId:"connection-status",type:"error"})},this.setParticipantMetadata=function(e,n){if(n.metadata){var r=JSON.parse(n.metadata);Gt.dispatch(O({id:n.identity,changes:{metadata:r}})),t.that.room.localParticipant.sid===n.sid&&(Gt.dispatch(H(r)),Gt.dispatch(ue(r.raised_hand)))}},this.that=e}return e.prototype.recorderJoined=function(){this.isRecorderJoin=!0,this.startParticipantCounter(),Gt.dispatch(ce(!1))},e.prototype.clearParticipantCounterInterval=function(){this.participantCounterInterval&&clearInterval(this.participantCounterInterval)},e.prototype.startParticipantCounter=function(){var e=this;this.participantCounterInterval=setInterval((function(){0===e.participantsCount&&(console.log("NO_USER_ONLINE"),e.that.room.disconnect())}),3e3)},e}();const ap=op;var ip=function(){function e(e){var t=this;this.localTrackPublished=function(e,n){t.addSubscriber(e,n)},this.localTrackUnpublished=function(e,n){t.removeSubscriber(e,n)},this.trackSubscribed=function(e,n,r){t.addSubscriber(n,r)},this.trackUnsubscribed=function(e,n){t.removeSubscriber(e,n)},this.trackMuted=function(e,t){var n;Gt.dispatch(O({id:t.identity,changes:{isMuted:!0}})),t.identity===(null===(n=Gt.getState().session.currentUser)||void 0===n?void 0:n.userId)&&Gt.dispatch(ie(!0))},this.trackUnmuted=function(e,t){var n;Gt.dispatch(O({id:t.identity,changes:{isMuted:!1}})),t.identity===(null===(n=Gt.getState().session.currentUser)||void 0===n?void 0:n.userId)&&Gt.dispatch(ie(!1))},this.trackSubscriptionFailed=function(e,t){console.log("==== trackSubscriptionFailed ===="),console.log(e,t)},this.trackStreamStateChanged=function(e,t,n){console.log(t,n.name)},this.that=e}return e.prototype.addSubscriber=function(e,t){var n,r,o,a,i,s;if(this.roomMetadata||(this.roomMetadata=Gt.getState().session.currentRoom.metadata),this.currentUser||(this.currentUser=Gt.getState().session.currentUser),t instanceof Oe._A&&e.audioTrack){var l=Gt.getState().roomSettings.roomAudioVolume;t.getVolume()!==l&&t.setVolume(l)}if(t.identity!==(null===(n=this.currentUser)||void 0===n?void 0:n.userId)&&e.source===Oe.fQ.Source.Camera&&(((null===(r=this.roomMetadata.room_features)||void 0===r?void 0:r.admin_only_webcams)||!(null===(o=this.roomMetadata.room_features)||void 0===o?void 0:o.allow_view_other_webcams))&&!(null===(i=null===(a=this.currentUser)||void 0===a?void 0:a.metadata)||void 0===i?void 0:i.is_admin)&&t.metadata&&!JSON.parse(t.metadata).is_admin))return;e.source===Oe.fQ.Source.ScreenShare||e.source===Oe.fQ.Source.ScreenShareAudio?(Gt.dispatch(O({id:t.identity,changes:{screenShareTrack:1}})),Gt.dispatch(V({isActive:!0,sharedBy:t.identity})),this.that.setScreenShareTrack(e,t,!0)):(Gt.dispatch(O({id:t.identity,changes:{videoTracks:t.getTracks().filter((function(e){return e.source===Oe.fQ.Source.Camera})).length,audioTracks:t.getTracks().filter((function(e){return e.source===Oe.fQ.Source.Microphone})).length}})),e.source===Oe.fQ.Source.Microphone?(this.that.updateAudioSubscribers(t),Gt.dispatch(O({id:t.identity,changes:{isMuted:null===(s=e.audioTrack)||void 0===s?void 0:s.isMuted}}))):e.source===Oe.fQ.Source.Camera&&this.that.updateVideoSubscribers(t))},e.prototype.removeSubscriber=function(e,t){var n;e.source===Oe.fQ.Source.ScreenShare||e.source===Oe.fQ.Source.ScreenShareAudio?(Gt.dispatch(O({id:t.identity,changes:{screenShareTrack:0}})),Gt.dispatch(V({isActive:!1,sharedBy:""})),this.that.setScreenShareTrack(e,t,!1)):(Gt.dispatch(O({id:t.identity,changes:{videoTracks:t.getTracks().filter((function(e){return e.source===Oe.fQ.Source.Camera})).length,audioTracks:t.getTracks().filter((function(e){return e.source===Oe.fQ.Source.Microphone})).length,isMuted:null===(n=e.audioTrack)||void 0===n?void 0:n.isMuted}})),e.source===Oe.fQ.Source.Microphone?this.that.updateAudioSubscribers(t,!1):e.source===Oe.fQ.Source.Camera&&this.that.updateVideoSubscribers(t,!1))},e}();const sp=ip;var lp=new TextDecoder,cp=function(e){var t=this;this.dataReceived=function(e,n,r){var o;t.requestedParticipant=n;var a=lp.decode(e);if(a){var i;try{i=JSON.parse(a)}catch(s){return}r===Oe.WO.RELIABLE&&"SYSTEM"===i.type&&((null===(o=Gt.getState().session.currentUser)||void 0===o?void 0:o.isRecorder)||t.handleSystemTypeData(i.body))}},this.handleSystemTypeData=function(e){switch(e.type){case Ho.RAISE_HAND:case Ho.INFO:(0,l.Am)(v.t(e.msg).toString(),{type:"info"}),t.playNotification(e.type);break;case Ho.ALERT:(0,l.Am)(v.t(e.msg).toString(),{type:"error"}),t.playNotification(e.type)}},this.playNotification=function(e){e!==Ho.RAISE_HAND&&e!==Ho.ALERT||Gt.dispatch(Ve(!0))},this.that=e};const up=cp;var dp=function(){var e=this;this.metadata=null,this.welcomeMessage=void 0,this.setRoomMetadata=function(t){(0,ba.isEmpty)(t)||(e.metadata=JSON.parse(t),e.metadata&&(e.setWindowTitle(e.metadata.room_title),e.showRecordingNotification(),e.showRTMPNotification(),e.publishWelcomeMessage(),Gt.dispatch(z(e.metadata))))},this.setWindowTitle=function(e){document.title=e},this.showRecordingNotification=function(){var t,n,r;if(!(null===(t=Gt.getState().session.currentUser)||void 0===t?void 0:t.isRecorder)){var o=Gt.getState().session.isActiveRecording;!o&&(null===(n=e.metadata)||void 0===n?void 0:n.is_recording)?(0,l.Am)(v.t("room-metadata.session-recording").toString(),{type:"info"}):o&&!(null===(r=e.metadata)||void 0===r?void 0:r.is_recording)&&(0,l.Am)(v.t("room-metadata.session-not-recording").toString(),{type:"info"})}},this.showRTMPNotification=function(){var t,n,r;if(!(null===(t=Gt.getState().session.currentUser)||void 0===t?void 0:t.isRecorder)){var o=Gt.getState().session.isActiveRtmpBroadcasting;!o&&(null===(n=e.metadata)||void 0===n?void 0:n.is_active_rtmp)?(0,l.Am)(v.t("room-metadata.rtmp-started").toString(),{type:"info"}):o&&!(null===(r=e.metadata)||void 0===r?void 0:r.is_active_rtmp)&&(0,l.Am)(v.t("room-metadata.rtmp-stopped").toString(),{type:"info"})}},this.publishWelcomeMessage=function(){var t,n,r;if(void 0===e.welcomeMessage)if((0,ba.isEmpty)(null===(t=e.metadata)||void 0===t?void 0:t.welcome_message))e.welcomeMessage="";else{e.welcomeMessage=null===(n=e.metadata)||void 0===n?void 0:n.welcome_message;var o={type:"CHAT",message_id:"",time:"",isPrivate:!1,from:{userId:"system",name:"System",sid:"system"},msg:null!==(r=e.welcomeMessage)&&void 0!==r?r:""};Gt.dispatch(Pe(o))}}};const fp=dp;var pp=function(e){var t=this;this.lastActiveWebcamChanged=Date.now(),this.activeSpeakers=[],this.activeSpeakersChanged=function(e){if(t.activeSpeakers=[],e.length){var n=Gt.getState().session.isWebcamPaginating,r=Date.now();e.forEach((function(e){var o,a,i;if(!n&&t.that.videoSubscribersMap.size>2){var s=t.lastActiveWebcamChanged+4e3;r>s&&t.that.videoSubscribersMap.has(e.sid)&&(t.that.updateVideoSubscribers(e),t.lastActiveWebcamChanged=r)}var l={sid:e.sid,userId:e.identity,metadata:e.metadata,name:null!==(o=null===e||void 0===e?void 0:e.name)&&void 0!==o?o:"",isSpeaking:e.isSpeaking,audioLevel:e.audioLevel,lastSpokeAt:null!==(i=null===(a=e.lastSpokeAt)||void 0===a?void 0:a.getTime())&&void 0!==i?i:Date.now()};Gt.dispatch(S(l)),t.activeSpeakers.push(l)}))}},this.runInterval=function(){t.interval=setInterval((function(){t.activeSpeakers.length?Gt.dispatch(_(t.activeSpeakers)):w.selectAll(Gt.getState()).length&&Gt.dispatch(k())}),1e3)},this.onLivekitDisconnect=function(){clearInterval(t.interval)},this.that=e,this.runInterval()};const mp=pp;var hp=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},vp=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},xp=function(){function e(e,t,n,r,o,a,i){var s=this;this._audioSubscribersMap=new Map,this._videoSubscribersMap=new Map,this._screenShareTracksMap=new Map,this.connect=function(){return hp(s,void 0,void 0,(function(){var e;return vp(this,(function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),[4,this._room.connect(this.url,this.token)];case 1:return t.sent(),[4,this.initiateParticipants()];case 2:return t.sent(),[4,this.updateSession()];case 3:return t.sent(),Pl(),this.roomConnectionStatusState("connected"),this.currentRoomState(this._room),this.startTokenRenewInterval(),[3,5];case 4:return e=t.sent(),this.roomConnectionStatusState("error"),this.errorState({title:"Error",text:String(e)}),[3,5];case 5:return[2]}}))}))},this.initiateParticipants=function(){return hp(s,void 0,void 0,(function(){var e,t,n=this;return vp(this,(function(r){return e=null!==(t="RECORDER_BOT"===this._room.localParticipant.identity||"RTMP_BOT"===this._room.localParticipant.identity)&&void 0!==t&&t,Gt.dispatch(B({sid:this._room.localParticipant.sid,userId:this._room.localParticipant.identity,name:this._room.localParticipant.name,isRecorder:e})),this.handleParticipant.setParticipantMetadata("",this._room.localParticipant),e?this.handleParticipant.recorderJoined():this.handleParticipant.addParticipant(this._room.localParticipant),this._room.participants.forEach((function(e){n.handleParticipant.addParticipant(e),e.getTracks().forEach((function(t){t.isSubscribed&&(t.source===Oe.fQ.Source.ScreenShare||t.source===Oe.fQ.Source.ScreenShareAudio?(Gt.dispatch(O({id:e.identity,changes:{screenShareTrack:1}})),Gt.dispatch(V({isActive:!0,sharedBy:e.identity}))):n.updateVideoSubscribers(e))}))})),[2]}))}))},this.updateSession=function(){return hp(s,void 0,void 0,(function(){return vp(this,(function(e){return Gt.dispatch(W({sid:this._room.sid,room_id:this._room.name})),!(0,ba.isEmpty)(this._room.metadata)&&this._room.metadata&&this.handleRoomMetadata.setRoomMetadata(this._room.metadata),[2]}))}))},this.configureRoom=function(){var e,t,n,r,o=new Oe.du({adaptiveStream:!0,dynacast:null!==(e=window.ENABLE_DYNACAST)&&void 0!==e&&e,videoCaptureDefaults:{resolution:Oe.OM.h720.resolution},publishDefaults:{simulcast:null!==(t=window.ENABLE_SIMULCAST)&&void 0!==t&&t,videoSimulcastLayers:[Oe.OM.h90,Oe.OM.h180,Oe.OM.h360],screenShareSimulcastLayers:[Oe.Ri.h360fps3,Oe.Ri.h720fps15],stopMicTrackOnMute:null!==(n=window.STOP_MIC_TRACK_ON_MUTE)&&void 0!==n&&n,videoCodec:null!==(r=window.VIDEO_CODEC)&&void 0!==r?r:"vp8"}});return o.on(Oe.TQ.Reconnecting,(function(){return s.roomConnectionStatusState("re-connecting")})),o.on(Oe.TQ.Reconnected,(function(){return s.roomConnectionStatusState("connected")})),o.on(Oe.TQ.Disconnected,s.onDisconnected),o.on(Oe.TQ.RoomMetadataChanged,s.handleRoomMetadata.setRoomMetadata),o.on(Oe.TQ.ActiveSpeakersChanged,s.handleActiveSpeakers.activeSpeakersChanged),o.on(Oe.TQ.MediaDevicesError,s.mediaDevicesError),o.on(Oe.TQ.DataReceived,s.handleDataMessages.dataReceived),o.on(Oe.TQ.ParticipantConnected,s.handleParticipant.participantConnected),o.on(Oe.TQ.ParticipantDisconnected,s.handleParticipant.participantDisconnected),o.on(Oe.TQ.ParticipantMetadataChanged,s.handleParticipant.setParticipantMetadata),o.on(Oe.TQ.ConnectionQualityChanged,s.handleParticipant.connectionQualityChanged),o.on(Oe.TQ.LocalTrackPublished,s.handleMediaTracks.localTrackPublished),o.on(Oe.TQ.LocalTrackUnpublished,s.handleMediaTracks.localTrackUnpublished),o.on(Oe.TQ.TrackSubscribed,s.handleMediaTracks.trackSubscribed),o.on(Oe.TQ.TrackUnpublished,s.handleMediaTracks.trackUnsubscribed),o.on(Oe.TQ.TrackSubscriptionFailed,s.handleMediaTracks.trackSubscriptionFailed),o.on(Oe.TQ.TrackMuted,s.handleMediaTracks.trackMuted),o.on(Oe.TQ.TrackUnmuted,s.handleMediaTracks.trackUnmuted),o.on(Oe.TQ.TrackStreamStateChanged,s.handleMediaTracks.trackStreamStateChanged),o},this.onDisconnected=function(){s.errorState({title:"Room disconnected",text:"Room was closed or disconnected. "}),s.roomConnectionStatusState("disconnected"),Cl&&(null===ml||void 0===ml||ml.close(),El=!0),s.handleActiveSpeakers.onLivekitDisconnect(),clearInterval(s.tokenRenewInterval),s.handleParticipant.clearParticipantCounterInterval()},this.mediaDevicesError=function(e){console.log(e)},this.startTokenRenewInterval=function(){s.tokenRenewInterval=setInterval((function(){var e=Gt.getState().session.token,t={type:Go.SYSTEM,message_id:"",room_sid:s._room.sid,room_id:s._room.name,body:{type:Ho.RENEW_TOKEN,from:{sid:s._room.localParticipant.sid,userId:s._room.localParticipant.identity},msg:e}};Il(JSON.stringify(t))}),3e5)},this.setScreenShareTrack=function(e,t,n){void 0===n&&(n=!0),console.log("=== setScreenShareTrack ===",e.source),n?s._screenShareTracksMap.set(t.identity,e):s._screenShareTracksMap.delete(t.identity),s.screenShareTracksState(new Map(s._screenShareTracksMap))},this.updateScreenShareOnUserDisconnect=function(e){s._screenShareTracksMap.size&&s._screenShareTracksMap.has(e.identity)&&(s._screenShareTracksMap.delete(e.identity),s.screenShareTracksState(new Map(s._screenShareTracksMap)),s._screenShareTracksMap.size||Gt.dispatch(V({isActive:!1,sharedBy:""})))},this.updateAudioSubscribers=function(e,t){void 0===t&&(t=!0),"undefined"!==typeof e.identity?e.identity!==s._room.localParticipant.identity&&(t?s._audioSubscribersMap.set(e.identity,e):s._audioSubscribersMap.has(e.identity)&&s._audioSubscribersMap.delete(e.identity),s.audioSubscribersState(new Map(s._audioSubscribersMap)),Gt.dispatch($(s.audioSubscribersState.length))):console.log("participant.identity undefined")},this.updateVideoSubscribers=function(e,t){if(void 0===t&&(t=!0),console.log("==== updateVideoSubscribers ===="),"undefined"!==typeof e.identity)if(t?s._videoSubscribersMap.set(e.identity,e):s._videoSubscribersMap.has(e.identity)&&(console.log("removing..",e.identity),s._videoSubscribersMap.delete(e.identity)),Gt.dispatch(q(s._videoSubscribersMap.size)),s._videoSubscribersMap.size<=1)s.videoSubscribersState(new Map(s._videoSubscribersMap));else{var n=Array.from(s._videoSubscribersMap).filter((function(e){var t;return e[0]!==(null===(t=s._room.localParticipant)||void 0===t?void 0:t.identity)}));if(n.sort((function(e,t){var n,r,o,a,i,s,l,c,u=e[1],d=t[1];if(u.isSpeaking&&d.isSpeaking)return d.audioLevel-u.audioLevel;if(u.isSpeaking!==d.isSpeaking)return u.isSpeaking?-1:1;if(u.lastSpokeAt!==d.lastSpokeAt){var f=null!==(r=null===(n=u.lastSpokeAt)||void 0===n?void 0:n.getTime())&&void 0!==r?r:0;return(null!==(a=null===(o=d.lastSpokeAt)||void 0===o?void 0:o.getTime())&&void 0!==a?a:0)-f}return(null!==(s=null===(i=u.joinedAt)||void 0===i?void 0:i.getTime())&&void 0!==s?s:0)-(null!==(c=null===(l=d.joinedAt)||void 0===l?void 0:l.getTime())&&void 0!==c?c:0)})),s._room.localParticipant.getTracks().length){var r=[s._room.localParticipant.sid,s._room.localParticipant];n.unshift(r)}s.videoSubscribersState(new Map(n)),console.log("===ended update ====")}else console.log("participant.identity undefined")},this.token=e.token,this.url=e.livekit_host,this.audioSubscribersState=t,this.videoSubscribersState=n,this.screenShareTracksState=i,this.currentRoomState=r,this.errorState=o,this.roomConnectionStatusState=a,this.handleParticipant=new ap(this),this.handleMediaTracks=new sp(this),this.handleDataMessages=new up(this),this.handleRoomMetadata=new fp,this.handleActiveSpeakers=new mp(this),this.roomConnectionStatusState("connecting"),sessionStorage.clear(),this._room=this.configureRoom(),this.connect()}return Object.defineProperty(e.prototype,"videoSubscribersMap",{get:function(){return this._videoSubscribersMap},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"room",{get:function(){return this._room},enumerable:!1,configurable:!0}),e}();const bp=xp;var yp=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const gp=function(){var e=yp((0,a.useState)(),2),t=e[0],n=e[1],r=yp((0,a.useState)(),2),o=r[0],i=r[1],s=yp((0,a.useState)("loading"),2),l=s[0],c=s[1],u=yp((0,a.useState)(),2),d=u[0],f=u[1],p=yp((0,a.useState)(),2),m=p[0],h=p[1],v=yp((0,a.useState)(),2),x=v[0],b=v[1];return{error:t,setError:n,roomConnectionStatus:l,setRoomConnectionStatus:c,currentRoom:o,audioSubscribers:d,videoSubscribers:m,screenShareTracks:x,startLivekitConnection:function(e){new bp(e,f,h,i,n,c,b)}}};var wp=function(){return wp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},wp.apply(this,arguments)},jp=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Sp=(0,qt.P1)((function(e){return e.roomSettings.playAudioNotification}),(function(e){return e})),kp=(0,qt.P1)((function(e){return e.roomSettings.allowPlayAudioNotification}),(function(e){return e}));const _p=a.memo((function(){var e,t=Ht(),n=(0,a.useRef)(null),r=zt(Sp),i=zt(kp),s=jp((0,a.useState)(!1),2),l=s[0],c=s[1],u=null!==(e=window.STATIC_ASSETS_PATH)&&void 0!==e?e:"./assets";return(0,a.useEffect)((function(){var e=n.current;r&&(!l&&i&&(null===e||void 0===e||e.play()),t(Ve(!1)))}),[r,l,i,t]),(0,a.useEffect)((function(){var e=n.current;return e&&(e.addEventListener("playing",(function(){return c(!0)})),e.addEventListener("ended",(function(){return c(!1)}))),function(){e&&(e.pause(),e.removeEventListener("playing",(function(){return c(!0)})),e.removeEventListener("ended",(function(){return c(!1)})))}}),[]),(0,o.jsx)("div",wp({style:{display:"none"}},{children:(0,o.jsx)("audio",{ref:n,src:"".concat(u,"/audio/beep-07a.mp3")})}))}));var Np=n(95172),Cp=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Tp=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};const Ep=function(e){var t=Ht(),n=(0,Qt.$)().t;(0,Np.y1)("ctrl+alt+m",(function(){e&&function(e){e&&e.localParticipant.audioTracks.forEach((function(e){return Cp(void 0,void 0,void 0,(function(){return Tp(this,(function(n){switch(n.label){case 0:return e.track&&e.track.source===Oe.fQ.Source.Microphone?e.isMuted?[4,e.track.unmute()]:[3,2]:[3,4];case 1:return n.sent(),t(ie(!1)),[3,4];case 2:return[4,e.track.mute()];case 3:n.sent(),t(ie(!0)),n.label=4;case 4:return[2]}}))}))}))}(e)}),[e]),(0,Np.y1)("ctrl+alt+a",(function(){var e=Gt.getState().bottomIconsActivity;e.isActiveMicrophone||e.showMicrophoneModal||t(me(!0))}));(0,Np.y1)("ctrl+alt+o",(function(){e&&function(e){e.localParticipant.audioTracks.forEach((function(t){return Cp(void 0,void 0,void 0,(function(){return Tp(this,(function(n){return t.track&&t.kind===Oe.fQ.Kind.Audio&&e.localParticipant.unpublishTrack(t.track),[2]}))}))})),t(ae(!1)),t(ie(!1)),t(Be(""))}(e)}),[e]),(0,Np.y1)("ctrl+alt+v",(function(){var e=Gt.getState().bottomIconsActivity;e.isActiveWebcam||e.showVideoShareModal||t(he(!0))}));(0,Np.y1)("ctrl+alt+x",(function(){e&&(Gt.getState().bottomIconsActivity.isActiveWebcam&&function(e){e.localParticipant.videoTracks.forEach((function(t){return Cp(void 0,void 0,void 0,(function(){return Tp(this,(function(n){return t.track&&t.track.source===Oe.fQ.Source.Camera&&e.localParticipant.unpublishTrack(t.track),[2]}))}))})),t(se(!1)),t(We("")),t(ke({type:"none"}))}(e))}),[e]),(0,Np.y1)("ctrl+alt+u",(function(){var e=Gt.getState().bottomIconsActivity.isActiveParticipantsPanel;t(ce(!e))})),(0,Np.y1)("ctrl+alt+c",(function(){var e=Gt.getState().bottomIconsActivity.isActiveChatPanel;t(le(!e))})),(0,Np.y1)("ctrl+alt+l",(function(){var e,n;if(null===(n=null===(e=Gt.getState().session.currentUser)||void 0===e?void 0:e.metadata)||void 0===n?void 0:n.is_admin){var r=Gt.getState().bottomIconsActivity.showLockSettingsModal;t(ve(!r))}})),(0,Np.y1)("ctrl+alt+s",(function(){var e=Gt.getState().roomSettings.isShowRoomSettingsModal;t(Ge(!e))})),(0,Np.y1)("ctrl+alt+w",(function(){var e=Gt.getState().bottomIconsActivity.isActiveWhiteboard;t(pe(!e))}));(0,Np.y1)("ctrl+alt+r",(function(){e&&function(e,r){Cp(void 0,void 0,void 0,(function(){var o,a;return Tp(this,(function(i){switch(i.label){case 0:return e?[3,2]:(o={sid:r.sid,room_id:r.name,msg_type:Ho.RAISE_HAND,msg:n("footer.notice.has-raised-hand",{user:r.localParticipant.name})},[4,Vo("dataMessage",o)]);case 1:return(a=i.sent()).status?(t(ue(!0)),(0,l.Am)(n("footer.notice.you-raised-hand"),{type:"info"})):(0,l.Am)(a.msg,{type:"error"}),[3,4];case 2:return o={sid:r.sid,room_id:r.name,msg_type:Ho.LOWER_HAND,msg:Ho.LOWER_HAND},[4,Vo("dataMessage",o)];case 3:(a=i.sent()).status?t(ue(!1)):(0,l.Am)(a.msg,{type:"error"}),i.label=4;case 4:return[2]}}))}))}(Gt.getState().bottomIconsActivity.isActiveRaisehand,e)}),[e])};const Pp=function(){(0,a.useEffect)((function(){if("undefined"===typeof window.DESIGN_CUSTOMIZATION){var e=new URLSearchParams(window.location.search);if(!e.get("custom_design"))return;window.DESIGN_CUSTOMIZATION=e.get("custom_design")}var t={};try{t=JSON.parse(window.DESIGN_CUSTOMIZATION)}catch(i){return void console.log("can't parse custom design params")}var n="";t.primary_color&&(n+=".primaryColor{ color: "+t.primary_color+"}",n+=".text-primaryColor { color: "+t.primary_color+"}",n+=".placeholder\\:text-primaryColor\\/70::placeholder { color: "+t.primary_color+"}",n+=".bg-primaryColor { background: "+t.primary_color+" !important;}",n+=".hover\\:bg-primaryColor:hover { background: "+t.primary_color+" !important;}",n+=".border-primaryColor { border-color: "+t.primary_color+" !important;}",n+=".excalidraw {\n    --color-primary: "+t.primary_color+";\n    --color-primary-darker: "+t.primary_color+";\n    --color-primary-darkest: "+t.primary_color+";\n}"),t.secondary_color&&(n+=".secondaryColor { color: "+t.secondary_color+" !important;}",n+=".text-secondaryColor { color: "+t.secondary_color+" !important;}",n+=".bg-secondaryColor { background: "+t.secondary_color+" !important;}",n+=".hover\\:text-secondaryColor:hover { color: "+t.secondary_color+" !important;}",n+=".group:hover .group-hover\\:text-secondaryColor { color: "+t.secondary_color+" !important;}",n+=".bg-secondaryColor, .hover:bg-secondaryColor:hover { background: "+t.secondary_color+" !important;}",n+=".hover:bg-secondaryColor:hover { background: "+t.secondary_color+" !important;}",n+=".border-secondaryColor { border-color: "+t.secondary_color+" !important;}",n+=".excalidraw {\n    --color-primary-light: "+t.secondary_color+";\n}"),t.background_image?(n+='.main-app-bg { \n        background: url("'.concat(t.background_image,'") !important;\n        background-position: center !important;\n        background-repeat: no-repeat !important;\n        background-size: cover !important;\n        }'),n+='.error-app-bg { \n        background: url("'.concat(t.background_image,'") !important;\n        background-position: center !important;\n        background-repeat: no-repeat !important;\n        background-size: cover !important;\n        }'),n+='.waiting-room { \n        background: url("'.concat(t.background_image,'") !important;\n        background-position: center !important;\n        background-repeat: no-repeat !important;\n        background-size: cover !important;\n        }')):t.background_color&&(n+=".main-app-bg { \n        background: ".concat(t.background_color," !important;\n        }"),n+=".error-app-bg { \n        background: ".concat(t.background_color," !important;\n        }"),n+=".waiting-room { \n        background: ".concat(t.background_color," !important;\n        }")),t.header_bg_color&&(n+="header#main-header { background: "+t.header_bg_color+"; }"),t.footer_bg_color&&(n+="footer#main-footer { background: "+t.footer_bg_color+"; }"),t.left_side_bg_color&&(n+=".participants-wrapper { background: "+t.left_side_bg_color+"; }",n+=".vertical-webcams { background: "+t.left_side_bg_color+" !important; }"),t.right_side_bg_color&&(n+=".messageModule-wrapper { background: "+t.right_side_bg_color+"; }");var r,o,a=document.head;return t.custom_css_url&&((r=document.createElement("link")).type="text/css",r.rel="stylesheet",r.href=t.custom_css_url,a.appendChild(r)),""!==n&&((o=document.createElement("style")).id="plugNmeetCustomization",o.textContent=n,a.appendChild(o)),function(){""!==n&&a.removeChild(o),t.custom_css_url&&a.removeChild(r)}}),[])};var Ap=n(12437),Rp=n.n(Ap),Op=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Ip=function(e,t){var n=Ht(),r=Op((0,a.useState)(""),2),o=r[0],i=r[1],s=Op((0,a.useState)("landscape-device"),2),l=s[0],c=s[1],u=Op((0,a.useState)(""),2),d=u[0],f=u[1];(0,a.useEffect)((function(){window.onresize=function(){n(we(window.innerWidth)),n(je(window.innerHeight)),p();var e=Gt.getState().bottomIconsActivity.isActiveChatPanel,t=Gt.getState().bottomIconsActivity.isActiveParticipantsPanel;window.innerWidth<1024&&e&&t&&n(ce(!1))},n(we(window.innerWidth)),n(je(window.innerHeight)),window.innerWidth<1024&&(n(ce(!1)),n(le(!1)));var e="is-pc",t=new(Rp())(window.navigator.userAgent);t.mobile()?(e="is-mobile ",n(X("mobile"))):t.tablet()&&(e="is-tablet ",n(X("tablet")));var r=t.os();"AndroidOS"===r?e+="is-android":"iOS"!==r&&"iPadOS"!==r||(e+="is-ios"),i(e);var o=window.matchMedia("(orientation: portrait)");o.matches&&c("portrait-device"),o.addEventListener("change",(function(e){e.matches?c("portrait-device"):c("landscape-device")}))}),[]),(0,a.useEffect)((function(){p()}),[null===e||void 0===e?void 0:e.state]);var p=function(){var e=t.current;e&&f("".concat(e.clientHeight,"px"))};return{deviceClass:o,orientationClass:l,screenHeight:d}};var Fp=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Mp=function(){var e=Fp((0,a.useState)(!1),2),t=e[0],n=e[1];(0,a.useEffect)((function(){var e=function(){n(!0)},t=function(){n(!1)};return window.addEventListener("blur",e,!1),window.addEventListener("focus",t,!1),function(){window.removeEventListener("blur",e),window.removeEventListener("focus",t)}}),[]),(0,a.useEffect)((function(){var e,t;"undefined"!==typeof document.hidden?(e="hidden",t="visibilitychange"):"undefined"!==typeof document.msHidden?(e="msHidden",t="msvisibilitychange"):"undefined"!==typeof document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange");var r=function(){document[e]?n(!0):n(!1)};return"undefined"===typeof document.addEventListener&&void 0===e||document.addEventListener(t,r,!1),function(){"undefined"===typeof document.addEventListener&&void 0===e||document.removeEventListener(t,r)}}),[]),(0,a.useEffect)((function(){var e,n,r,o,a=Gt.getState().session,i={type:Go.SYSTEM,room_sid:a.currentRoom.sid,message_id:"",body:{type:Ho.USER_VISIBILITY_CHANGE,from:{sid:null!==(n=null===(e=a.currentUser)||void 0===e?void 0:e.sid)&&void 0!==n?n:"",userId:null!==(o=null===(r=a.currentUser)||void 0===r?void 0:r.userId)&&void 0!==o?o:""},msg:t?"hidden":"visible"}};Il(JSON.stringify(i))}),[t])};var Dp=function(){return Dp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Dp.apply(this,arguments)},Up=(0,qt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.waiting_room_features.waiting_room_msg}),(function(e){return e}));const Lp=function(){var e,t,n=null!==(e=window.STATIC_ASSETS_PATH)&&void 0!==e?e:"./assets",r=null!==(t=window.CUSTOM_LOGO)&&void 0!==t?t:"".concat(n,"/imgs/main-logo.png"),a=(0,Qt.$)().t,i=zt(Up);return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",Dp({className:"waiting-room flex items-center justify-center w-full h-screen",style:{backgroundImage:'url("'.concat(n,'/imgs/app-banner.jpg")')}},{children:(0,o.jsxs)("div",Dp({className:"waiting-room-inner"},{children:[(0,o.jsx)("div",Dp({className:"logo w-40 m-auto relative z-20"},{children:(0,o.jsx)("div",{className:"".concat((window.CUSTOM_LOGO,"h-[90px]")," header-logo h-full bg-contain bg-no-repeat"),style:{backgroundImage:'url("'.concat(r,'")')}})})),(0,o.jsx)("div",{className:"divider my-5 h-[2px] w-full max-w-[50px] bg-primaryColor m-auto"}),(0,o.jsx)("div",Dp({className:"loading-wrap relative h-24"},{children:(0,o.jsx)("div",Dp({className:"loading absolute text-center top-3 z-[999] left-0 right-0 m-auto"},{children:(0,o.jsxs)("div",Dp({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]}))}))})),(0,o.jsx)("p",Dp({className:"text-3xl"},{children:(0,_a.isEmpty)(i)?a("notifications.waiting-for-approval"):i}))]}))}))})};var Bp=function(){return Bp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Bp.apply(this,arguments)},Wp=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Vp=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Gp=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Hp=(0,qt.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.wait_for_approval}),(function(e){return e}));const zp=function(){var e=Ht(),t=(0,a.useRef)(null),n=(0,Qt.$)().t,r=Gp((0,a.useState)(!0),2),i=r[0],s=r[1],l=Gp((0,a.useState)(!1),2),c=l[0],u=l[1],d=Gp((0,a.useState)("participant"),2),f=d[0],p=d[1],m=Gp((0,a.useState)(),2),h=m[0],v=m[1],x=zt(Hp);ur();var b=gp(),y=b.error,g=b.setError,w=b.roomConnectionStatus,j=b.setRoomConnectionStatus,S=b.currentRoom,k=b.audioSubscribers,_=b.videoSubscribers,N=b.screenShareTracks,C=b.startLivekitConnection;Ep(S),Pp(),Mp();var T=Ip(S,t),E=T.deviceClass,P=T.orientationClass,A=T.screenHeight;(0,a.useEffect)((function(){var t,r=new URLSearchParams(window.location.search),o=Object.fromEntries(r.entries());if("undefined"===typeof o.access_token)s(!1),g({title:n("app.token-missing-title"),text:n("app.token-missing-des")});else{S||(j("checking"),t=setTimeout((function(){Wp(void 0,void 0,void 0,(function(){var t;return Vp(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Vo("verifyToken",{is_production:!0})];case 1:return t=r.sent(),[3,3];case 2:return r.sent(),j("ready"),s(!1),g({title:n("app.verification-failed-title"),text:n("app.token-not-valid")}),[2];case 3:return j("ready"),s(!1),t.status?(e(U(o.access_token)),v({livekit_host:t.livekit_host,token:t.token})):g({title:n("app.verification-failed-title"),text:n(t.msg)}),[2]}}))}))}),300))}return function(){t&&clearTimeout(t)}}),[n,e,S,g,j]),(0,a.useEffect)((function(){s("connecting"===w||"re-connecting"===w||"checking"===w)}),[w]),(0,a.useEffect)((function(){var e,t;S&&("RECORDER_BOT"!==S.localParticipant.identity&&"RTMP_BOT"!==S.localParticipant.identity||u(!0),(null===(t=null===(e=Gt.getState().session.currentUser)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.is_admin)&&p("admin"))}),[S]);var R=function(){h&&C(h)};return(0,o.jsx)("div",Bp({className:"".concat(P," ").concat(E," ").concat(f),style:{height:A}},{children:i?(0,o.jsx)(Yt,{text:n("app."+w)}):y&&!i?(0,o.jsx)(Jt,{title:y.title,text:y.text}):"connected"===(null===S||void 0===S?void 0:S.state)?x?(0,o.jsx)(Lp,{}):S?(0,o.jsxs)("div",Bp({className:"plugNmeet-app overflow-hidden",ref:t},{children:[c?null:(0,o.jsx)(Zs,{currentRoom:S}),(0,o.jsx)(Zf,{currentRoom:S,audioSubscribers:k,videoSubscribers:_,screenShareTracks:N,isRecorder:c}),(0,o.jsx)(bs,{currentRoom:S,isRecorder:c}),(0,o.jsx)(_p,{})]})):null:"ready"===w?(0,o.jsx)(rp,{onCloseModal:R}):null}))};var Qp=function(){return Qp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Qp.apply(this,arguments)},qp=document.getElementById("plugNmeet-app");(0,i.s)(qp).render((0,o.jsx)(a.StrictMode,{children:(0,o.jsx)(s.zt,Qp({store:Gt},{children:(0,o.jsxs)(u.W,Qp({backend:c.PD},{children:[(0,o.jsx)(a.Suspense,Qp({fallback:(0,o.jsx)(Yt,{text:""})},{children:(0,o.jsx)(zp,{})})),(0,o.jsx)(l.Ix,{})]}))}))}))},75410:()=>{},48628:()=>{},55778:()=>{},73908:()=>{},14777:()=>{},99830:()=>{},70209:()=>{},87414:()=>{}},e=>{e.O(0,[736],(()=>{return t=15770,e(e.s=t);var t}));e.O()}]);